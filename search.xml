<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>åç«¯æ¥å…¥è®¯é£æ˜Ÿç«API</title>
    <url>/2024/11/16/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A51/</url>
    <content><![CDATA[<p>å¦‚ä½•å¼•å…¥ï¼Ÿå…ˆçœ‹å®˜æ–¹æ–‡æ¡£</p>
<p><a href="https://www.xfyun.cn/doc/spark/Web.html#_2-function-call%E8%AF%B4%E6%98%8E:~:text=%23-,3.%20%E8%B0%83%E7%94%A8%E7%A4%BA%E4%BE%8B,-%E6%B3%A8%3A%20demo%E5%8F%AA%E6%98%AF">https://www.xfyun.cn/doc/spark/Web.html#_2-function-call%E8%AF%B4%E6%98%8E:~:text=%23-,3.%20%E8%B0%83%E7%94%A8%E7%A4%BA%E4%BE%8B,-%E6%B3%A8%3A%20demo%E5%8F%AA%E6%98%AF</a></p>
<p>æˆ‘å»ºè®®å¼•å…¥å…¶ä»–å¤§ä½¬å†™å¥½çš„ sdk ï¼ŒGitHub åœ°å€ï¼š<a href="https://github.com/briqt/xunfei-spark4j">https://github.com/briqt/xunfei-spark4j</a></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--ä¿®æ”¹versionä¸ºæœ€æ–°ç¨³å®šç‰ˆ--&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.briqt<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>xunfei-spark4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>è°ƒç”¨çš„è¯ï¼Œä¸ä½¿ç”¨ç¡¬ç¼–ç ï¼Œè€Œæ˜¯æŠŠç›¸å…³ä¿¡æ¯å†™åœ¨é…ç½®æ–‡ä»¶é‡Œé¢</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java">SparkClient sparkClient=<span class="hljs-keyword">new</span> <span class="hljs-title class_">SparkClient</span>();<br><br><span class="hljs-comment">// è®¾ç½®è®¤è¯ä¿¡æ¯</span><br>sparkClient.appid=<span class="hljs-string">&quot;&quot;</span>;<br>sparkClient.apiKey=<span class="hljs-string">&quot;&quot;</span>;<br>sparkClient.apiSecret=<span class="hljs-string">&quot;&quot;</span>;<br></code></pre></td></tr></table></figure>

<p>config æ–‡ä»¶ï¼Œè¯»å–æˆ‘ä»¬é…ç½®çš„ä¿¡æ¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> lombok.Data;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;xunfei.client&quot;)</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XingHuoConfig</span> &#123;<br>    <span class="hljs-keyword">private</span> String appid;<br>    <span class="hljs-keyword">private</span> String apiSecret;<br>    <span class="hljs-keyword">private</span> String apiKey;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> SparkClient <span class="hljs-title function_">sparkClient</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">SparkClient</span> <span class="hljs-variable">sparkClient</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SparkClient</span>();<br>        sparkClient.setApiKey(apiKey);<br>        sparkClient.setApiSecret(apiSecret);<br>        sparkClient.setAppid(appid);<br>        <span class="hljs-keyword">return</span> sparkClient;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å¦‚æœç”Ÿæˆçš„å†…å®¹ä¸ç¬¦åˆè‡ªå·±çš„é¢„æœŸï¼Œè§£å†³æ–¹æ³•ï¼šç»™ä»–ä¸€ä¸ªç¬¦åˆæ ‡å‡†çš„ä¾‹å­, è™½ç„¶æœ‰è€—è´¹ token ä½†æ˜¯æš‚æ—¶æ²¡æƒ³åˆ°æ›´å¥½çš„æ–¹å¼</p>
<p>è¿™ä¸ª PRECONDITION æ˜¯æˆ‘åœ¨ service è°ƒç”¨ä¹‹å‰æ‰‹åŠ¨æ‹¼æ¥åˆ° content å‰é¢ï¼Œæ²¡å¤ªæ·±å…¥äº†è§£æ˜¯ä¸æ˜¯èƒ½æå‰æŒ‡å®šé¢„è®¾ğŸ˜…</p>
<p>AI æœåŠ¡ç±»ç›¸å…³çš„ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Aiservice</span> &#123;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> SparkClient sparkClient;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> ClientV4 clientV4;<br><br>    <span class="hljs-comment">// ç¨³å®šçš„éšæœºæ•°</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">STABLE_TEMPERATURE</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.05f</span>;<br><br>    <span class="hljs-comment">//é¢„è®¾è§’è‰²</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PRECONDITION</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ä½ æ˜¯ä¸€ä¸ª$&#123;è§’è‰²å®šä¹‰&#125;ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šæŒ‰ç…§ä»¥ä¸‹å›ºå®šæ ¼å¼ç»™ä½ æä¾›å†…å®¹ï¼š\n&quot;</span> +ã€‚ã€‚ã€‚ã€‚ + <span class="hljs-string">&quot;ä¸‹é¢æ˜¯ä¸€ä¸ªå…·ä½“çš„ä¾‹å­çš„æ¨¡æ¿ï¼š&quot;</span>+;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ˜Ÿç«AI å¯¹è¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span></span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">sendMesToAIUseXingHuo</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String content)</span> &#123;<br>        List&lt;SparkMessage&gt; messages = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        messages.add(SparkMessage.userContent(content));<br>        <span class="hljs-comment">// æ„é€ è¯·æ±‚</span><br>        <span class="hljs-type">SparkRequest</span> <span class="hljs-variable">sparkRequest</span> <span class="hljs-operator">=</span> SparkRequest.builder()<br>                <span class="hljs-comment">// æ¶ˆæ¯åˆ—è¡¨</span><br>                .messages(messages)<br>                <span class="hljs-comment">// æ¨¡å‹å›ç­”çš„tokensçš„æœ€å¤§é•¿åº¦,éå¿…ä¼ ,å–å€¼ä¸º[1,4096],é»˜è®¤ä¸º2048</span><br>                .maxTokens(<span class="hljs-number">2048</span>)<br>                <span class="hljs-comment">// æ ¸é‡‡æ ·é˜ˆå€¼ã€‚ç”¨äºå†³å®šç»“æœéšæœºæ€§,å–å€¼è¶Šé«˜éšæœºæ€§è¶Šå¼ºå³ç›¸åŒçš„é—®é¢˜å¾—åˆ°çš„ä¸åŒç­”æ¡ˆçš„å¯èƒ½æ€§è¶Šé«˜ éå¿…ä¼ ,å–å€¼ä¸º[0,1],é»˜è®¤ä¸º0.5</span><br>                .temperature(<span class="hljs-number">0.2</span>)<br>                <span class="hljs-comment">// æŒ‡å®šè¯·æ±‚ç‰ˆæœ¬ï¼Œé»˜è®¤ä½¿ç”¨æœ€æ–°2.0ç‰ˆæœ¬</span><br>                .apiVersion(SparkApiVersion.V3_5)<br>                .build();<br>        <span class="hljs-comment">// åŒæ­¥è°ƒç”¨</span><br>        <span class="hljs-type">SparkSyncChatResponse</span> <span class="hljs-variable">chatResponse</span> <span class="hljs-operator">=</span> sparkClient.chatSync(sparkRequest);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">responseContent</span> <span class="hljs-operator">=</span> chatResponse.getContent();<br>        log.info(<span class="hljs-string">&quot;æ˜Ÿç« AI è¿”å›çš„ç»“æœ &#123;&#125;&quot;</span>, responseContent);<br>        <span class="hljs-keyword">return</span> responseContent;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>AIå¤§æ¨¡å‹æ¥å…¥</category>
      </categories>
  </entry>
  <entry>
    <title></title>
    <url>/2025/04/24/Docker-Docker%20%E5%9F%BA%E7%A1%80%E7%AF%87/</url>
    <content><![CDATA[<h1 id="ä¸€-Docker-ç®€ä»‹ä¸å®‰è£…"><a href="#ä¸€-Docker-ç®€ä»‹ä¸å®‰è£…" class="headerlink" title="ä¸€.Docker ç®€ä»‹ä¸å®‰è£…"></a>ä¸€.Docker ç®€ä»‹ä¸å®‰è£…</h1><p>Docker ä¸¤ä¸ªä¸»è¦éƒ¨ä»¶ï¼š</p>
<ul>
<li>Docker: å¼€æºçš„å®¹å™¨è™šæ‹ŸåŒ–å¹³å°ï¼š<a href="http://www.docker.com/">http://www.docker.com</a></li>
<li>Docker Hub: ç”¨äºåˆ†äº«ã€ç®¡ç† Docker å®¹å™¨çš„ Docker SaaS å¹³å° â€“ <a href="https://registry.hub.docker.com/search?q=library">Docker Hub</a></li>
</ul>
<p><strong>Docker ä¸ºä»€ä¹ˆå‡ºç°ï¼Ÿ</strong></p>
<p>è§£å†³äº†<strong>è¿è¡Œç¯å¢ƒå’Œé…ç½®é—®é¢˜çš„è½¯ä»¶å®¹å™¨</strong>ï¼Œæ–¹ä¾¿åšæŒç»­é›†æˆå¹¶æœ‰åŠ©äºæ•´ä½“å‘å¸ƒçš„å®¹å™¨è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚</p>
<h2 id="1-Docker-åŸºæœ¬ç»„æˆ"><a href="#1-Docker-åŸºæœ¬ç»„æˆ" class="headerlink" title="1. Docker åŸºæœ¬ç»„æˆ"></a>1. Docker åŸºæœ¬ç»„æˆ</h2><h4 id="Docker-é•œåƒ"><a href="#Docker-é•œåƒ" class="headerlink" title="Docker é•œåƒ"></a>Docker é•œåƒ</h4><p>Docker é•œåƒæ˜¯ Docker å®¹å™¨è¿è¡Œæ—¶çš„åªè¯»æ¨¡æ¿ï¼Œæ¯ä¸€ä¸ªé•œåƒç”±ä¸€ç³»åˆ—çš„å±‚ (layers) ç»„æˆã€‚<strong>ç›¸å½“äºå®¹å™¨çš„ â€œæºä»£ç â€ï¼Œdocker é•œåƒæ–‡ä»¶ç±»ä¼¼äº Java çš„ç±»æ¨¡æ¿ï¼Œè€Œ docker å®¹å™¨å®ä¾‹ç±»ä¼¼äº java ä¸­ new å‡ºæ¥çš„å®ä¾‹å¯¹è±¡ã€‚</strong></p>
<h4 id="Docker-ä»“åº“"><a href="#Docker-ä»“åº“" class="headerlink" title="Docker ä»“åº“"></a>Docker ä»“åº“</h4><p>Docker ä»“åº“ç”¨æ¥ä¿å­˜é•œåƒï¼Œå¯ä»¥ç†è§£ä¸ºä»£ç æ§åˆ¶ä¸­çš„ä»£ç ä»“åº“ã€‚</p>
<h4 id="Docker-å®¹å™¨"><a href="#Docker-å®¹å™¨" class="headerlink" title="Docker å®¹å™¨"></a>Docker å®¹å™¨</h4><p>Docker å®¹å™¨å’Œæ–‡ä»¶å¤¹å¾ˆç±»ä¼¼ï¼Œä¸€ä¸ª Docker å®¹å™¨åŒ…å«äº†æ‰€æœ‰çš„æŸä¸ªåº”ç”¨è¿è¡Œæ‰€éœ€è¦çš„ç¯å¢ƒã€‚æ¯ä¸€ä¸ª Docker å®¹å™¨éƒ½æ˜¯ä» Docker é•œåƒåˆ›å»ºçš„ã€‚</p>
<h2 id="2-Docker-çš„å®‰è£…"><a href="#2-Docker-çš„å®‰è£…" class="headerlink" title="2. Docker çš„å®‰è£…"></a>2. Docker çš„å®‰è£…</h2><p>å‚è€ƒå®˜æ–¹ç½‘ç«™ï¼š<a href="https://docs.docker.com/engine/install/centos/">Install Docker Engine on CentOS | Docker Documentation</a></p>
<p>ä»¥ä¸‹æ“ä½œå‡éœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œå¦‚æœä¸æ˜¯ root è§’è‰²ä¸‹ï¼Œéœ€è¦åœ¨æ¯æ¡å‘½ä»¤å‰åŠ  sudo</p>
<ol>
<li>å¸è½½æ—§ç‰ˆæœ¬</li>
</ol>
<figure class="highlight livescript"><table><tr><td class="code"><pre><code class="hljs livescript">yum remove docker <span class="hljs-string">\</span><br>                  docker-client <span class="hljs-string">\</span><br>                  docker-client-latest <span class="hljs-string">\</span><br>                  docker-common <span class="hljs-string">\</span><br>                  docker-latest <span class="hljs-string">\</span><br>                  docker-latest-logrotate <span class="hljs-string">\</span><br>                  docker-logrotate <span class="hljs-string">\</span><br>                  docker-engine<br></code></pre></td></tr></table></figure>

<p>å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> -y yum-utils<br></code></pre></td></tr></table></figure>

<p>è®¾ç½® stable é•œåƒä»“åº“</p>
<p><strong>è¿™é‡Œä¸èƒ½æŒ‰ç…§å®˜ç½‘çš„æ“ä½œï¼Œå› ä¸ºæˆ‘ä»¬è¦è®¾ç½®è‡ªå·±çš„é˜¿é‡Œäº‘é•œåƒä»“åº“ï¼ï¼</strong></p>
<figure class="highlight vim"><table><tr><td class="code"><pre><code class="hljs vim">yum-config-manager --<span class="hljs-built_in">add</span>-repo http://mirrors.aliyun.<span class="hljs-keyword">com</span>/docker-<span class="hljs-keyword">ce</span>/linux/centos/docker-<span class="hljs-keyword">ce</span>.repo<br></code></pre></td></tr></table></figure>

<p>æ›´æ–° yum è½¯ä»¶åŒ…ç´¢å¼•</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">yum makecache fast</span><br></code></pre></td></tr></table></figure>

<p>å®‰è£… DOCKER CE</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><code class="hljs stata">yum install docker-ce docker-ce-<span class="hljs-keyword">cli</span> containerd.io docker-compose-<span class="hljs-keyword">plugin</span><br></code></pre></td></tr></table></figure>

<p>å¯åŠ¨ Dockerã€æŸ¥çœ‹ docker ç‰ˆæœ¬</p>
<figure class="highlight crmsh"><table><tr><td class="code"><pre><code class="hljs crmsh">systemctl <span class="hljs-literal">start</span> docker<br>docker -v<br></code></pre></td></tr></table></figure>

<p>HelloWorld</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><code class="hljs routeros">docker <span class="hljs-built_in">run</span> hello-world<br></code></pre></td></tr></table></figure>

<h2 id="3-é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ"><a href="#3-é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ" class="headerlink" title="3. é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ"></a>3. é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ</h2><ol>
<li><p>æ³¨å†Œä¸€ä¸ªé˜¿é‡Œäº‘è´¦å·ï¼Œè¿›å…¥æ§åˆ¶å°ï¼Œé€‰æ‹©<strong>å®¹å™¨é•œåƒæœåŠ¡</strong></p>
<p>2.ç›´æ¥å¤åˆ¶ç²˜è´´å®˜æ–¹çš„ä»£ç </p>
</li>
</ol>
<h2 id="4-åº•å±‚åŸç†"><a href="#4-åº•å±‚åŸç†" class="headerlink" title="4. åº•å±‚åŸç†"></a>4. åº•å±‚åŸç†</h2><p>ä¸ºä»€ä¹ˆ docker æ¯” VM è™šæ‹Ÿæœº å¿«ï¼Ÿ</p>
<ol>
<li>docker æœ‰ç€æ¯”è™šæ‹Ÿæœºæ›´å°‘çš„æŠ½è±¡å±‚<ul>
<li>ç”±äº docker ä¸éœ€è¦ Hypervisor (è™šæ‹Ÿæœº) å®ç°ç¡¬ä»¶èµ„æºè™šæ‹ŸåŒ–ï¼Œè¿è¡Œåœ¨ docker å®¹å™¨ä¸Šçš„ç¨‹åº<strong>ç›´æ¥ä½¿ç”¨çš„éƒ½æ˜¯å®é™…ç‰©ç†æœºçš„ç¡¬ä»¶èµ„æº</strong>ã€‚å› æ­¤åœ¨ CPUã€å†…å­˜åˆ©ç”¨ç‡ä¸Š docker å°†ä¼šåœ¨æ•ˆç‡ä¸Šæœ‰æ˜æ˜¾ä¼˜åŠ¿ã€‚</li>
</ul>
</li>
<li>docker åˆ©ç”¨çš„æ˜¯å®¿ä¸»æœºçš„å†…æ ¸ï¼Œè€Œä¸éœ€è¦åŠ è½½æ“ä½œç³»ç»Ÿ OS å†…æ ¸<ul>
<li>å½“æ–°å»ºä¸€ä¸ªå®¹å™¨æ—¶ï¼Œdocker <strong>ä¸éœ€è¦å’Œè™šæ‹Ÿæœºä¸€æ ·é‡æ–°åŠ è½½ä¸€ä¸ªæ“ä½œç³»ç»Ÿå†…æ ¸</strong>ã€‚è¿›è€Œé¿å…å¼•å¯»ã€åŠ è½½æ“ä½œç³»ç»Ÿå†…æ ¸è¿”å›ç­‰æ¯”è¾ƒè´¹æ—¶è´¹èµ„æºçš„è¿‡ç¨‹ï¼Œå½“æ–°å»ºä¸€ä¸ªè™šæ‹Ÿæœºæ—¶ï¼Œè™šæ‹Ÿæœºè½¯ä»¶éœ€è¦åŠ è½½ OS, è¿”å›æ–°å»ºè¿‡ç¨‹æ˜¯åˆ†é’Ÿçº§åˆ«çš„ã€‚è€Œ <strong>docker ç”±äºç›´æ¥åˆ©ç”¨å®¿ä¸»æœºçš„æ“ä½œç³»ç»Ÿ</strong> , åˆ™çœç•¥äº†è¿”å›è¿‡ç¨‹ï¼Œå› æ­¤æ–°å»ºä¸€ä¸ª docker å®¹å™¨åªéœ€è¦å‡ ç§’é’Ÿã€‚</li>
</ul>
</li>
</ol>
<h1 id="äºŒ-Docker-å¸¸ç”¨å‘½ä»¤"><a href="#äºŒ-Docker-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="äºŒ. Docker å¸¸ç”¨å‘½ä»¤"></a>äºŒ. Docker å¸¸ç”¨å‘½ä»¤</h1><h2 id="1-å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤"><a href="#1-å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤" class="headerlink" title="1. å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤"></a>1. å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤</h2><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>systemctl start docker</td>
<td>å¯åŠ¨ docker</td>
</tr>
<tr>
<td>systemctl stop docker</td>
<td>åœæ­¢ docker</td>
</tr>
<tr>
<td>systemctl restart docker</td>
<td>é‡å¯ docker</td>
</tr>
<tr>
<td>systemctl status docker</td>
<td>æŸ¥çœ‹ docker çŠ¶æ€</td>
</tr>
<tr>
<td>systemctl enable docker</td>
<td>å¼€æœºå¯åŠ¨</td>
</tr>
<tr>
<td>docker info</td>
<td>æŸ¥çœ‹ docker æ¦‚è¦ä¿¡æ¯</td>
</tr>
<tr>
<td>docker â€“help</td>
<td>æŸ¥çœ‹ docker æ€»ä½“å¸®åŠ©æ–‡æ¡£</td>
</tr>
<tr>
<td>docker å…·ä½“å‘½ä»¤ â€“help</td>
<td>æŸ¥çœ‹ docker å‘½ä»¤å¸®åŠ©æ–‡æ¡£</td>
</tr>
</tbody></table>
<h2 id="2-é•œåƒå‘½ä»¤"><a href="#2-é•œåƒå‘½ä»¤" class="headerlink" title="2. é•œåƒå‘½ä»¤"></a>2. é•œåƒå‘½ä»¤</h2><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>docker images</td>
<td>åˆ—å‡ºæœ¬åœ°ä¸»æœºä¸Šçš„é•œåƒ</td>
<td><strong>-a</strong> : åˆ—å‡ºæœ¬åœ°æ‰€æœ‰çš„é•œåƒ <strong>-q</strong> : åªæ˜¾ç¤ºé•œåƒ IDã€‚</td>
</tr>
<tr>
<td>docker search XXX</td>
<td>åœ¨ä»“åº“ä¸­æœç´¢æŸä¸ªé•œåƒ</td>
<td><strong>â€“limit</strong> : åªåˆ—å‡º N ä¸ªé•œåƒï¼Œé»˜è®¤ 25 ä¸ª</td>
</tr>
<tr>
<td>docker pull XXX:[tag]</td>
<td>ä¸‹è½½æŸä¸ªé•œåƒ</td>
<td>æ²¡æœ‰ TAG å°±æ˜¯æœ€æ–°ç‰ˆ</td>
</tr>
<tr>
<td>docker system df</td>
<td>æŸ¥çœ‹é•œåƒ &#x2F; å®¹å™¨ &#x2F; æ•°æ®å·æ‰€å çš„ç©ºé—´</td>
<td>æ— </td>
</tr>
<tr>
<td>docker rmi XXX</td>
<td>åˆ é™¤æŸä¸ªé•œåƒ ï¼ˆåå­— &#x2F; IDï¼‰</td>
<td>-f å¼ºåˆ¶åˆ é™¤ ï¼Œ å¯ä»¥ä¸€æ¬¡åˆ é™¤å¤šä¸ª</td>
</tr>
<tr>
<td><strong>docker commit -m&#x3D;â€ æäº¤çš„æè¿°ä¿¡æ¯â€ -a&#x3D;â€ ä½œè€…â€ å®¹å™¨ ID è¦åˆ›å»ºçš„ç›®æ ‡é•œåƒå:[æ ‡ç­¾å]</strong></td>
<td><strong>æäº¤å®¹å™¨å‰¯æœ¬ä½¿ä¹‹æˆä¸ºä¸€ä¸ªæ–°çš„é•œåƒ</strong></td>
<td></td>
</tr>
</tbody></table>
<h2 id="3-å®¹å™¨å‘½ä»¤"><a href="#3-å®¹å™¨å‘½ä»¤" class="headerlink" title="3. å®¹å™¨å‘½ä»¤"></a>3. å®¹å™¨å‘½ä»¤</h2><p><strong>æœ‰é•œåƒæ‰èƒ½åˆ›å»ºå®¹å™¨ï¼Œè¿™æ˜¯æ ¹æœ¬å‰æã€‚</strong></p>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>docker run [OPTIONS] IMAGE [COMMAND] [ARGâ€¦]</strong></td>
<td>æ–°å»º + å¯åŠ¨å®¹å™¨</td>
<td><strong>â€“name&#x3D;â€xxxâ€</strong>: ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°ï¼› <strong>-d</strong>: åå°è¿è¡Œå®¹å™¨å¹¶è¿”å›å®¹å™¨ IDï¼Œä¹Ÿå³å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨ (åå°è¿è¡Œ)ï¼› <strong>-i</strong>ï¼šä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼› <strong>-t</strong>ï¼šä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼› <strong>-P</strong>: éšæœºç«¯å£æ˜ å°„ï¼Œå¤§å†™ P <strong>-p</strong>: æŒ‡å®šç«¯å£æ˜ å°„ï¼Œå°å†™ p</td>
</tr>
<tr>
<td>docker ps [OPTIONS]</td>
<td>åˆ—å‡ºå½“å‰æ‰€æœ‰<strong>æ­£åœ¨è¿è¡Œ</strong>çš„å®¹å™¨</td>
<td><strong>-a</strong> : åˆ—å‡ºå½“å‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ + å†å²ä¸Šè¿è¡Œè¿‡çš„ <strong>-l</strong> : æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„å®¹å™¨ã€‚ <strong>-n</strong>ï¼šæ˜¾ç¤ºæœ€è¿‘ n ä¸ªåˆ›å»ºçš„å®¹å™¨ã€‚ <strong>-q</strong> : é™é»˜æ¨¡å¼ï¼Œåªæ˜¾ç¤ºå®¹å™¨ç¼–å·ã€‚</td>
</tr>
<tr>
<td>exit;ctrl+p+q</td>
<td>é€€å‡ºå®¹å™¨</td>
<td>exit é€€å‡ºï¼Œå®¹å™¨åœæ­¢ï¼›ctrl+p+q é€€å‡ºï¼Œå®¹å™¨ä¸åœæ­¢</td>
</tr>
<tr>
<td>docker start ID&#x2F;name</td>
<td>å¯åŠ¨å·²åœæ­¢è¿è¡Œçš„å®¹å™¨</td>
<td></td>
</tr>
<tr>
<td>docker restart ID&#x2F;name</td>
<td>é‡å¯å®¹å™¨</td>
<td></td>
</tr>
<tr>
<td>docker stop ID&#x2F;name</td>
<td>åœæ­¢å®¹å™¨</td>
<td></td>
</tr>
<tr>
<td>docker kill ID&#x2F;name</td>
<td>å¼ºåˆ¶åœæ­¢å®¹å™¨</td>
<td></td>
</tr>
<tr>
<td>docker rm ID</td>
<td>åˆ é™¤å·²åœæ­¢çš„å®¹å™¨</td>
<td></td>
</tr>
<tr>
<td><strong>docker logs ID</strong></td>
<td><strong>æŸ¥çœ‹å®¹å™¨æ—¥å¿—</strong></td>
<td></td>
</tr>
<tr>
<td><strong>docker top ID</strong></td>
<td><strong>æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹</strong></td>
<td></td>
</tr>
<tr>
<td><strong>docker inspect ID</strong></td>
<td><strong>æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚</strong></td>
<td></td>
</tr>
<tr>
<td><strong>docker exec -it å®¹å™¨ ID bashShell docker attach å®¹å™¨ ID</strong></td>
<td><strong>è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨å¹¶ä»¥å‘½ä»¤è¡Œäº¤äº’</strong></td>
<td><strong>attach ç›´æ¥è¿›å…¥å®¹å™¨å¯åŠ¨å‘½ä»¤çš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹ï¼Œç”¨ exit é€€å‡ºï¼Œä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢ã€‚ exec æ˜¯åœ¨å®¹å™¨ä¸­æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œå¹¶ä¸”å¯ä»¥å¯åŠ¨æ–°çš„è¿›ç¨‹ç”¨ exit é€€å‡ºï¼Œä¸ä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢ã€‚ï¼ˆæ¨èï¼‰</strong></td>
</tr>
<tr>
<td><strong>docker cp å®¹å™¨ ID: å®¹å™¨å†…è·¯å¾„ ç›®çš„ä¸»æœºè·¯å¾„</strong></td>
<td><strong>ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœºä¸Š</strong></td>
<td></td>
</tr>
<tr>
<td><strong>docker export å®¹å™¨ ID &gt; æ–‡ä»¶å.tar</strong></td>
<td><strong>å¯¼å‡ºå®¹å™¨</strong></td>
<td></td>
</tr>
<tr>
<td><strong>cat æ–‡ä»¶å.tar | docker import - é•œåƒç”¨æˆ· &#x2F; é•œåƒåï¼šé•œåƒç‰ˆæœ¬å·</strong></td>
<td><strong>å¯¼å…¥å®¹å™¨</strong></td>
<td></td>
</tr>
</tbody></table>
<h1 id="ä¸‰-Docker-å®¹å™¨æ•°æ®å·"><a href="#ä¸‰-Docker-å®¹å™¨æ•°æ®å·" class="headerlink" title="ä¸‰. Docker å®¹å™¨æ•°æ®å·"></a>ä¸‰. Docker å®¹å™¨æ•°æ®å·</h1><p>ç±»ä¼¼ Redis çš„ rdb å’Œ aof æ–‡ä»¶ï¼Œç±»ä¼¼ Linux è™šæ‹Ÿæœºå’Œ win å®¿ä¸»æœºå…±äº«æ–‡ä»¶å¤¹ã€‚<strong>å°† docker å®¹å™¨å†…çš„æ•°æ®ä¿å­˜è¿›å®¿ä¸»æœºçš„ç£ç›˜ä¸­</strong>ï¼Œ<strong>è¿è¡Œä¸€ä¸ªå¸¦æœ‰å®¹å™¨å·å­˜å‚¨åŠŸèƒ½çš„å®¹å™¨å®ä¾‹</strong>ã€‚</p>
<h2 id="1-å®¿ä¸»å’Œå®¹å™¨é—´æ˜ å°„æ·»åŠ å®¹å™¨å·"><a href="#1-å®¿ä¸»å’Œå®¹å™¨é—´æ˜ å°„æ·»åŠ å®¹å™¨å·" class="headerlink" title="1. å®¿ä¸»å’Œå®¹å™¨é—´æ˜ å°„æ·»åŠ å®¹å™¨å·"></a>1. å®¿ä¸»å’Œå®¹å™¨é—´æ˜ å°„æ·»åŠ å®¹å™¨å·</h2><p>é€šè¿‡å‘½ä»¤ç›´æ¥æŒ‚è½½</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><code class="hljs routeros">docker <span class="hljs-built_in">run</span> -it <span class="hljs-attribute">--privileged</span>=<span class="hljs-literal">true</span> -v /å®¿ä¸»æœºç»å¯¹è·¯å¾„ç›®å½•:/å®¹å™¨å†…ç›®å½•   é•œåƒå<br></code></pre></td></tr></table></figure>

<p>æŸ¥çœ‹æ•°æ®å·æ˜¯å¦æŒ‚è½½æˆåŠŸ</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><code class="hljs gradle">docker <span class="hljs-keyword">inspect</span> å®¹å™¨ID<br></code></pre></td></tr></table></figure>

<p>æ­¤æ—¶åœ¨å®¿ä¸»æœºæˆ–å®¹å™¨çš„å¯¹åº”æŒ‚è½½ç›®å½•ä¸­ä¿®æ”¹æ•°æ®éƒ½æ˜¯åŒæ­¥çš„ã€‚</p>
<h2 id="2-è¯»å†™è§„åˆ™æ˜ å°„æ·»åŠ "><a href="#2-è¯»å†™è§„åˆ™æ˜ å°„æ·»åŠ " class="headerlink" title="2. è¯»å†™è§„åˆ™æ˜ å°„æ·»åŠ "></a>2. è¯»å†™è§„åˆ™æ˜ å°„æ·»åŠ </h2><ul>
<li>è¯»å†™ï¼ˆé»˜è®¤ï¼‰ï¼šre<ul>
<li>docker run -it â€“privileged&#x3D;true -v &#x2F; å®¿ä¸»æœºç»å¯¹è·¯å¾„ç›®å½•:&#x2F; å®¹å™¨å†…ç›®å½• é•œåƒå</li>
</ul>
</li>
<li>åªè¯»ï¼šro<ul>
<li>docker run -it â€“privileged&#x3D;true -v &#x2F; å®¿ä¸»æœºç»å¯¹è·¯å¾„ç›®å½•:&#x2F; å®¹å™¨å†…ç›®å½•:rw é•œåƒå</li>
</ul>
</li>
</ul>
<p>è®¾ç½®äº†åªè¯»ä¹‹åï¼Œåœ¨å®¹å™¨ä¸­å°±æ— æ³•å†™å…¥å†…å®¹äº†ã€‚</p>
<p>æ­¤æ—¶å¦‚æœ<strong>å®¿ä¸»æœºå†™å…¥å†…å®¹ï¼Œå¯ä»¥åŒæ­¥ç»™å®¹å™¨å†…ï¼Œå®¹å™¨å¯ä»¥è¯»å–åˆ°</strong>ã€‚</p>
<h1 id="å››-Docker-å¸¸è§„å®‰è£…ç®€ä»‹"><a href="#å››-Docker-å¸¸è§„å®‰è£…ç®€ä»‹" class="headerlink" title="å››.Docker å¸¸è§„å®‰è£…ç®€ä»‹"></a>å››.Docker å¸¸è§„å®‰è£…ç®€ä»‹</h1><p>æ€»ä½“æ­¥éª¤ï¼š</p>
<ul>
<li>æœç´¢é•œåƒ<ul>
<li>docker seacher xxx</li>
</ul>
</li>
<li>æ‹‰å–é•œåƒ<ul>
<li>docker pull xxx</li>
</ul>
</li>
<li>æŸ¥çœ‹é•œåƒ<ul>
<li>docker images</li>
</ul>
</li>
<li>å¯åŠ¨é•œåƒ<ul>
<li>æœåŠ¡ç«¯å£æ˜ å°„</li>
<li>docker run -it -p xxxx:xxxx xxx</li>
</ul>
</li>
<li>åœæ­¢å®¹å™¨<ul>
<li>docker stop xxx</li>
</ul>
</li>
<li>ç§»é™¤å®¹å™¨<ul>
<li>docker rm xxx(ID)</li>
</ul>
</li>
</ul>
<p>ç›¸å…³çš„åº”ç”¨å®‰è£…å‚è€ƒï¼š</p>
<ul>
<li><a href="https://www.runoob.com/docker/docker-tutorial.html">Docker æ•™ç¨‹ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></li>
<li><a href="https://www.w3cschool.cn/docker/">Docker æ•™ç¨‹_w3cschool</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>Dockerå›½å†…é•œåƒæºé…ç½®</title>
    <url>/2025/01/21/Docker%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%90%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h2 id="é…ç½®é•œåƒ"><a href="#é…ç½®é•œåƒ" class="headerlink" title="é…ç½®é•œåƒ"></a>é…ç½®é•œåƒ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mkdir</span> -p /etc/docker<br><br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class="hljs-string">&#x27;EOF&#x27;</span><br>&#123;<br>    <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<br>        <span class="hljs-string">&quot;https://docker.m.daocloud.io&quot;</span>,<br>        <span class="hljs-string">&quot;https://dockerproxy.com&quot;</span>,<br>        <span class="hljs-string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span>,<br>        <span class="hljs-string">&quot;https://docker.nju.edu.cn&quot;</span><br>    ]<br>&#125;<br>EOF<br><br><span class="hljs-built_in">sudo</span> systemctl daemon-reload<br><br><span class="hljs-built_in">sudo</span> systemctl restart docker<br></code></pre></td></tr></table></figure>

<h3 id="å¦å¤–"><a href="#å¦å¤–" class="headerlink" title="å¦å¤–"></a>å¦å¤–</h3><p>(1)å¦‚æœè¦åˆ é™¤ <code>/etc/docker/daemon.json </code>æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">rm</span> -f /etc/docker/daemon.json<br></code></pre></td></tr></table></figure>

<p>(2)å¦‚æœè¦æ‰‹åŠ¨ç¼–è¾‘ <code>/etc/docker/daemon.json </code>æ–‡ä»¶,å¯ä»¥è¿›è¡Œä»¥ä¸‹æ‰‹åŠ¨ç¼–è¾‘ daemon.json çš„æ­¥éª¤ï¼š</p>
<p>1.ä½¿ç”¨<code>vim</code>ç¼–è¾‘å™¨ç¼–è¾‘ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> vim /etc/docker/daemon.json<br></code></pre></td></tr></table></figure>

<p> 2.ä¿å­˜å¹¶é€€å‡º:</p>
<p>è¾“å…¥Esc+ :wq å¹¶æŒ‰ Enter  (å¼ºåˆ¶ä¿å­˜åˆ™+:wq!)</p>
<p>3.é‡å¯ Docker æœåŠ¡:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl restart docker<br></code></pre></td></tr></table></figure>



<h2 id="æ±‡æ€»å›½å†…å¯ç”¨é•œåƒ"><a href="#æ±‡æ€»å›½å†…å¯ç”¨é•œåƒ" class="headerlink" title="æ±‡æ€»å›½å†…å¯ç”¨é•œåƒ"></a>æ±‡æ€»å›½å†…å¯ç”¨é•œåƒ</h2><h3 id="DaoCloud-é•œåƒç«™"><a href="#DaoCloud-é•œåƒç«™" class="headerlink" title="DaoCloud é•œåƒç«™"></a>DaoCloud é•œåƒç«™</h3><p>åŠ é€Ÿåœ°å€ï¼š<a href="https://link.zhihu.com/?target=https://docker.m.daocloud.io">https://docker.m.daocloud.io</a></p>
<p>æ”¯æŒï¼šDocker Hubã€GCRã€K8Sã€GHCRã€Quayã€NVCR ç­‰</p>
<p>å¯¹å¤–å…è´¹ï¼šæ˜¯</p>
<h3 id="ç½‘æ˜“äº‘"><a href="#ç½‘æ˜“äº‘" class="headerlink" title="ç½‘æ˜“äº‘"></a>ç½‘æ˜“äº‘</h3><p>åŠ é€Ÿåœ°å€ï¼š<a href="https://link.zhihu.com/?target=https://hub-mirror.c.163.com">https://hub-mirror.c.163.com</a></p>
<p>æ”¯æŒï¼šDocker Hub</p>
<p>å¯¹å¤–å…è´¹ï¼šæ˜¯</p>
<h3 id="Docker-é•œåƒä»£ç†"><a href="#Docker-é•œåƒä»£ç†" class="headerlink" title="Docker é•œåƒä»£ç†"></a>Docker é•œåƒä»£ç†</h3><p>åŠ é€Ÿåœ°å€ï¼š<a href="https://link.zhihu.com/?target=https://dockerproxy.com">https://dockerproxy.com</a></p>
<p>æ”¯æŒï¼šDocker Hubã€GCRã€K8Sã€GHCR</p>
<p>å¯¹å¤–å…è´¹ï¼šæ˜¯</p>
<h3 id="ç™¾åº¦äº‘"><a href="#ç™¾åº¦äº‘" class="headerlink" title="ç™¾åº¦äº‘"></a>ç™¾åº¦äº‘</h3><p>åŠ é€Ÿåœ°å€ï¼š<a href="https://link.zhihu.com/?target=https://mirror.baidubce.com">https://mirror.baidubce.com</a></p>
<p>æ”¯æŒï¼šDocker Hub</p>
<p>å¯¹å¤–å…è´¹ï¼šæ˜¯</p>
<h3 id="å—äº¬å¤§å­¦é•œåƒç«™"><a href="#å—äº¬å¤§å­¦é•œåƒç«™" class="headerlink" title="å—äº¬å¤§å­¦é•œåƒç«™"></a>å—äº¬å¤§å­¦é•œåƒç«™</h3><p>åŠ é€Ÿåœ°å€ï¼š<a href="https://link.zhihu.com/?target=https://docker.nju.edu.cn">https://docker.nju.edu.cn</a></p>
<p>æ”¯æŒï¼šDocker Hubã€GCRã€GHCRã€Quayã€NVCR ç­‰</p>
<p>å¯¹å¤–å…è´¹ï¼šæ˜¯</p>
<h3 id="ä¸Šæµ·äº¤å¤§é•œåƒç«™"><a href="#ä¸Šæµ·äº¤å¤§é•œåƒç«™" class="headerlink" title="ä¸Šæµ·äº¤å¤§é•œåƒç«™"></a>ä¸Šæµ·äº¤å¤§é•œåƒç«™</h3><p>åŠ é€Ÿåœ°å€ï¼š<a href="https://link.zhihu.com/?target=https://docker.mirrors.sjtug.sjtu.edu.cn/">https://docker.mirrors.sjtug.sjtu.edu.cn/</a></p>
<p>æ”¯æŒï¼šDocker Hubã€GCR ç­‰</p>
<p>é™åˆ¶ï¼šæ— </p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
  </entry>
  <entry>
    <title>Java8æ–°ç‰¹æ€§</title>
    <url>/2024/03/20/Java-Java8%E6%96%B0%E7%89%B9%E6%80%A7/</url>
    <content><![CDATA[<h2 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h2><h3 id="ä»£ç†è®¾è®¡æ¨¡å¼çš„åŸç†"><a href="#ä»£ç†è®¾è®¡æ¨¡å¼çš„åŸç†" class="headerlink" title="ä»£ç†è®¾è®¡æ¨¡å¼çš„åŸç†"></a>ä»£ç†è®¾è®¡æ¨¡å¼çš„åŸç†</h3><p>ä½¿ç”¨ä¸€ä¸ªä»£ç†å°†å¯¹è±¡åŒ…è£…èµ·æ¥ï¼Œç„¶åç”¨è¯¥ä»£ç†å¯¹è±¡å–ä»£åŸå§‹å¯¹è±¡ã€‚ä»»ä½•å¯¹åŸå§‹å¯¹è±¡çš„è°ƒç”¨éƒ½è¦é€šè¿‡ä»£ç†ã€‚ä»£ç†å¯¹è±¡å†³å®šæ˜¯å¦ä»¥åŠä½•æ—¶å°†æ–¹æ³•è°ƒç”¨è½¬åˆ°åŸå§‹å¯¹è±¡ä¸Šã€‚</p>
<h3 id="é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†"><a href="#é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†" class="headerlink" title="é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†"></a>é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†</h3><ul>
<li><strong>é™æ€ä»£ç†</strong>ï¼šä»£ç†ç±»å’Œç›®æ ‡å¯¹è±¡çš„ç±»åœ¨ç¼–è¯‘æœŸé—´ç¡®å®šï¼Œä¸åˆ©äºç¨‹åºæ‰©å±•ï¼Œä¸”æ¯ä¸ªä»£ç†ç±»åªèƒ½ä¸ºä¸€ä¸ªæ¥å£æœåŠ¡ã€‚</li>
<li><strong>åŠ¨æ€ä»£ç†</strong>ï¼šåœ¨ç¨‹åºè¿è¡Œæ—¶æ ¹æ®éœ€è¦åŠ¨æ€åˆ›å»ºç›®æ ‡ç±»çš„ä»£ç†å¯¹è±¡ï¼Œæ›´åŠ çµæ´»å’Œç»Ÿä¸€ã€‚</li>
</ul>
<h3 id="åŠ¨æ€ä»£ç†çš„ä¼˜ç‚¹"><a href="#åŠ¨æ€ä»£ç†çš„ä¼˜ç‚¹" class="headerlink" title="åŠ¨æ€ä»£ç†çš„ä¼˜ç‚¹"></a>åŠ¨æ€ä»£ç†çš„ä¼˜ç‚¹</h3><p>åŠ¨æ€ä»£ç†ç›¸æ¯”é™æ€ä»£ç†ï¼Œå°†æŠ½è±¡è§’è‰²ä¸­å£°æ˜çš„æ‰€æœ‰æ–¹æ³•è½¬ç§»åˆ°è°ƒç”¨å¤„ç†å™¨çš„ä¸€ä¸ªé›†ä¸­æ–¹æ³•ä¸­å¤„ç†ï¼Œå¯ä»¥æ›´çµæ´»å’Œç»Ÿä¸€åœ°å¤„ç†ä¼—å¤šæ–¹æ³•ã€‚</p>
<h3 id="æ¼”ç¤ºé™æ€ä»£ç†ï¼ˆJavaä»£ç ï¼‰"><a href="#æ¼”ç¤ºé™æ€ä»£ç†ï¼ˆJavaä»£ç ï¼‰" class="headerlink" title="æ¼”ç¤ºé™æ€ä»£ç†ï¼ˆJavaä»£ç ï¼‰"></a>æ¼”ç¤ºé™æ€ä»£ç†ï¼ˆJavaä»£ç ï¼‰</h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ¼”ç¤ºé™æ€ä»£ç†</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ClothFactory</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">produceCloth</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// ä»£ç†ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyCloth</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ClothFactory</span> &#123;<br>    <span class="hljs-keyword">private</span> ClothFactory clothFactory; <span class="hljs-comment">// ç”¨è¢«ä»£ç†ç±»å¯¹è±¡è¿›è¡Œå®ä¾‹åŒ–</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ProxyCloth</span><span class="hljs-params">(ClothFactory clothFactory)</span> &#123;<br>        <span class="hljs-built_in">this</span>.clothFactory = clothFactory;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">produceCloth</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ä»£ç†å·¥å‚åšä¸€äº›å‡†å¤‡å·¥ä½œ...&quot;</span>);<br>        clothFactory.produceCloth();<br>        System.out.println(<span class="hljs-string">&quot;ä»£ç†å·¥å‚åšä¸€äº›æ”¶å°¾å·¥ä½œ...&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// è¢«ä»£ç†ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NikeClothFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ClothFactory</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">produceCloth</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;nikeå·¥å‚æ­£åœ¨ç”Ÿäº§ä¸€æ‰¹è¡£æœ.....&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticProxy</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºè¢«ä»£ç†ç±»å¯¹è±¡</span><br>        <span class="hljs-type">ClothFactory</span> <span class="hljs-variable">nikeClothFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NikeClothFactory</span>();<br>        <span class="hljs-comment">// ä»£ç†ç±»å¯¹è±¡</span><br>        <span class="hljs-type">ClothFactory</span> <span class="hljs-variable">proxyCloth</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProxyCloth</span>(nikeClothFactory);<br>        proxyCloth.produceCloth();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="æ¼”ç¤ºåŠ¨æ€ä»£ç†ï¼ˆJavaä»£ç ï¼‰"><a href="#æ¼”ç¤ºåŠ¨æ€ä»£ç†ï¼ˆJavaä»£ç ï¼‰" class="headerlink" title="æ¼”ç¤ºåŠ¨æ€ä»£ç†ï¼ˆJavaä»£ç ï¼‰"></a>æ¼”ç¤ºåŠ¨æ€ä»£ç†ï¼ˆJavaä»£ç ï¼‰</h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.lang.reflect.InvocationHandler;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">import</span> java.lang.reflect.Proxy;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Human</span> &#123;<br>    String <span class="hljs-title function_">getBelief</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">(String food)</span>;<br>&#125;<br><br><span class="hljs-comment">// è¢«ä»£ç†ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SuperMan</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Human</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getBelief</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;I am superMan!&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">(String food)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æˆ‘å–œæ¬¢åƒ&quot;</span> + food);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªä»£ç†ç±»å·¥å‚ï¼ŒåŠ¨æ€åœ°åˆ›å»ºä»£ç†ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyFactory</span> &#123;<br>    <span class="hljs-comment">// è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¯ä»¥åˆ›å»ºä»£ç†ç±»å¯¹è±¡</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">getProxyInstance</span><span class="hljs-params">(Object obj)</span> &#123; <span class="hljs-comment">// obj å°±æ˜¯è¢«ä»£ç†ç±»å¯¹è±¡</span><br>        <span class="hljs-type">MyInvocationHandler</span> <span class="hljs-variable">myInvocationHandler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyInvocationHandler</span>(obj);<br>        <span class="hljs-keyword">return</span> Proxy.newProxyInstance(obj.getClass().getClassLoader(), obj.getClass().getInterfaces(), myInvocationHandler);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyInvocationHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InvocationHandler</span> &#123;<br>    <span class="hljs-keyword">private</span> Object obj; <span class="hljs-comment">// åˆ›å»ºè¢«ä»£ç†ç±»å¯¹è±¡</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyInvocationHandler</span><span class="hljs-params">(Object obj)</span> &#123; <span class="hljs-comment">// ä½¿ç”¨æ„é€ å‡½æ•°ä¸º è¢«ä»£ç†ç±»å¯¹è±¡èµ‹å€¼</span><br>        <span class="hljs-built_in">this</span>.obj = obj;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable &#123;<br>        <span class="hljs-comment">// method å³ä¸ºä»£ç†ç±»å¯¹è±¡è¦è°ƒç”¨çš„æ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¹Ÿä½œä¸ºäº†è¢«ä»£ç†ç±»å¯¹è±¡è¦è°ƒç”¨çš„æ–¹æ³•</span><br>        <span class="hljs-comment">// objå°±æ˜¯è¢«ä»£ç†çš„å¯¹è±¡</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">returnValue</span> <span class="hljs-operator">=</span> method.invoke(obj, args);<br>        <span class="hljs-comment">// ä¸Šè¿°æ–¹æ³•çš„è¿”å›å€¼å°±ä½œä¸ºå½“å‰ç±»ä¸­çš„invokeï¼ˆï¼‰æ–¹æ³•çš„è¿”å›å€¼</span><br>        <span class="hljs-keyword">return</span> returnValue;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyTest</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">SuperMan</span> <span class="hljs-variable">superMan</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SuperMan</span>();<br>        <span class="hljs-comment">// åŠ¨æ€çš„åˆ›å»ºä»£ç†ç±»å¯¹è±¡</span><br>        <span class="hljs-type">Human</span> <span class="hljs-variable">proxyInstance</span> <span class="hljs-operator">=</span> (Human) ProxyFactory.getProxyInstance(superMan);<br>        <span class="hljs-comment">// é€šè¿‡ä»£ç†ç±»å¯¹è±¡è°ƒç”¨è¢«ä»£ç†ç±»çš„æ–¹æ³•</span><br>        System.out.println(proxyInstance.getBelief());<br>        proxyInstance.eat(<span class="hljs-string">&quot;è‰è“ä»™è‰å†»&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æ€ä»£ç†ä¸AOP"><a href="#åŠ¨æ€ä»£ç†ä¸AOP" class="headerlink" title="åŠ¨æ€ä»£ç†ä¸AOP"></a>åŠ¨æ€ä»£ç†ä¸AOP</h3><p>åŠ¨æ€ä»£ç†æ˜¯å®ç°AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼Œé€šè¿‡åŠ¨æ€ä»£ç†å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸå§‹ä»£ç çš„æƒ…å†µä¸‹ï¼Œä¸ºå¯¹è±¡æ·»åŠ é¢å¤–çš„åŠŸèƒ½ã€‚</p>
<hr>
<h2 id="Java-8æ–°ç‰¹æ€§"><a href="#Java-8æ–°ç‰¹æ€§" class="headerlink" title="Java 8æ–°ç‰¹æ€§"></a>Java 8æ–°ç‰¹æ€§</h2><h3 id="Java-8æ–°ç‰¹æ€§æ¦‚è¿°"><a href="#Java-8æ–°ç‰¹æ€§æ¦‚è¿°" class="headerlink" title="Java 8æ–°ç‰¹æ€§æ¦‚è¿°"></a>Java 8æ–°ç‰¹æ€§æ¦‚è¿°</h3><ul>
<li><strong>é€Ÿåº¦æ›´å¿«</strong>ï¼šæ€§èƒ½æå‡ã€‚</li>
<li><strong>ä»£ç æ›´å°‘</strong>ï¼šå¢åŠ äº†æ–°çš„è¯­æ³•ï¼Œå¦‚Lambdaè¡¨è¾¾å¼ã€‚</li>
<li><strong>å¼ºå¤§çš„Stream API</strong>ï¼šä¾¿äºæ•°æ®å¤„ç†ã€‚</li>
<li><strong>ä¾¿äºå¹¶è¡Œ</strong>ï¼šæ”¯æŒå¹¶è¡Œæ“ä½œã€‚</li>
<li><strong>æœ€å¤§åŒ–å‡å°‘ç©ºæŒ‡é’ˆå¼‚å¸¸</strong>ï¼šå¼•å…¥Optionalç±»ã€‚</li>
<li><strong>Nashornå¼•æ“</strong>ï¼šå…è®¸åœ¨JVMä¸Šè¿è¡ŒJSåº”ç”¨ã€‚</li>
</ul>
<h3 id="Lambdaè¡¨è¾¾å¼"><a href="#Lambdaè¡¨è¾¾å¼" class="headerlink" title="Lambdaè¡¨è¾¾å¼"></a>Lambdaè¡¨è¾¾å¼</h3><h4 id="ä»€ä¹ˆæ˜¯Lambdaè¡¨è¾¾å¼"><a href="#ä»€ä¹ˆæ˜¯Lambdaè¡¨è¾¾å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯Lambdaè¡¨è¾¾å¼"></a>ä»€ä¹ˆæ˜¯Lambdaè¡¨è¾¾å¼</h4><p>Lambdaæ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå¯ä»¥å°†ä»£ç åƒæ•°æ®ä¸€æ ·ä¼ é€’ï¼Œä½¿Javaçš„è¡¨è¾¾èƒ½åŠ›æ›´å¼ºã€‚</p>
<h4 id="Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨"><a href="#Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨" class="headerlink" title="Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨"></a>Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨</h4><ul>
<li>æ ¼å¼ï¼š<code>(o1, o2) -&gt; Integer.compare(o1, o2);</code></li>
<li><code>-&gt;</code>å·¦è¾¹ï¼šLambdaå½¢å‚åˆ—è¡¨ï¼ˆæ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•çš„å½¢å‚åˆ—è¡¨ï¼‰ã€‚</li>
<li><code>-&gt;</code>å³è¾¹ï¼šLambdaä½“ï¼ˆé‡å†™çš„æŠ½è±¡æ–¹æ³•çš„æ–¹æ³•ä½“ï¼‰ã€‚</li>
</ul>
<h4 id="Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨ç¤ºä¾‹"><a href="#Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨ç¤ºä¾‹"></a>Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨ç¤ºä¾‹</h4><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è¯­æ³•æ ¼å¼ä¸€ï¼šæ— å‚æ— è¿”å›å€¼</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">Runnable</span> <span class="hljs-variable">runnable</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;æˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨&quot;</span>);<br>        &#125;<br>    &#125;;<br>    runnable.run();<br>    System.out.println(<span class="hljs-string">&quot;---------------------------&quot;</span>);<br><br>    <span class="hljs-comment">// Lambdaè¡¨è¾¾å¼å†™æ³•</span><br>    <span class="hljs-type">Runnable</span> <span class="hljs-variable">r2</span> <span class="hljs-operator">=</span> () -&gt; &#123;<br>        System.out.println(<span class="hljs-string">&quot;æˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨.&quot;</span>);<br>    &#125;;<br>    r2.run();<br>&#125;<br><br><span class="hljs-comment">// è¯­æ³•æ ¼å¼äºŒï¼šLambdaéœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œä½†æ²¡æœ‰è¿”å›å€¼</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> &#123;<br>    Consumer&lt;String&gt; con = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Consumer</span>&lt;String&gt;() &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(String s)</span> &#123;<br>            System.out.println(s);<br>        &#125;<br>    &#125;;<br>    con.accept(<span class="hljs-string">&quot;è°è¨€å’Œèª“è¨€çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;-------------------------&quot;</span>);<br>    <span class="hljs-comment">// Lambdaè¡¨è¾¾å¼å†™æ³•</span><br>    Consumer&lt;String&gt; con2 = (String s) -&gt; &#123;<br>        System.out.println(s);<br>    &#125;;<br>    con2.accept(<span class="hljs-string">&quot;ä¸€ä¸ªæ˜¯å¬çš„äººä¿¡äº†ï¼Œä¸€ä¸ªæ˜¯è¯´çš„äººä¿¡äº†&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// è¯­æ³•æ ¼å¼ä¸‰ï¼šæ•°æ®ç±»å‹å¯ä»¥çœç•¥ï¼Œå› ä¸ºå¯ä»¥ç”±ç¼–è¯‘å™¨æ¨æ–­å¾—å‡ºï¼Œæˆä¸ºâ€œç±»å‹æ¨æ–­â€</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span> &#123;<br>    Consumer&lt;String&gt; con1 = (String s) -&gt; &#123;<br>        System.out.println(s);<br>    &#125;;<br>    con1.accept(<span class="hljs-string">&quot;ä¸€ä¸ªæ˜¯å¬çš„äººä¿¡äº†ï¼Œä¸€ä¸ªæ˜¯è¯´çš„äººä¿¡äº†&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>    <span class="hljs-comment">// çœç•¥ç±»å‹</span><br>    Consumer&lt;String&gt; con2 = (s) -&gt; &#123;<br>        System.out.println(s);<br>    &#125;;<br>    con2.accept(<span class="hljs-string">&quot;ä¸€ä¸ªæ˜¯å¬çš„äººä¿¡äº†ï¼Œä¸€ä¸ªæ˜¯è¯´çš„äººä¿¡äº†&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// è¯­æ³•æ ¼å¼å››ï¼šLambdaè‹¥åªéœ€è¦ä¸€ä¸ªå‚æ•°æ—¶ï¼Œå‚æ•°çš„å°æ‹¬å·å¯ä»¥çœç•¥</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// çœç•¥å°æ‹¬å·</span><br>    Consumer&lt;String&gt; con2 = s -&gt; &#123;<br>        System.out.println(s);<br>    &#125;;<br>    con2.accept(<span class="hljs-string">&quot;ä¸€ä¸ªæ˜¯å¬çš„äººä¿¡äº†ï¼Œä¸€ä¸ªæ˜¯è¯´çš„äººä¿¡äº†&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// è¯­æ³•æ ¼å¼äº”ï¼šLambdaéœ€è¦ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„å‚æ•°ï¼Œå¤šæ¡æ‰§è¡Œè¯­å¥ï¼Œå¹¶ä¸”å¯ä»¥æœ‰è¿”å›å€¼</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test5</span><span class="hljs-params">()</span> &#123;<br>    Comparator&lt;Integer&gt; com = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>&lt;Integer&gt;() &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Integer o1, Integer o2)</span> &#123;<br>            System.out.println(o1);<br>            System.out.println(o2);<br>            <span class="hljs-keyword">return</span> o1.compareTo(o2);<br>        &#125;<br>    &#125;;<br>    System.out.println(com.compare(<span class="hljs-number">12</span>, <span class="hljs-number">21</span>));<br>    System.out.println(<span class="hljs-string">&quot;--------------------------&quot;</span>);<br>    <span class="hljs-comment">// Lambdaå†™æ³•</span><br>    Comparator&lt;Integer&gt; com2 = (o1, o2) -&gt; &#123;<br>        System.out.println(o1);<br>        System.out.println(o2);<br>        <span class="hljs-keyword">return</span> o1.compareTo(o2);<br>    &#125;;<br>    System.out.println(com2.compare(<span class="hljs-number">12</span>, <span class="hljs-number">6</span>));<br>&#125;<br><br><span class="hljs-comment">// è¯­æ³•æ ¼å¼å…­ï¼šå½“Lambdaä½“åªæœ‰ä¸€æ¡è¯­å¥æ—¶ï¼Œè‹¥æœ‰returnå’Œå¤§æ‹¬å·ï¼Œå¯ä»¥è€ƒè™‘çœç•¥</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test6</span><span class="hljs-params">()</span> &#123;<br>    Comparator&lt;Integer&gt; com = (o1, o2) -&gt; o1.compareTo(o2);<br>    System.out.println(com.compare(<span class="hljs-number">12</span>, <span class="hljs-number">21</span>));<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="å‡½æ•°å¼æ¥å£"><a href="#å‡½æ•°å¼æ¥å£" class="headerlink" title="å‡½æ•°å¼æ¥å£"></a>å‡½æ•°å¼æ¥å£</h3><h4 id="ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£"><a href="#ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£" class="headerlink" title="ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£"></a>ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£</h4><p>åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œå°±æ˜¯å‡½æ•°å¼æ¥å£ã€‚å¯ä»¥åœ¨æ¥å£ä¸Šä½¿ç”¨<code>@FunctionalInterface</code>æ³¨è§£æ¥æ£€æŸ¥å®ƒæ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚</p>
<h4 id="Javaå†…ç½®å››å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£"><a href="#Javaå†…ç½®å››å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£" class="headerlink" title="Javaå†…ç½®å››å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£"></a>Javaå†…ç½®å››å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£</h4><ul>
<li><strong>æ¶ˆè´¹å‹æ¥å£</strong>ï¼š<code>Consumer&lt;T&gt;</code>ï¼Œ<code>void accept(T t)</code></li>
<li><strong>ä¾›ç»™å‹æ¥å£</strong>ï¼š<code>Supplier&lt;T&gt;</code>ï¼Œ<code>T get()</code></li>
<li><strong>å‡½æ•°å‹æ¥å£</strong>ï¼š<code>Function&lt;T,R&gt;</code>ï¼Œ<code>R apply(T t)</code></li>
<li><strong>æ–­å®šå‹æ¥å£</strong>ï¼š<code>Predicate&lt;T&gt;</code>ï¼Œ<code>boolean test(T t)</code></li>
</ul>
<h4 id="ä½¿ç”¨æ¡ˆä¾‹"><a href="#ä½¿ç”¨æ¡ˆä¾‹" class="headerlink" title="ä½¿ç”¨æ¡ˆä¾‹"></a>ä½¿ç”¨æ¡ˆä¾‹</h4><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CentralFunctionalInterfaces</span> &#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> &#123;<br>        happyTime(<span class="hljs-number">500.0</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Consumer</span>&lt;Double&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Double aDouble)</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;åœ¨å¤©å®ˆé˜æ¶ˆè´¹&quot;</span> + aDouble);<br>            &#125;<br>        &#125;);<br>        System.out.println(<span class="hljs-string">&quot;========================&quot;</span>);<br>        <span class="hljs-comment">// Lambdaå†™æ³•</span><br>        happyTime(<span class="hljs-number">400.0</span>, money -&gt; System.out.println(<span class="hljs-string">&quot;åœ¨æœ›èˆ’å®¢æ ˆæ¶ˆè´¹&quot;</span> + money));<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">happyTime</span><span class="hljs-params">(Double money, Consumer&lt;Double&gt; con)</span> &#123;<br>        con.accept(money);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> &#123;<br>        List&lt;String&gt; list = Arrays.asList(<span class="hljs-string">&quot;åŒ—äº¬&quot;</span>, <span class="hljs-string">&quot;å—äº¬&quot;</span>, <span class="hljs-string">&quot;ä¸œäº¬&quot;</span>, <span class="hljs-string">&quot;å¤©æ´¥&quot;</span>, <span class="hljs-string">&quot;è¥¿äº¬&quot;</span>);<br>        List&lt;String&gt; filterString = filterString(list, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Predicate</span>&lt;String&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">test</span><span class="hljs-params">(String s)</span> &#123;<br>                <span class="hljs-keyword">return</span> s.contains(<span class="hljs-string">&quot;äº¬&quot;</span>);<br>            &#125;<br>        &#125;);<br>        System.out.println(filterString);<br>        System.out.println(<span class="hljs-string">&quot;====================&quot;</span>);<br>        <span class="hljs-comment">// Lambdaæ–¹æ³•</span><br>        List&lt;String&gt; list1 = filterString(list, s -&gt; s.contains(<span class="hljs-string">&quot;äº¬&quot;</span>));<br>        System.out.println(list1);<br>    &#125;<br><br>    <span class="hljs-comment">// æ ¹æ®ç»™å®šçš„è§„åˆ™ï¼Œè¿‡æ»¤é›†åˆä¸­çš„å­—ç¬¦ä¸²ï¼Œæ­¤è§„åˆ™ç”±Predicateçš„æ–¹æ³•å†³å®š</span><br>    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">filterString</span><span class="hljs-params">(List&lt;String&gt; list, Predicate&lt;String&gt; pre)</span> &#123;<br>        ArrayList&lt;String&gt; filterList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (String s : list) &#123;<br>            <span class="hljs-keyword">if</span> (pre.test(s))<br>                filterList.add(s);<br>        &#125;<br>        <span class="hljs-keyword">return</span> filterList;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="æ–¹æ³•å¼•ç”¨ä¸æ„é€ å™¨å¼•ç”¨"><a href="#æ–¹æ³•å¼•ç”¨ä¸æ„é€ å™¨å¼•ç”¨" class="headerlink" title="æ–¹æ³•å¼•ç”¨ä¸æ„é€ å™¨å¼•ç”¨"></a>æ–¹æ³•å¼•ç”¨ä¸æ„é€ å™¨å¼•ç”¨</h3><h4 id="æ–¹æ³•å¼•ç”¨åŸºæœ¬ä»‹ç»"><a href="#æ–¹æ³•å¼•ç”¨åŸºæœ¬ä»‹ç»" class="headerlink" title="æ–¹æ³•å¼•ç”¨åŸºæœ¬ä»‹ç»"></a>æ–¹æ³•å¼•ç”¨åŸºæœ¬ä»‹ç»</h4><p>å½“è¦ä¼ é€’ç»™Lambdaä½“çš„æ“ä½œå·²ç»æœ‰å®ç°çš„æ–¹æ³•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨ã€‚æ–¹æ³•å¼•ç”¨æ˜¯Lambdaè¡¨è¾¾å¼çš„ä¸€ç§è¯­æ³•ç³–ã€‚</p>
<h4 id="æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨"><a href="#æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨" class="headerlink" title="æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨"></a>æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨</h4><ul>
<li>æ ¼å¼ï¼š<code>ç±»ï¼ˆæˆ–å¯¹è±¡ï¼‰::æ–¹æ³•å</code></li>
<li>åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š<ol>
<li><strong>å¯¹è±¡::å®ä¾‹æ–¹æ³•å</strong></li>
<li><strong>ç±»::é™æ€æ–¹æ³•å</strong></li>
<li><strong>ç±»::å®ä¾‹æ–¹æ³•å</strong></li>
</ol>
</li>
</ul>
<h4 id="æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨ç¤ºä¾‹"><a href="#æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨ç¤ºä¾‹"></a>æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨ç¤ºä¾‹</h4><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æƒ…å†µä¸€ï¼šå¯¹è±¡::å®ä¾‹æ–¹æ³•</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> &#123;<br>    Consumer&lt;String&gt; con = s -&gt; System.out.println(s);<br>    con.accept(<span class="hljs-string">&quot;åŒ—äº¬&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;********************&quot;</span>);<br>    <span class="hljs-comment">// æ–¹æ³•å¼•ç”¨</span><br>    <span class="hljs-type">PrintStream</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> System.out;<br>    Consumer&lt;String&gt; con2 = ps::println;<br>    con.accept(<span class="hljs-string">&quot;ä¸Šæµ·&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// æƒ…å†µäºŒï¼šç±»::é™æ€æ–¹æ³•</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span> &#123;<br>    Comparator&lt;Integer&gt; com1 = (t1, t2) -&gt; Integer.compare(t1, t2);<br>    System.out.println(com1.compare(<span class="hljs-number">12</span>, <span class="hljs-number">21</span>));<br>    System.out.println(<span class="hljs-string">&quot;-----------åˆ†å‰²çº¿------------&quot;</span>);<br>    <span class="hljs-comment">// æ–¹æ³•å¼•ç”¨</span><br>    Comparator&lt;Integer&gt; com2 = Integer::compare;<br>    System.out.println(com2.compare(<span class="hljs-number">12</span>, <span class="hljs-number">1</span>));<br>&#125;<br><br><span class="hljs-comment">// æƒ…å†µä¸‰ï¼šç±»::å®ä¾‹æ–¹æ³•</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test5</span><span class="hljs-params">()</span> &#123;<br>    Comparator&lt;String&gt; com1 = (s1, s2) -&gt; s1.compareTo(s2);<br>    System.out.println(com1.compare(<span class="hljs-string">&quot;abc&quot;</span>, <span class="hljs-string">&quot;abd&quot;</span>));<br>    <span class="hljs-comment">// æ–¹æ³•å¼•ç”¨</span><br>    System.out.println(<span class="hljs-string">&quot;-----------åˆ†å‰²çº¿------------&quot;</span>);<br>    Comparator&lt;String&gt; com2 = String::compareTo;<br>    System.out.println(com2.compare(<span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;a&quot;</span>));<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="æ„é€ å™¨å¼•ç”¨"><a href="#æ„é€ å™¨å¼•ç”¨" class="headerlink" title="æ„é€ å™¨å¼•ç”¨"></a>æ„é€ å™¨å¼•ç”¨</h4><p>æ„é€ å™¨å¼•ç”¨ä¸æ–¹æ³•å¼•ç”¨ç±»ä¼¼ï¼Œå‡½æ•°å¼æ¥å£çš„æŠ½è±¡æ–¹æ³•çš„å½¢å‚åˆ—è¡¨å’Œæ„é€ å™¨çš„å½¢å‚åˆ—è¡¨ä¸€è‡´ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ„é€ å™¨å¼•ç”¨</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> &#123;<br>    Supplier&lt;Employee&gt; supplier1 = () -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>();<br>    System.out.println(supplier1.get());<br>    System.out.println(<span class="hljs-string">&quot;---------------------&quot;</span>);<br>    <span class="hljs-comment">// æ¼”ç¤ºä½¿ç”¨æ„é€ å™¨å¼•ç”¨</span><br>    Supplier&lt;Employee&gt; supplier2 = Employee::<span class="hljs-keyword">new</span>;<br>    System.out.println(supplier2.get());<br>&#125;<br><br><span class="hljs-comment">// æ•°ç»„å¼•ç”¨</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span> &#123;<br>    Function&lt;Integer, String[]&gt; function = length -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[length];<br>    String[] arr1 = function.apply(<span class="hljs-number">5</span>);<br>    System.out.println(Arrays.toString(arr1));<br>    System.out.println(<span class="hljs-string">&quot;==========================&quot;</span>);<br>    Function&lt;Integer, String[]&gt; fun2 = String[]::<span class="hljs-keyword">new</span>;<br>    System.out.println(Arrays.toString(fun2.apply(<span class="hljs-number">8</span>)));<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="å¼ºå¤§çš„Stream-API"><a href="#å¼ºå¤§çš„Stream-API" class="headerlink" title="å¼ºå¤§çš„Stream API"></a>å¼ºå¤§çš„Stream API</h3><h4 id="ä»€ä¹ˆæ˜¯Stream"><a href="#ä»€ä¹ˆæ˜¯Stream" class="headerlink" title="ä»€ä¹ˆæ˜¯Stream"></a>ä»€ä¹ˆæ˜¯Stream</h4><p>Streamæ˜¯Java 8ä¸­å¤„ç†é›†åˆçš„å…³é”®æŠ½è±¡æ¦‚å¿µï¼Œç”¨äºæ“ä½œæ•°æ®æºï¼ˆé›†åˆã€æ•°ç»„ç­‰ï¼‰æ‰€ç”Ÿæˆçš„å…ƒç´ åºåˆ—ã€‚</p>
<h4 id="Streamæ“ä½œçš„ä¸‰ä¸ªæ­¥éª¤"><a href="#Streamæ“ä½œçš„ä¸‰ä¸ªæ­¥éª¤" class="headerlink" title="Streamæ“ä½œçš„ä¸‰ä¸ªæ­¥éª¤"></a>Streamæ“ä½œçš„ä¸‰ä¸ªæ­¥éª¤</h4><ol>
<li><strong>åˆ›å»ºStream</strong>ï¼šé€šè¿‡é›†åˆã€æ•°ç»„ç­‰æ–¹å¼è·å–ä¸€ä¸ªæµã€‚</li>
<li><strong>ä¸­é—´æ“ä½œ</strong>ï¼šå¯¹æ•°æ®æºçš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå¤šä¸ªä¸­é—´æ“ä½œå¯ä»¥è¿æ¥èµ·æ¥å½¢æˆæµæ°´çº¿ã€‚</li>
<li><strong>ç»ˆæ­¢æ“ä½œ</strong>ï¼šæ‰§è¡Œä¸­é—´æ“ä½œé“¾ï¼Œå¹¶äº§ç”Ÿç»“æœã€‚</li>
</ol>
<h4 id="åˆ›å»ºStreamæ•°æ®æº"><a href="#åˆ›å»ºStreamæ•°æ®æº" class="headerlink" title="åˆ›å»ºStreamæ•°æ®æº"></a>åˆ›å»ºStreamæ•°æ®æº</h4><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ›å»ºStreamæ–¹å¼ä¸€ï¼šé€šè¿‡é›†åˆ</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> &#123;<br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>    Stream&lt;Employee&gt; stream = employees.stream();<br>    Stream&lt;Employee&gt; parallelStream = employees.parallelStream();<br>&#125;<br><br><span class="hljs-comment">// åˆ›å»ºStreamæ–¹å¼äºŒï¼šé€šè¿‡æ•°ç»„</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span>[] arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]&#123;<span class="hljs-number">10</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">78</span>&#125;;<br>    <span class="hljs-type">IntStream</span> <span class="hljs-variable">intStream</span> <span class="hljs-operator">=</span> Arrays.stream(arr);<br>    Employee[] employees = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>[]&#123;<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1001</span>, <span class="hljs-string">&quot;Tom&quot;</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1002</span>, <span class="hljs-string">&quot;Jerry&quot;</span>)&#125;;<br>    Stream&lt;Employee&gt; stream = Arrays.stream(employees);<br>&#125;<br><br><span class="hljs-comment">// åˆ›å»ºStreamæ–¹å¼ä¸‰ï¼šé€šè¿‡Streamçš„of()</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span> &#123;<br>    Stream&lt;Integer&gt; stream = Stream.of(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>);<br>&#125;<br><br><span class="hljs-comment">// åˆ›å»ºStreamæ–¹å¼å››ï¼šåˆ›å»ºæ— é™æµ</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span> &#123;<br>    Stream.iterate(<span class="hljs-number">0</span>, t -&gt; t + <span class="hljs-number">2</span>).limit(<span class="hljs-number">10</span>).forEach(System.out::println);<br>    Stream.generate(Math::random).limit(<span class="hljs-number">5</span>).forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ä¸­é—´æ“ä½œ"><a href="#ä¸­é—´æ“ä½œ" class="headerlink" title="ä¸­é—´æ“ä½œ"></a>ä¸­é—´æ“ä½œ</h4><ul>
<li><p><strong>ç­›é€‰ä¸åˆ‡ç‰‡</strong></p>
<ul>
<li><code>filter(Predicate p)</code>ï¼šä»æµä¸­æ’é™¤æŸäº›å…ƒç´ ã€‚</li>
<li><code>limit(long maxSize)</code>ï¼šæˆªæ–­æµï¼Œä½¿å…¶å…ƒç´ ä¸è¶…è¿‡ç»™å®šæ•°é‡ã€‚</li>
<li><code>skip(long n)</code>ï¼šè·³è¿‡å‰nä¸ªå…ƒç´ ã€‚</li>
<li><code>distinct()</code>ï¼šå»é™¤é‡å¤å…ƒç´ ã€‚</li>
</ul>
</li>
<li><p><strong>æ˜ å°„</strong></p>
<ul>
<li><code>map(Function f)</code>ï¼šå°†æµä¸­çš„æ¯ä¸ªå…ƒç´ æ˜ å°„æˆä¸€ä¸ªæ–°çš„å…ƒç´ ã€‚</li>
<li><code>flatMap(Function f)</code>ï¼šå°†æµä¸­çš„æ¯ä¸ªå€¼éƒ½æ¢æˆå¦ä¸€ä¸ªæµï¼Œç„¶åæŠŠæ‰€æœ‰æµè¿æ¥æˆä¸€ä¸ªæµã€‚</li>
</ul>
</li>
<li><p><strong>æ’åº</strong></p>
<ul>
<li><code>sorted()</code>ï¼šæŒ‰è‡ªç„¶é¡ºåºæ’åºã€‚</li>
<li><code>sorted(Comparator comp)</code>ï¼šæŒ‰æ¯”è¾ƒå™¨é¡ºåºæ’åºã€‚</li>
</ul>
</li>
</ul>
<h4 id="Streamçš„ç»ˆæ­¢æ“ä½œ"><a href="#Streamçš„ç»ˆæ­¢æ“ä½œ" class="headerlink" title="Streamçš„ç»ˆæ­¢æ“ä½œ"></a>Streamçš„ç»ˆæ­¢æ“ä½œ</h4><ul>
<li><p><strong>åŒ¹é…ä¸æŸ¥æ‰¾</strong></p>
<ul>
<li><code>allMatch(Predicate p)</code>ï¼šæ£€æŸ¥æ˜¯å¦åŒ¹é…æ‰€æœ‰å…ƒç´ ã€‚</li>
<li><code>anyMatch(Predicate p)</code>ï¼šæ£€æŸ¥æ˜¯å¦è‡³å°‘åŒ¹é…ä¸€ä¸ªå…ƒç´ ã€‚</li>
<li><code>noneMatch(Predicate p)</code>ï¼šæ£€æŸ¥æ˜¯å¦æ²¡æœ‰åŒ¹é…æ‰€æœ‰å…ƒç´ ã€‚</li>
<li><code>findFirst()</code>ï¼šè¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</li>
<li><code>findAny()</code>ï¼šè¿”å›ä»»æ„ä¸€ä¸ªå…ƒç´ ã€‚</li>
<li><code>count()</code>ï¼šè¿”å›æµä¸­å…ƒç´ æ€»æ•°ã€‚</li>
<li><code>max(Comparator c)</code>ï¼šè¿”å›æµä¸­æœ€å¤§å€¼ã€‚</li>
<li><code>min(Comparator c)</code>ï¼šè¿”å›æµä¸­æœ€å°å€¼ã€‚</li>
<li><code>forEach(Consumer c)</code>ï¼šå†…éƒ¨è¿­ä»£ã€‚</li>
</ul>
</li>
<li><p><strong>å½’çº¦</strong></p>
<ul>
<li><code>reduce(T iden, BinaryOperator b)</code>ï¼šå°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚</li>
<li><code>reduce(BinaryOperator b)</code>ï¼šå°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚</li>
</ul>
</li>
<li><p><strong>æ”¶é›†</strong></p>
<ul>
<li><code>collect(Collector c)</code>ï¼šå°†æµè½¬æ¢ä¸ºå…¶ä»–å½¢å¼ï¼Œå¦‚é›†åˆã€‚</li>
</ul>
</li>
</ul>
<h4 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h4><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// allMatch(Predicate p) æ£€æŸ¥æ˜¯å¦åŒ¹é…æ‰€æœ‰å…ƒç´ </span><br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">allMatch</span> <span class="hljs-operator">=</span> employees.stream().allMatch(e -&gt; e.getAge() &gt; <span class="hljs-number">18</span>);<br>    System.out.println(allMatch);<br><br>    <span class="hljs-comment">// anyMatch(Predicate p) æ£€æŸ¥æ˜¯å¦è‡³å°‘åŒ¹é…ä¸€ä¸ªå…ƒç´ </span><br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">anyMatch</span> <span class="hljs-operator">=</span> employees.stream().anyMatch(e -&gt; e.getSalary() &gt; <span class="hljs-number">10000</span>);<br>    System.out.println(anyMatch);<br><br>    <span class="hljs-comment">// noneMatch(Predicate p) æ£€æŸ¥æ˜¯å¦æ²¡æœ‰åŒ¹é…æ‰€æœ‰å…ƒç´ </span><br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">noneMatch</span> <span class="hljs-operator">=</span> employees.stream().noneMatch(employee -&gt; employee.getName().startsWith(<span class="hljs-string">&quot;é›·&quot;</span>));<br>    System.out.println(noneMatch);<br><br>    <span class="hljs-comment">// findFirst() è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ </span><br>    Optional&lt;Employee&gt; first = employees.stream().findFirst();<br>    System.out.println(first);<br><br>    <span class="hljs-comment">// findAny() è¿”å›å½“å‰æµä¸­çš„ä»»æ„å…ƒç´ </span><br>    Optional&lt;Employee&gt; any = employees.parallelStream().findAny();<br>    System.out.println(any);<br><br>    <span class="hljs-comment">// count() è¿”å›æµä¸­å…ƒç´ æ€»æ•°</span><br>    <span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> employees.stream().filter(employee -&gt; employee.getSalary() &gt; <span class="hljs-number">3000</span>).count();<br>    System.out.println(count);<br><br>    <span class="hljs-comment">// max(Comparator c) è¿”å›æµä¸­æœ€å¤§å€¼</span><br>    Stream&lt;Double&gt; salaryStream = employees.stream().map(Employee::getSalary);<br>    Optional&lt;Double&gt; maxSalary = salaryStream.max(Double::compare);<br>    System.out.println(maxSalary);<br><br>    <span class="hljs-comment">// min(Comparator c) è¿”å›æµä¸­æœ€å°å€¼</span><br>    Optional&lt;Employee&gt; employee = employees.stream().min((e1, e2) -&gt; Double.compare(e1.getSalary(), e2.getSalary()));<br>    System.out.println(employee);<br><br>    <span class="hljs-comment">// forEach(Consumer c) å†…éƒ¨è¿­ä»£</span><br>    employees.stream().forEach(System.out::println);<br>&#125;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// reduce(T iden, BinaryOperator b) å¯ä»¥å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼</span><br>    List&lt;Integer&gt; list = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>);<br>    <span class="hljs-type">Integer</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> list.stream().reduce(<span class="hljs-number">0</span>, Integer::sum);<br>    System.out.println(sum);<br><br>    <span class="hljs-comment">// reduce(BinaryOperator b) å¯ä»¥å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼</span><br>    List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>    Optional&lt;Double&gt; totalSalary = employees.stream().map(Employee::getSalary).reduce(Double::sum);<br>    System.out.println(totalSalary);<br>&#125;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// collect(Collector c) å°†æµè½¬æ¢ä¸ºå…¶ä»–å½¢å¼</span><br>    List&lt;Employee&gt; employeeList = EmployeeData.getEmployees().stream().filter(e -&gt; e.getSalary() &gt; <span class="hljs-number">6000</span>).collect(Collectors.toList());<br>    employeeList.forEach(System.out::println);<br><br>    Set&lt;Employee&gt; employeeSet = EmployeeData.getEmployees().stream().filter(e -&gt; e.getSalary() &gt; <span class="hljs-number">6000</span>).collect(Collectors.toSet());<br>    employeeSet.forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="Optionalç±»"><a href="#Optionalç±»" class="headerlink" title="Optionalç±»"></a>Optionalç±»</h3><h4 id="Optionalç±»ä»‹ç»"><a href="#Optionalç±»ä»‹ç»" class="headerlink" title="Optionalç±»ä»‹ç»"></a>Optionalç±»ä»‹ç»</h4><p>Optionalç±»æ˜¯ä¸€ä¸ªå®¹å™¨ç±»ï¼Œä»£è¡¨ä¸€ä¸ªå€¼å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼Œå¯ä»¥é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<h4 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h4><ul>
<li><code>Optional.of(T t)</code>ï¼šåˆ›å»ºä¸€ä¸ªOptionalå®ä¾‹ï¼Œtå¿…é¡»éç©ºã€‚</li>
<li><code>Optional.empty()</code>ï¼šåˆ›å»ºä¸€ä¸ªç©ºçš„Optionalå®ä¾‹ã€‚</li>
<li><code>Optional.ofNullable(T t)</code>ï¼štå¯ä»¥ä¸ºnullã€‚</li>
<li><code>isPresent()</code>ï¼šåˆ¤æ–­æ˜¯å¦åŒ…å«å€¼ã€‚</li>
<li><code>orElse(T t)</code>ï¼šå¦‚æœè°ƒç”¨å¯¹è±¡åŒ…å«å€¼ï¼Œè¿”å›è¯¥å€¼ï¼Œå¦åˆ™è¿”å›tã€‚</li>
<li><code>orElseGet(Supplier s)</code>ï¼šå¦‚æœè°ƒç”¨å¯¹è±¡åŒ…å«å€¼ï¼Œè¿”å›è¯¥å€¼ï¼Œå¦åˆ™è¿”å›sè·å–çš„å€¼ã€‚</li>
<li><code>map(Function f)</code>ï¼šå¦‚æœæœ‰å€¼å¯¹å…¶å¤„ç†ï¼Œå¹¶è¿”å›å¤„ç†åçš„Optionalã€‚</li>
<li><code>flatMap(Function mapper)</code>ï¼šä¸mapç±»ä¼¼ï¼Œè¦æ±‚è¿”å›å€¼å¿…é¡»æ˜¯Optionalã€‚</li>
</ul>
<h4 id="ç¤ºä¾‹ä»£ç -1"><a href="#ç¤ºä¾‹ä»£ç -1" class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h4><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OptionalTest</span> &#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">Girl</span> <span class="hljs-variable">girl</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>();<br>        <span class="hljs-comment">// of(T t):ä¿è¯tæ˜¯éç©ºçš„</span><br>        Optional&lt;Girl&gt; optionalGirl = Optional.of(girl);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">Girl</span> <span class="hljs-variable">girl</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>();<br>        <span class="hljs-comment">// ofNullable(T t)ï¼štå¯ä»¥ä¸ºnull</span><br>        Optional&lt;Girl&gt; optionalGirl = Optional.ofNullable(girl);<br>        System.out.println(optionalGirl);<br>        <span class="hljs-comment">// orElse(T t1):å¦‚æœå½“å‰çš„Optionalå†…éƒ¨å°è£…çš„tæ˜¯éç©ºçš„ï¼Œåˆ™è¿”å›å†…éƒ¨çš„t.</span><br>        <span class="hljs-comment">// å¦‚æœå†…éƒ¨çš„tæ˜¯ç©ºçš„ï¼Œåˆ™è¿”å›orElse()æ–¹æ³•ä¸­çš„å‚æ•°t1.</span><br>        <span class="hljs-type">Girl</span> <span class="hljs-variable">girl1</span> <span class="hljs-operator">=</span> optionalGirl.orElse(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>(<span class="hljs-string">&quot;èµµä¸½é¢–&quot;</span>));<br>        System.out.println(girl1);<br>    &#125;<br><br>    <span class="hljs-comment">// ä½¿ç”¨Optionalç±»ä¼˜åŒ–æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getGirlName2</span><span class="hljs-params">(Boy boy)</span> &#123;<br>        Optional&lt;Boy&gt; boyOptional = Optional.ofNullable(boy);<br>        <span class="hljs-type">Boy</span> <span class="hljs-variable">boy1</span> <span class="hljs-operator">=</span> boyOptional.orElse(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Boy</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>(<span class="hljs-string">&quot;è¿ªä¸½çƒ­å·´&quot;</span>)));<br>        <span class="hljs-type">Girl</span> <span class="hljs-variable">girl</span> <span class="hljs-operator">=</span> boy1.getGirl();<br>        Optional&lt;Girl&gt; girlOptional = Optional.ofNullable(girl);<br>        <span class="hljs-type">Girl</span> <span class="hljs-variable">girl1</span> <span class="hljs-operator">=</span> girlOptional.orElse(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>(<span class="hljs-string">&quot;å¤åŠ›å¨œæ‰&quot;</span>));<br>        <span class="hljs-keyword">return</span> girl1.getName();<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test5</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">Boy</span> <span class="hljs-variable">boy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boy</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Girl</span>(<span class="hljs-string">&quot;ikura&quot;</span>));<br>        <span class="hljs-type">String</span> <span class="hljs-variable">girlName</span> <span class="hljs-operator">=</span> getGirlName2(boy);<br>        System.out.println(girlName);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
  </entry>
  <entry>
    <title>Javaå¹¶å‘ç¼–ç¨‹</title>
    <url>/2024/09/30/Java-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="Javaå¹¶å‘ç¼–ç¨‹åŸºç¡€"><a href="#Javaå¹¶å‘ç¼–ç¨‹åŸºç¡€" class="headerlink" title="Javaå¹¶å‘ç¼–ç¨‹åŸºç¡€"></a>Javaå¹¶å‘ç¼–ç¨‹åŸºç¡€</h1><h2 id="Synchronizedçš„ä½œç”¨èŒƒå›´"><a href="#Synchronizedçš„ä½œç”¨èŒƒå›´" class="headerlink" title="Synchronizedçš„ä½œç”¨èŒƒå›´"></a>Synchronizedçš„ä½œç”¨èŒƒå›´</h2><ul>
<li><strong>ä¿®é¥°å®ä¾‹æ–¹æ³•</strong>ï¼šå¯¹å½“å‰å¯¹è±¡å®ä¾‹åŠ é”ï¼Œè¿›å…¥åŒæ­¥ä»£ç å‰è¦è·å¾—å½“å‰å¯¹è±¡å®ä¾‹çš„é”ã€‚</li>
<li><strong>ä¿®é¥°é™æ€æ–¹æ³•</strong>ï¼šå¯¹å½“å‰ç±»åŠ é”ï¼Œä¼šä½œç”¨äºç±»çš„æ‰€æœ‰å¯¹è±¡å®ä¾‹ã€‚å› ä¸ºé™æ€æˆå‘˜ä¸å±äºä»»ä½•ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œæ˜¯ç±»æˆå‘˜ã€‚</li>
<li><strong>ä¿®é¥°ä»£ç å—</strong>ï¼šæŒ‡å®šåŠ é”å¯¹è±¡ï¼Œå¯¹ç»™å®šå¯¹è±¡åŠ é”ï¼Œè¿›å…¥åŒæ­¥ä»£ç å—å‰è¦è·å¾—ç»™å®šå¯¹è±¡çš„é”ã€‚</li>
</ul>
<p><strong>æ€»ç»“</strong>ï¼š<br><code>synchronized</code>å¯ä»¥é”ä½ç±»ï¼Œä¹Ÿå¯ä»¥é”ä½ç±»çš„æŸä¸ªå¯¹è±¡ï¼ŒäºŒè€…ç›¸äº’ç‹¬ç«‹ï¼Œä¸å†²çªã€‚</p>
<h2 id="æ·±å…¥ç†è§£volatileå…³é”®å­—"><a href="#æ·±å…¥ç†è§£volatileå…³é”®å­—" class="headerlink" title="æ·±å…¥ç†è§£volatileå…³é”®å­—"></a>æ·±å…¥ç†è§£volatileå…³é”®å­—</h2><h3 id="çŸ¥è¯†é¢„å¤‡ï¼šå¯è§æ€§å’ŒåŸå­æ€§"><a href="#çŸ¥è¯†é¢„å¤‡ï¼šå¯è§æ€§å’ŒåŸå­æ€§" class="headerlink" title="çŸ¥è¯†é¢„å¤‡ï¼šå¯è§æ€§å’ŒåŸå­æ€§"></a>çŸ¥è¯†é¢„å¤‡ï¼šå¯è§æ€§å’ŒåŸå­æ€§</h3><ul>
<li><strong>åŸå­æ€§</strong>ï¼šä¸€æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŒæœ‰æŸä¸ªç‰¹å®šçš„é”ï¼Œä¸€æ¬¡å°±åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿä½¿ç”¨å…±äº«æ•°æ®ã€‚</li>
<li><strong>å¯è§æ€§</strong>ï¼šå¿…é¡»ç¡®ä¿é‡Šæ”¾é”ä¹‹å‰å¯¹å…±äº«æ•°æ®åšå‡ºçš„æ›´æ”¹å¯¹äºéšåè·å¾—è¯¥é”çš„å¦ä¸€ä¸ªçº¿ç¨‹æ˜¯å¯è§çš„ã€‚</li>
</ul>
<h3 id="volatileçš„ç‰¹æ€§"><a href="#volatileçš„ç‰¹æ€§" class="headerlink" title="volatileçš„ç‰¹æ€§"></a>volatileçš„ç‰¹æ€§</h3><ul>
<li><strong>ä¿è¯å¯è§æ€§</strong>ï¼šä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå˜é‡çš„å€¼ï¼Œè¿™æ–°å€¼å¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ç«‹å³å¯è§çš„ã€‚</li>
<li><strong>ä¸èƒ½ä¿è¯åŸå­æ€§</strong>ï¼šä¸èƒ½ä¿è¯<code>volatile</code>å˜é‡å¤åˆæ“ä½œçš„åŸå­æ€§ï¼Œå› ä¸ºåŒä¸€å˜é‡å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹è¿›è¡Œä¿®æ”¹ã€‚</li>
</ul>
<h3 id="ç¤ºä¾‹ä»£ç ï¼šä½“ç°volatileçš„å¯è§æ€§"><a href="#ç¤ºä¾‹ä»£ç ï¼šä½“ç°volatileçš„å¯è§æ€§" class="headerlink" title="ç¤ºä¾‹ä»£ç ï¼šä½“ç°volatileçš„å¯è§æ€§"></a>ç¤ºä¾‹ä»£ç ï¼šä½“ç°volatileçš„å¯è§æ€§</h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VolatileVisibilityExample</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// çº¿ç¨‹Aä¿®æ”¹flagçš„å€¼ä¸ºtrue</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            flag = <span class="hljs-literal">true</span>;<br>            System.out.println(<span class="hljs-string">&quot;Thread A sets flag to true&quot;</span>);<br>        &#125;).start();<br><br>        <span class="hljs-comment">// çº¿ç¨‹Bæ£€æŸ¥flagçš„å€¼ï¼Œå¦‚æœä¸ºtrueåˆ™è¾“å‡ºæ¶ˆæ¯</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>            <span class="hljs-keyword">while</span> (!flag) &#123;<br>                <span class="hljs-comment">// å¾ªç¯ç­‰å¾…ï¼Œç›´åˆ°flagçš„å€¼å˜ä¸ºtrue</span><br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;Thread B detects flag is now true&quot;</span>);<br>        &#125;).start();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">VolatileVisibilityExample</span> <span class="hljs-variable">example</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">VolatileVisibilityExample</span>();<br>        example.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="æŒ‡ä»¤é‡æ’åº"><a href="#æŒ‡ä»¤é‡æ’åº" class="headerlink" title="æŒ‡ä»¤é‡æ’åº"></a>æŒ‡ä»¤é‡æ’åº</h3><p>æŒ‡ä»¤é‡æ’åºå¯ä»¥ä¼˜åŒ–ä»£ç çš„æ‰§è¡Œé¡ºåºï¼Œä½†ä¸èƒ½æ”¹å˜å˜é‡çš„æœ€ç»ˆç»“æœã€‚ä¾‹å¦‚ï¼Œå¯¹ä¸€ä¸ªå˜é‡çš„ä¸¤æ¬¡å†™æ“ä½œçš„ç›¸å¯¹ä½ç½®ä¸èƒ½æ”¹å˜ï¼Œå¦åˆ™ä¼šå¯¼è‡´æœ€ç»ˆç»“æœå‘ç”Ÿæ”¹å˜ã€‚</p>
<h3 id="å•ä¾‹æ¨¡å¼åŒé‡æ£€æŸ¥å¤±æ•ˆé—®é¢˜"><a href="#å•ä¾‹æ¨¡å¼åŒé‡æ£€æŸ¥å¤±æ•ˆé—®é¢˜" class="headerlink" title="å•ä¾‹æ¨¡å¼åŒé‡æ£€æŸ¥å¤±æ•ˆé—®é¢˜"></a>å•ä¾‹æ¨¡å¼åŒé‡æ£€æŸ¥å¤±æ•ˆé—®é¢˜</h3><p><code>new</code>å…³é”®å­—åˆ›å»ºå¯¹è±¡ä¸æ˜¯åŸå­æ“ä½œï¼Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡ä¼šç»å†ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>åœ¨å †å†…å­˜å¼€è¾Ÿå†…å­˜ç©ºé—´ã€‚</li>
<li>è°ƒç”¨æ„é€ æ–¹æ³•ï¼Œåˆå§‹åŒ–å¯¹è±¡ã€‚</li>
<li>å¼•ç”¨å˜é‡æŒ‡å‘å †å†…å­˜ç©ºé—´ã€‚</li>
</ol>
<p>ä¸ºäº†æé«˜æ€§èƒ½ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¸¸å¸¸ä¼šå¯¹æ—¢å®šçš„ä»£ç æ‰§è¡Œé¡ºåºè¿›è¡ŒæŒ‡ä»¤é‡æ’åºã€‚ç»è¿‡æŒ‡ä»¤é‡æ’åºä¹‹åï¼Œåˆ›å»ºå¯¹è±¡çš„æ‰§è¡Œé¡ºåºå¯èƒ½ä¸º<code>1 -&gt; 2 -&gt; 3</code>æˆ–è€…<code>1 -&gt; 3 -&gt; 2</code>ã€‚å› æ­¤ï¼Œå½“æŸä¸ªçº¿ç¨‹åœ¨ä¹±åºè¿è¡Œ<code>1 -&gt; 3 -&gt; 2</code>æŒ‡ä»¤çš„æ—¶å€™ï¼Œå¼•ç”¨å˜é‡æŒ‡å‘å †å†…å­˜ç©ºé—´ï¼Œè¿™ä¸ªå¯¹è±¡ä¸ä¸º<code>null</code>ï¼Œä½†æ˜¯æ²¡æœ‰åˆå§‹åŒ–ï¼Œå…¶ä»–çº¿ç¨‹æœ‰å¯èƒ½è¿™ä¸ªæ—¶å€™è¿›å…¥äº†<code>getInstance</code>çš„ç¬¬ä¸€ä¸ª<code>if (instance == null)</code>åˆ¤æ–­ï¼Œå¯¼è‡´é”™è¯¯åœ°ä½¿ç”¨äº†æ²¡æœ‰åˆå§‹åŒ–çš„é<code>null</code>å®ä¾‹ï¼Œè¿™å°±æ˜¯è‘—åçš„DCLå¤±æ•ˆé—®é¢˜ã€‚</p>
<p>å½“æˆ‘ä»¬åœ¨å¼•ç”¨å˜é‡ä¸Šæ·»åŠ <code>volatile</code>å…³é”®å­—ä»¥åï¼Œä¼šé€šè¿‡åœ¨åˆ›å»ºå¯¹è±¡æŒ‡ä»¤çš„å‰åæ·»åŠ å†…å­˜å±éšœæ¥ç¦æ­¢æŒ‡ä»¤é‡æ’åºï¼Œä»è€Œé¿å…è¿™ä¸ªé—®é¢˜ï¼Œè€Œä¸”å¯¹<code>volatile</code>ä¿®é¥°çš„å˜é‡çš„ä¿®æ”¹å¯¹å…¶ä»–ä»»ä½•çº¿ç¨‹éƒ½æ˜¯å¯è§çš„ã€‚</p>
<h2 id="ThreadLocalå­¦ä¹ "><a href="#ThreadLocalå­¦ä¹ " class="headerlink" title="ThreadLocalå­¦ä¹ "></a>ThreadLocalå­¦ä¹ </h2><h3 id="ThreadLocalç®€ä»‹"><a href="#ThreadLocalç®€ä»‹" class="headerlink" title="ThreadLocalç®€ä»‹"></a>ThreadLocalç®€ä»‹</h3><p><code>ThreadLocal</code>æ˜¯ä¸€ä¸ªçº¿ç¨‹çš„â€œæœ¬åœ°å˜é‡â€ï¼Œè¿™ç§å˜é‡åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è®¿é—®ï¼ˆé€šè¿‡<code>get</code>å’Œ<code>set</code>æ–¹æ³•è®¿é—®ï¼‰æ—¶èƒ½å¤Ÿä¿è¯å„ä¸ªçº¿ç¨‹çš„å˜é‡ç›¸å¯¹ç‹¬ç«‹äºå…¶ä»–çº¿ç¨‹å†…çš„å˜é‡ï¼Œä¸åŒçº¿ç¨‹ä¹‹é—´ä¸ä¼šç›¸äº’å¹²æ‰°ï¼Œè¿™ç§å˜é‡åœ¨çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå†…èµ·ä½œç”¨ï¼Œå‡å°‘åŒä¸€ä¸ªçº¿ç¨‹å†…å¤šä¸ªå‡½æ•°æˆ–ç»„ä»¶ä¹‹é—´ä¸€äº›å…¬å…±å˜é‡ä¼ é€’çš„å¤æ‚åº¦ã€‚</p>
<h3 id="setæ–¹æ³•"><a href="#setæ–¹æ³•" class="headerlink" title="setæ–¹æ³•"></a>setæ–¹æ³•</h3><p>é€šè¿‡å½“å‰çº¿ç¨‹å¯¹è±¡<code>thread</code>è·å–è¯¥<code>thread</code>æ‰€ç»´æŠ¤çš„<code>ThreadLocalMap</code>ï¼Œå¦‚æœ<code>ThreadLocalMap</code>ä¸ä¸º<code>null</code>ï¼Œåˆ™ä»¥<code>ThreadLocal</code>å®ä¾‹ä¸º<code>key</code>ï¼Œå€¼ä¸º<code>value</code>çš„é”®å€¼å¯¹å­˜å…¥<code>ThreadLocalMap</code>ï¼›è‹¥<code>ThreadLocalMap</code>ä¸º<code>null</code>çš„è¯ï¼Œå°±æ–°å»º<code>ThreadLocalMap</code>ï¼Œç„¶åå†ä»¥<code>ThreadLocal</code>ä¸ºé”®ï¼Œå€¼ä¸º<code>value</code>çš„é”®å€¼å¯¹å­˜å…¥å³å¯ã€‚</p>
<h3 id="getæ–¹æ³•"><a href="#getæ–¹æ³•" class="headerlink" title="getæ–¹æ³•"></a>getæ–¹æ³•</h3><p>é€šè¿‡å½“å‰çº¿ç¨‹<code>thread</code>å®ä¾‹è·å–åˆ°å®ƒæ‰€ç»´æŠ¤çš„<code>ThreadLocalMap</code>ï¼Œç„¶åä»¥å½“å‰<code>ThreadLocal</code>å®ä¾‹ä¸º<code>key</code>è·å–è¯¥<code>map</code>ä¸­çš„é”®å€¼å¯¹ï¼ˆ<code>Entry</code>ï¼‰ã€‚å¦‚æœ<code>Entry</code>ä¸ä¸º<code>null</code>åˆ™è¿”å›<code>Entry</code>çš„<code>value</code>ã€‚å¦‚æœè·å–<code>ThreadLocalMap</code>ä¸º<code>null</code>æˆ–è€…<code>Entry</code>ä¸º<code>null</code>çš„è¯ï¼Œå°±ä»¥å½“å‰<code>ThreadLocal</code>ä¸º<code>Key</code>ï¼Œ<code>value</code>ä¸º<code>null</code>å­˜å…¥<code>map</code>åï¼Œå¹¶è¿”å›<code>null</code>ã€‚</p>
<h3 id="ä½¿ç”¨å®ä¾‹"><a href="#ä½¿ç”¨å®ä¾‹" class="headerlink" title="ä½¿ç”¨å®ä¾‹"></a>ä½¿ç”¨å®ä¾‹</h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span> &#123;<br>    <span class="hljs-comment">// åˆ›å»ºThreadLocalå¯¹è±¡ï¼Œåšæˆpublic static</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ThreadLocal&lt;Object&gt; threadLocal1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ThreadLocal&lt;Object&gt; threadLocal2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();<br><br>    <span class="hljs-comment">// Taskæ˜¯çº¿ç¨‹ç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Task</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-type">Dog</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();<br>            <span class="hljs-type">Pig</span> <span class="hljs-variable">pig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pig</span>();<br>            <span class="hljs-comment">// ç»™threadLocal1å¯¹è±¡æ”¾å…¥set dog</span><br>            System.out.println(<span class="hljs-string">&quot;Task æ”¾å…¥äº† dog= &quot;</span> + dog);<br>            threadLocal1.set(dog);<br>            threadLocal2.set(pig); <span class="hljs-comment">// è¿™ä¸ªæ•°æ®å°±ä¼šè¢«threadLocal2å…³è”ï¼Œå¹¶ä¸”éƒ½è¢«å½“å‰Threadç®¡ç†</span><br>            System.out.println(<span class="hljs-string">&quot;Task åœ¨run æ–¹æ³•ä¸­ çº¿ç¨‹=&quot;</span> + Thread.currentThread().getName());<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">T1Service</span>().update();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Task</span>()).start(); <span class="hljs-comment">// ä¸»çº¿ç¨‹å¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="ThreadLocalçš„å†…éƒ¨å®ç°"><a href="#ThreadLocalçš„å†…éƒ¨å®ç°" class="headerlink" title="ThreadLocalçš„å†…éƒ¨å®ç°"></a>ThreadLocalçš„å†…éƒ¨å®ç°</h3><p>åˆ›å»º<code>static</code>ä¿®é¥°çš„<code>ThreadLocal</code>å¯¹è±¡äºè¿è¡Œçº¿ç¨‹çš„ç±»ä¸­ï¼Œçº¿ç¨‹<code>Thread t</code>ç»´æŠ¤ä¸€ä¸ªå±æ€§ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Threadå¯¹è±¡çš„å®ä¾‹æ•°æ®</span><br>ThreadLocal.<span class="hljs-type">ThreadLocalMap</span> <span class="hljs-variable">threadLocals</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br></code></pre></td></tr></table></figure>
<p>å®ƒæ˜¯ä¸€ä¸ª<code>HashMap</code>ï¼Œé‡Œé¢çš„<code>Entry</code>çš„ç»“æ„ä¸º<code>(key, value) â€”&gt; (çº¿ç¨‹idï¼Œå€¼)</code>ã€‚</p>
<p><strong>ä¸€ä¸ªçº¿ç¨‹æ‰€åœ¨çš„ç±»å¯ä»¥æœ‰å¤šä¸ª<code>ThreadLocal</code>å¯¹è±¡ï¼Œæ¯ä¸ª<code>threadLocal</code>å¯¹è±¡éƒ½ä¼šåœ¨çº¿ç¨‹ç»´æŠ¤çš„<code>threadLocals</code>ä¸­ä»¥é”®çš„å½¢å¼å­˜åœ¨ã€‚</strong></p>
<h2 id="ReentrantLockå’ŒAQS"><a href="#ReentrantLockå’ŒAQS" class="headerlink" title="ReentrantLockå’ŒAQS"></a>ReentrantLockå’ŒAQS</h2><h3 id="ä»€ä¹ˆæ˜¯AQSï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯AQSï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯AQSï¼Ÿ"></a>ä»€ä¹ˆæ˜¯AQSï¼Ÿ</h3><p>AQSä¸­ä½¿ç”¨çš„æ˜¯CLHå˜ä½“é˜Ÿåˆ—ã€‚</p>
<h3 id="CLHé˜Ÿåˆ—"><a href="#CLHé˜Ÿåˆ—" class="headerlink" title="CLHé˜Ÿåˆ—"></a>CLHé˜Ÿåˆ—</h3><ul>
<li><strong>CLHé˜Ÿåˆ—</strong>ï¼šæ˜¯å•å‘é“¾è¡¨å®ç°çš„é˜Ÿåˆ—ã€‚ç”³è¯·çº¿ç¨‹åªåœ¨æœ¬åœ°å˜é‡ä¸Šè‡ªæ—‹ï¼Œå®ƒä¸æ–­è½®è¯¢å‰é©±çš„çŠ¶æ€ï¼Œå¦‚æœå‘ç°å‰é©±èŠ‚ç‚¹é‡Šæ”¾äº†é”å°±ç»“æŸè‡ªæ—‹ã€‚</li>
<li><strong>ç‰¹æ€§</strong>ï¼š<ul>
<li>CLHé˜Ÿåˆ—æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œä¿æŒFIFOå…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—ç‰¹æ€§ã€‚</li>
<li>é€šè¿‡<code>tail</code>å°¾èŠ‚ç‚¹ï¼ˆåŸå­å¼•ç”¨ï¼‰æ¥æ„å»ºé˜Ÿåˆ—ï¼Œæ€»æ˜¯æŒ‡å‘æœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚</li>
<li>æœªè·å¾—é”èŠ‚ç‚¹ä¼šè¿›è¡Œè‡ªæ—‹ï¼Œè€Œä¸æ˜¯åˆ‡æ¢çº¿ç¨‹çŠ¶æ€ã€‚</li>
<li>å¹¶å‘é«˜æ—¶æ€§èƒ½è¾ƒå·®ï¼Œå› ä¸ºæœªè·å¾—é”èŠ‚ç‚¹ä¸æ–­è½®è¯¢å‰é©±èŠ‚ç‚¹çš„çŠ¶æ€æ¥æŸ¥çœ‹æ˜¯å¦è·å¾—é”ã€‚</li>
</ul>
</li>
</ul>
<h3 id="AQSä¸­çš„CLHå˜ä½“é˜Ÿåˆ—"><a href="#AQSä¸­çš„CLHå˜ä½“é˜Ÿåˆ—" class="headerlink" title="AQSä¸­çš„CLHå˜ä½“é˜Ÿåˆ—"></a>AQSä¸­çš„CLHå˜ä½“é˜Ÿåˆ—</h3><ul>
<li><strong>AQSé˜Ÿåˆ—</strong>ï¼šæ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œä¹Ÿæ˜¯FIFOå…ˆè¿›å…ˆå‡ºçš„ç‰¹æ€§ã€‚</li>
<li><strong>ç‰¹æ€§</strong>ï¼š<ul>
<li>é€šè¿‡<code>head</code>å’Œ<code>tail</code>å¤´å°¾ä¸¤ä¸ªèŠ‚ç‚¹æ¥ç»„æˆé˜Ÿåˆ—ç»“æ„ï¼Œé€šè¿‡<code>volatile</code>ä¿®é¥°ä¿è¯å¯è§æ€§ã€‚</li>
<li><code>head</code>æŒ‡å‘èŠ‚ç‚¹ä¸ºå·²è·å¾—é”çš„èŠ‚ç‚¹ï¼Œæ˜¯ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹æœ¬èº«ä¸æŒæœ‰å…·ä½“çº¿ç¨‹ã€‚</li>
<li>è·å–ä¸åˆ°åŒæ­¥çŠ¶æ€ï¼Œä¼šå°†èŠ‚ç‚¹è¿›è¡Œè‡ªæ—‹è·å–é”ï¼Œè‡ªæ—‹ä¸€å®šæ¬¡æ•°å¤±è´¥åä¼šå°†çº¿ç¨‹é˜»å¡ï¼Œç›¸å¯¹äºCLHé˜Ÿåˆ—æ€§èƒ½è¾ƒå¥½ã€‚</li>
</ul>
</li>
</ul>
<h3 id="ReentrantLockçš„å®ç°"><a href="#ReentrantLockçš„å®ç°" class="headerlink" title="ReentrantLockçš„å®ç°"></a>ReentrantLockçš„å®ç°</h3><p>å½“çº¿ç¨‹è·å–é”å¤±è´¥æ—¶ï¼Œ<code>ReentrantLock</code>é¦–å…ˆå†<code>tryAcquire()</code>ä¸€ä¸‹ï¼Œ<code>tryAcquire</code>å¤±è´¥ï¼Œåˆ™AQSä¼šå°†å½“å‰çº¿ç¨‹ä»¥åŠç­‰å¾…çŠ¶æ€ç­‰ä¿¡æ¯æ„é€ æˆä¸ºä¸€ä¸ªèŠ‚ç‚¹ï¼ˆ<code>Node</code>å¯¹è±¡ï¼‰å¹¶å°†å…¶åŠ å…¥AQSä¸­ï¼ŒåŒæ—¶ä¼šé˜»å¡å½“å‰çº¿ç¨‹ã€‚</p>
<h3 id="æ¡ä»¶é˜Ÿåˆ—ä¸é˜»å¡é˜Ÿåˆ—"><a href="#æ¡ä»¶é˜Ÿåˆ—ä¸é˜»å¡é˜Ÿåˆ—" class="headerlink" title="æ¡ä»¶é˜Ÿåˆ—ä¸é˜»å¡é˜Ÿåˆ—"></a>æ¡ä»¶é˜Ÿåˆ—ä¸é˜»å¡é˜Ÿåˆ—</h3><ul>
<li><strong>æ¡ä»¶é˜Ÿåˆ—å’Œé˜»å¡é˜Ÿåˆ—çš„èŠ‚ç‚¹</strong>ï¼šéƒ½æ˜¯<code>Node</code>çš„å®ä¾‹ï¼Œå› ä¸ºæ¡ä»¶é˜Ÿåˆ—çš„èŠ‚ç‚¹æ˜¯éœ€è¦è½¬ç§»åˆ°é˜»å¡é˜Ÿåˆ—ä¸­å»çš„ã€‚</li>
<li><strong>Conditionçš„å®ç°</strong>ï¼š<ul>
<li>æ¯ä¸ª<code>ReentrantLock</code>å®ä¾‹å¯ä»¥é€šè¿‡å¤šæ¬¡è°ƒç”¨<code>newCondition()</code>äº§ç”Ÿå¤šä¸ª<code>Condition</code>å®ä¾‹ã€‚</li>
<li>æ¯ä¸ª<code>condition</code>æœ‰ä¸€ä¸ªå…³è”çš„æ¡ä»¶é˜Ÿåˆ—ï¼Œå¦‚çº¿ç¨‹è°ƒç”¨<code>condition1.await()</code>æ–¹æ³•å³å¯å°†å½“å‰çº¿ç¨‹åŒ…è£…æˆ<code>Node</code>ååŠ å…¥åˆ°æ¡ä»¶é˜Ÿåˆ—ä¸­ï¼Œç„¶åé˜»å¡åœ¨è¿™é‡Œã€‚</li>
<li>è°ƒç”¨<code>condition1.signal()</code>è§¦å‘ä¸€æ¬¡å”¤é†’ï¼Œæ­¤æ—¶å”¤é†’çš„æ˜¯é˜Ÿå¤´ï¼Œä¼šå°†<code>condition1</code>å¯¹åº”çš„æ¡ä»¶é˜Ÿåˆ—çš„<code>firstWaiter</code>ï¼ˆé˜Ÿå¤´ï¼‰ç§»åˆ°é˜»å¡é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œç­‰å¾…è·å–é”ï¼Œè·å–é”å<code>await</code>æ–¹æ³•æ‰èƒ½è¿”å›ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚</li>
</ul>
</li>
</ul>
<h2 id="çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± </h2><h3 id="çº¿ç¨‹æ± å‚æ•°"><a href="#çº¿ç¨‹æ± å‚æ•°" class="headerlink" title="çº¿ç¨‹æ± å‚æ•°"></a>çº¿ç¨‹æ± å‚æ•°</h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">ThreadPoolExecutor</span><span class="hljs-params">(<span class="hljs-type">int</span> corePoolSize, // æ ¸å¿ƒçº¿ç¨‹æ•°</span><br><span class="hljs-params">                          <span class="hljs-type">int</span> maximumPoolSize, // æœ€å¤§çº¿ç¨‹æ•°</span><br><span class="hljs-params">                          <span class="hljs-type">long</span> keepAliveTime, // ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´</span><br><span class="hljs-params">                          TimeUnit unit, // å­˜æ´»æ—¶é—´å•ä½</span><br><span class="hljs-params">                          BlockingQueue&lt;Runnable&gt; workQueue, // ä»»åŠ¡çš„é˜»å¡é˜Ÿåˆ—</span><br><span class="hljs-params">                          ThreadFactory threadFactory, // æ–°çº¿ç¨‹çš„äº§ç”Ÿæ–¹å¼</span><br><span class="hljs-params">                          RejectedExecutionHandler handler // æ‹’ç»ç­–ç•¥</span><br><span class="hljs-params">)</span><br></code></pre></td></tr></table></figure>

<h3 id="å‘çº¿ç¨‹æ± ä¸­æ·»åŠ ä»»åŠ¡"><a href="#å‘çº¿ç¨‹æ± ä¸­æ·»åŠ ä»»åŠ¡" class="headerlink" title="å‘çº¿ç¨‹æ± ä¸­æ·»åŠ ä»»åŠ¡"></a>å‘çº¿ç¨‹æ± ä¸­æ·»åŠ ä»»åŠ¡</h3><p>é€šè¿‡<code>ThreadPoolExecutor.execute(Runnable command)</code>æ–¹æ³•ï¼Œå³å¯å‘çº¿ç¨‹æ± å†…æ·»åŠ ä¸€ä¸ªä»»åŠ¡ã€‚</p>
<h3 id="å…³é—­çº¿ç¨‹æ± "><a href="#å…³é—­çº¿ç¨‹æ± " class="headerlink" title="å…³é—­çº¿ç¨‹æ± "></a>å…³é—­çº¿ç¨‹æ± </h3><ul>
<li>**<code>shutdown()</code>**ï¼šæ‰§è¡Œååœæ­¢æ¥å—æ–°ä»»åŠ¡ï¼Œä½†ä¼šæŠŠé˜Ÿåˆ—çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ã€‚</li>
<li>**<code>shutdownNow()</code>**ï¼šæ‰§è¡Œååœæ­¢æ¥å—æ–°ä»»åŠ¡ï¼Œä½†ä¼šä¸­æ–­æ‰€æœ‰çš„ä»»åŠ¡ï¼ˆä¸ç®¡æ˜¯å¦æ­£åœ¨æ‰§è¡Œä¸­ï¼‰ï¼Œå°†çº¿ç¨‹æ± çŠ¶æ€å˜ä¸º<code>STOP</code>çŠ¶æ€ã€‚</li>
</ul>
<h3 id="æ‹’ç»ç­–ç•¥"><a href="#æ‹’ç»ç­–ç•¥" class="headerlink" title="æ‹’ç»ç­–ç•¥"></a>æ‹’ç»ç­–ç•¥</h3><ol>
<li><strong>AbortPolicy</strong>ï¼šæ‹’ç»ä»»åŠ¡æ—¶æŠ›å‡º<code>RejectedExecutionException</code>å¼‚å¸¸ã€‚</li>
<li><strong>DiscardPolicy</strong>ï¼šç›´æ¥ä¸¢å¼ƒä»»åŠ¡ï¼Œä¸é€šçŸ¥ã€‚</li>
<li><strong>DiscardOldestPolicy</strong>ï¼šä¸¢å¼ƒé˜Ÿåˆ—ä¸­å­˜æ´»æ—¶é—´æœ€é•¿çš„ä»»åŠ¡ï¼Œä¸ºæ–°ä»»åŠ¡è…¾å‡ºç©ºé—´ã€‚</li>
<li><strong>CallerRunsPolicy</strong>ï¼šå°†ä»»åŠ¡äº¤ç”±æäº¤ä»»åŠ¡çš„çº¿ç¨‹æ‰§è¡Œã€‚</li>
</ol>
<h2 id="è¯»ä¹¦ç¬”è®°æ•´ç†"><a href="#è¯»ä¹¦ç¬”è®°æ•´ç†" class="headerlink" title="è¯»ä¹¦ç¬”è®°æ•´ç†"></a>è¯»ä¹¦ç¬”è®°æ•´ç†</h2><h3 id="Javaçº¿ç¨‹å®ç°-åˆ›å»ºæ–¹å¼"><a href="#Javaçº¿ç¨‹å®ç°-åˆ›å»ºæ–¹å¼" class="headerlink" title="Javaçº¿ç¨‹å®ç°&#x2F;åˆ›å»ºæ–¹å¼"></a>Javaçº¿ç¨‹å®ç°&#x2F;åˆ›å»ºæ–¹å¼</h3><ol>
<li><strong>å®ç°<code>Runnable</code>æ¥å£ä¸­çš„<code>run</code>æ–¹æ³•</strong>ï¼šç„¶åæŠŠå®ç°<code>run</code>æ–¹æ³•çš„å¯¹è±¡å®ä¾‹ä¼ å…¥<code>Thread</code>ç±»ä¸­ã€‚</li>
<li><strong>ç»§æ‰¿<code>Thread</code>ç±»</strong>ï¼šç»§æ‰¿<code>Thread</code>ç±»ï¼Œé‡å†™<code>run</code>æ–¹æ³•ã€‚</li>
<li><strong>çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹</strong>ï¼šçº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹æºç ï¼š<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultThreadFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ThreadFactory</span> &#123;<br>    DefaultThreadFactory() &#123;<br>        <span class="hljs-type">SecurityManager</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> System.getSecurityManager();<br>        group = (s != <span class="hljs-literal">null</span>) ? s.getThreadGroup() :<br>            Thread.currentThread().getThreadGroup();<br>        namePrefix = <span class="hljs-string">&quot;pool-&quot;</span> +<br>            poolNumber.getAndIncrement() +<br>            <span class="hljs-string">&quot;-thread-&quot;</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> Thread <span class="hljs-title function_">newThread</span><span class="hljs-params">(Runnable r)</span> &#123;<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(group, r,<br>                    namePrefix + threadNumber.getAndIncrement(),<br>        <span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">if</span> (t.isDaemon())<br>            t.setDaemon(<span class="hljs-literal">false</span>);<br>        <span class="hljs-keyword">if</span> (t.getPriority() != Thread.NORM_PRIORITY)<br>            t.setPriority(Thread.NORM_PRIORITY);<br>        <span class="hljs-keyword">return</span> t;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><strong>æœ‰è¿”å›å€¼çš„<code>Callable</code>åˆ›å»ºçº¿ç¨‹</strong>ï¼š<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CallableTask</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;Integer&gt; &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>().nextInt();<br>    &#125;<br>&#125;<br><span class="hljs-comment">// åˆ›å»ºçº¿ç¨‹æ± </span><br><span class="hljs-type">ExecutorService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">10</span>);<br><span class="hljs-comment">// æäº¤ä»»åŠ¡ï¼Œå¹¶ç”¨Futureæäº¤è¿”å›ç»“æœ</span><br>Future&lt;Integer&gt; future = service.submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CallableTask</span>());<br></code></pre></td></tr></table></figure></li>
</ol>
<h3 id="ä¸ºä»€ä¹ˆå®ç°Runnableæ¥å£æ¯”ç»§æ‰¿Threadç±»å®ç°çº¿ç¨‹è¦å¥½ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå®ç°Runnableæ¥å£æ¯”ç»§æ‰¿Threadç±»å®ç°çº¿ç¨‹è¦å¥½ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå®ç°Runnableæ¥å£æ¯”ç»§æ‰¿Threadç±»å®ç°çº¿ç¨‹è¦å¥½ï¼Ÿ"></a>ä¸ºä»€ä¹ˆå®ç°<code>Runnable</code>æ¥å£æ¯”ç»§æ‰¿<code>Thread</code>ç±»å®ç°çº¿ç¨‹è¦å¥½ï¼Ÿ</h3><ul>
<li><strong>ä»£ç æ¶æ„</strong>ï¼šå®ç°äº†<code>Runnable</code>ä¸<code>Thread</code>ç±»çš„è§£è€¦ï¼Œ<code>Thread</code>ç±»è´Ÿè´£çº¿ç¨‹å¯åŠ¨å’Œå±æ€§è®¾ç½®ç­‰å†…å®¹ï¼Œæƒè´£åˆ†æ˜ã€‚</li>
<li><strong>æ€§èƒ½</strong>ï¼šä½¿ç”¨å®ç°<code>Runnable</code>æ¥å£çš„æ–¹å¼ï¼Œå¯ä»¥å°†ä»»åŠ¡ç›´æ¥ä¼ å…¥çº¿ç¨‹æ± ï¼Œä½¿ç”¨ä¸€äº›å›ºå®šçš„çº¿ç¨‹æ¥å®Œæˆä»»åŠ¡ï¼Œä¸éœ€è¦æ¯æ¬¡æ–°å»ºé”€æ¯çº¿ç¨‹ï¼Œå¤§å¤§é™ä½äº†æ€§èƒ½å¼€é”€ã€‚</li>
<li><strong>ç±»çš„æ‹“å±•</strong>ï¼šJavaè¯­è¨€ä¸æ”¯æŒåŒç»§æ‰¿ï¼Œå¦‚æœæˆ‘ä»¬çš„ç±»ä¸€æ—¦ç»§æ‰¿äº†<code>Thread</code>ç±»ï¼Œé‚£ä¹ˆå®ƒåç»­å°±æ²¡æœ‰åŠæ³•å†ç»§æ‰¿å…¶ä»–çš„ç±»ï¼Œä¸æ–¹ä¾¿ç±»çš„æ‹“å±•ã€‚</li>
</ul>
<h3 id="å¦‚ä½•æ­£ç¡®åœæ­¢çº¿ç¨‹"><a href="#å¦‚ä½•æ­£ç¡®åœæ­¢çº¿ç¨‹" class="headerlink" title="å¦‚ä½•æ­£ç¡®åœæ­¢çº¿ç¨‹"></a>å¦‚ä½•æ­£ç¡®åœæ­¢çº¿ç¨‹</h3><ul>
<li><p><strong>ä½¿ç”¨<code>interrupt</code>åœæ­¢çº¿ç¨‹</strong>ï¼š</p>
<ul>
<li><code>void interrupt()</code>ï¼šå‘çº¿ç¨‹å‘é€ä¸­æ–­è¯·æ±‚ï¼Œçº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€å°†è¢«è®¾ç½®ä¸º<code>true</code>ã€‚</li>
<li><code>static boolean interrupted()</code>ï¼šæµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­â€”â€”é™æ€æ–¹æ³•â€”â€”ä¼šå°†å½“å‰çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€é‡ç½®ä¸º<code>false</code>ã€‚</li>
<li><code>boolean isInterrupted()</code>ï¼šæµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­â€”â€”ä¸ä¼šæ”¹å˜çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ã€‚</li>
<li>ç¤ºä¾‹ä»£ç ï¼š<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StopThread</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> (!Thread.currentThread().isInterrupted() &amp;&amp; count &lt; <span class="hljs-number">1000</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;count = &quot;</span> + count++);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StopThread</span>());<br>        thread.start();<br>        Thread.sleep(<span class="hljs-number">5</span>);<br>        thread.interrupt();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong><code>sleep</code>æœŸé—´èƒ½å¦æ„Ÿå—åˆ°ä¸­æ–­ï¼Ÿ</strong></p>
<ul>
<li>å¦‚æœçº¿ç¨‹å¤„äº<code>sleep</code>ã€<code>wait</code>ç­‰é˜»å¡çŠ¶æ€ï¼Œä¸”è¢«ä¸­æ–­ï¼Œé‚£ä¹ˆçº¿ç¨‹æ˜¯å¯ä»¥æ„Ÿå—åˆ°ä¸­æ–­ä¿¡å·çš„ï¼Œå¹¶ä¸”ä¼šæŠ›å‡º<code>InterruptedException</code>å¼‚å¸¸ï¼ŒåŒæ—¶æ¸…é™¤ä¸­æ–­ä¿¡å·ï¼Œå°†ä¸­æ–­æ ‡è®°ä½è®¾ç½®æˆ<code>false</code>ã€‚</li>
<li>å¦‚æœæˆ‘ä»¬æƒ³è®©çº¿ç¨‹çš„è°ƒç”¨è€…å¯Ÿè§‰åˆ°è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š<ol>
<li>**<code>catch InterruptedException</code>å¼‚å¸¸åï¼Œå°†ä¸­æ–­çŠ¶æ€å†æ¬¡è®¾ç½®ä¸º<code>true</code>**ï¼ˆä¸æ¨èï¼Œè€¦åˆåº¦é«˜ï¼‰ã€‚</li>
<li><strong><code>throw InterruptedException</code>å¼‚å¸¸å³å¯ï¼Œè°ƒç”¨è€…å†<code>try-catch</code>å³å¯æ•è·å¼‚å¸¸</strong>ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p><strong>ä¸ºä»€ä¹ˆç”¨<code>volatile</code>æ ‡è®°ä½çš„åœæ­¢æ–¹æ³•æ˜¯é”™è¯¯çš„ï¼Ÿ</strong></p>
<ul>
<li><code>volatile</code>è¿™ç§æ–¹æ³•åœ¨æŸäº›ç‰¹æ®Šçš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚çº¿ç¨‹è¢«é•¿æ—¶é—´é˜»å¡çš„æƒ…å†µï¼Œå°±æ— æ³•åŠæ—¶æ„Ÿå—ä¸­æ–­ï¼Œæ‰€ä»¥<code>volatile</code>æ˜¯ä¸å¤Ÿå…¨é¢çš„åœæ­¢çº¿ç¨‹çš„æ–¹æ³•ã€‚</li>
<li>çº¿ç¨‹è¢«é•¿æ—¶é—´é˜»å¡ï¼šå› ä¸ºä½ æ˜¯æ ¹æ®<code>volatile</code>å˜é‡çš„å€¼çš„æƒ…å†µå»åˆ¤æ–­æ˜¯å¦åœæ­¢è¿›ç¨‹ï¼Œä½†æ˜¯å¦‚æœä½ åœ¨å“ªé˜»å¡äº†ï¼Œå³ä½¿é‚£ä¸ªå˜é‡æ”¹å˜äº†ä¹Ÿæ²¡ç”¨ï¼Œ<code>volatile</code>æ ‡è®°ä½åœ¨ç¨‹åºè¿è¡Œåˆ°å¯¹è¯¥å˜é‡è¿›è¡Œåˆ¤æ–­çš„è¯­å¥æ—¶æ‰å¯¹çº¿ç¨‹äº§ç”Ÿå½±å“ã€‚</li>
</ul>
</li>
</ul>
<h3 id="çº¿ç¨‹æ˜¯å¦‚ä½•åœ¨6ç§çŠ¶æ€ä¹‹é—´è½¬æ¢çš„ï¼Ÿ"><a href="#çº¿ç¨‹æ˜¯å¦‚ä½•åœ¨6ç§çŠ¶æ€ä¹‹é—´è½¬æ¢çš„ï¼Ÿ" class="headerlink" title="çº¿ç¨‹æ˜¯å¦‚ä½•åœ¨6ç§çŠ¶æ€ä¹‹é—´è½¬æ¢çš„ï¼Ÿ"></a>çº¿ç¨‹æ˜¯å¦‚ä½•åœ¨6ç§çŠ¶æ€ä¹‹é—´è½¬æ¢çš„ï¼Ÿ</h3><p>çº¿ç¨‹å¯ä»¥æœ‰ä»¥ä¸‹6ç§çŠ¶æ€ï¼š</p>
<ul>
<li>Newï¼ˆæ–°å»ºï¼‰</li>
<li>Runnableï¼ˆå¯è¿è¡Œï¼‰</li>
<li>Blockedï¼ˆé˜»å¡ï¼‰</li>
<li>Waitingï¼ˆç­‰å¾…ï¼‰</li>
<li>Timed Waitingï¼ˆè®¡æ—¶ç­‰å¾…ï¼‰</li>
<li>Terminatedï¼ˆç»ˆæ­¢ï¼‰</li>
</ul>
<h4 id="New"><a href="#New" class="headerlink" title="New"></a>New</h4><p>è¡¨ç¤ºçº¿ç¨‹è¢«åˆ›å»ºä½†å°šæœªå¯åŠ¨çš„çŠ¶æ€ã€‚å½“æˆ‘ä»¬ç”¨<code>new Thread()</code>æ–°å»ºä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œå¦‚æœçº¿ç¨‹æ²¡æœ‰å¼€å§‹è¿è¡Œ<code>start()</code>æ–¹æ³•ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰å¼€å§‹æ‰§è¡Œ<code>run()</code>æ–¹æ³•é‡Œé¢çš„ä»£ç ï¼Œé‚£ä¹ˆæ­¤æ—¶å®ƒçš„çŠ¶æ€å°±æ˜¯<code>New</code>ã€‚è€Œä¸€æ—¦çº¿ç¨‹è°ƒç”¨äº†<code>start()</code>ï¼Œå®ƒçš„çŠ¶æ€å°±ä¼šä»<code>New</code>å˜æˆ<code>Runnable</code>ã€‚</p>
<h4 id="Runnable"><a href="#Runnable" class="headerlink" title="Runnable"></a>Runnable</h4><p>Javaä¸­çš„<code>Runnable</code>çŠ¶æ€å¯¹åº”æ“ä½œç³»ç»Ÿçº¿ç¨‹çŠ¶æ€ä¸­çš„ä¸¤ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯<code>Running</code>å’Œ<code>Ready</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒJavaä¸­å¤„äº<code>Runnable</code>çŠ¶æ€çš„çº¿ç¨‹æœ‰å¯èƒ½æ­£åœ¨æ‰§è¡Œï¼Œä¹Ÿæœ‰å¯èƒ½æ²¡æœ‰æ­£åœ¨æ‰§è¡Œï¼Œæ­£åœ¨ç­‰å¾…è¢«åˆ†é…CPUèµ„æºã€‚</p>
<h4 id="Blocked"><a href="#Blocked" class="headerlink" title="Blocked"></a>Blocked</h4><p>ä»<code>Runnable</code>çŠ¶æ€è¿›å…¥<code>Blocked</code>çŠ¶æ€åªæœ‰ä¸€ç§å¯èƒ½ï¼Œå°±æ˜¯è¿›å…¥<code>synchronized</code>ä¿æŠ¤çš„ä»£ç æ—¶æ²¡æœ‰æŠ¢åˆ°<code>monitor</code>é”ï¼Œæ— è®ºæ˜¯è¿›å…¥<code>synchronized</code>ä»£ç å—ï¼Œè¿˜æ˜¯<code>synchronized</code>æ–¹æ³•ï¼Œéƒ½æ˜¯ä¸€æ ·ã€‚</p>
<h4 id="Waiting"><a href="#Waiting" class="headerlink" title="Waiting"></a>Waiting</h4><p>çº¿ç¨‹è¿›å…¥<code>Waiting</code>çŠ¶æ€æœ‰ä»¥ä¸‹ä¸‰ç§å¯èƒ½æ€§ï¼š</p>
<ul>
<li>æ²¡æœ‰è®¾ç½®<code>Timeout</code>å‚æ•°çš„<code>Object.wait()</code>æ–¹æ³•ã€‚</li>
<li>æ²¡æœ‰è®¾ç½®<code>Timeout</code>å‚æ•°çš„<code>Thread.join()</code>æ–¹æ³•ã€‚</li>
<li><code>LockSupport.park()</code>æ–¹æ³•ã€‚</li>
</ul>
<h4 id="Timed-Waiting"><a href="#Timed-Waiting" class="headerlink" title="Timed Waiting"></a>Timed Waiting</h4><p>çº¿ç¨‹è¿›å…¥<code>Timed Waiting</code>çŠ¶æ€çš„æƒ…å†µï¼š</p>
<ul>
<li>è®¾ç½®äº†æ—¶é—´å‚æ•°çš„<code>Thread.sleep(long millis)</code>æ–¹æ³•ã€‚</li>
<li>è®¾ç½®äº†æ—¶é—´å‚æ•°çš„<code>Object.wait(long timeout)</code>æ–¹æ³•ã€‚</li>
<li>è®¾ç½®äº†æ—¶é—´å‚æ•°çš„<code>Thread.join(long millis)</code>æ–¹æ³•ã€‚</li>
<li>è®¾ç½®äº†æ—¶é—´å‚æ•°çš„<code>LockSupport.parkNanos(long nanos)</code>æ–¹æ³•å’Œ<code>LockSupport.parkUntil(long deadline)</code>æ–¹æ³•ã€‚</li>
</ul>
<h4 id="Terminated"><a href="#Terminated" class="headerlink" title="Terminated"></a>Terminated</h4><ul>
<li><code>run()</code>æ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œçº¿ç¨‹æ­£å¸¸é€€å‡ºã€‚</li>
<li>å‡ºç°ä¸€ä¸ªæ²¡æœ‰æ•è·çš„å¼‚å¸¸ï¼Œç»ˆæ­¢äº†<code>run()</code>æ–¹æ³•ï¼Œæœ€ç»ˆå¯¼è‡´æ„å¤–ç»ˆæ­¢ã€‚</li>
</ul>
<h3 id="çº¿ç¨‹çŠ¶æ€è½¬æ¢"><a href="#çº¿ç¨‹çŠ¶æ€è½¬æ¢" class="headerlink" title="çº¿ç¨‹çŠ¶æ€è½¬æ¢"></a>çº¿ç¨‹çŠ¶æ€è½¬æ¢</h3><ul>
<li><strong>BlockedçŠ¶æ€è¿›å…¥RunnableçŠ¶æ€</strong>ï¼šè¦æ±‚çº¿ç¨‹è·å–<code>monitor</code>é”ã€‚</li>
<li><strong>WaitingçŠ¶æ€æµè½¬åˆ°å…¶ä»–çŠ¶æ€</strong>ï¼š<ul>
<li>å¦‚æœæ‰§è¡Œäº†<code>LockSupport.unpark()</code>ï¼Œæˆ–è€…<code>join</code>çš„çº¿ç¨‹è¿è¡Œç»“æŸï¼Œæˆ–è€…è¢«ä¸­æ–­æ—¶ï¼Œå¯ä»¥è¿›å…¥<code>Runnable</code>çŠ¶æ€ã€‚</li>
<li>å¦‚æœå…¶ä»–çº¿ç¨‹è°ƒç”¨<code>notify()</code>æˆ–<code>notifyAll()</code>æ¥å”¤é†’å®ƒï¼Œå®ƒä¼šç›´æ¥è¿›å…¥<code>Blocked</code>çŠ¶æ€ï¼Œå› ä¸ºå”¤é†’<code>Waiting</code>çº¿ç¨‹çš„çº¿ç¨‹å¦‚æœè°ƒç”¨<code>notify()</code>æˆ–<code>notifyAll()</code>ï¼Œè¦æ±‚å¿…é¡»é¦–å…ˆæŒæœ‰è¯¥<code>monitor</code>é”ï¼Œæ‰€ä»¥å¤„äº<code>Waiting</code>çŠ¶æ€çš„çº¿ç¨‹è¢«å”¤é†’æ—¶æ‹¿ä¸åˆ°è¯¥é”ï¼Œå°±ä¼šè¿›å…¥<code>Blocked</code>çŠ¶æ€ï¼Œç›´åˆ°æ‰§è¡Œäº†<code>notify()</code>&#x2F;<code>notifyAll()</code>çš„å”¤é†’å®ƒçš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•å¹¶é‡Šæ”¾<code>monitor</code>é”ï¼Œæ‰å¯èƒ½è½®åˆ°å®ƒå»æŠ¢å¤ºè¿™æŠŠé”ï¼Œå¦‚æœå®ƒèƒ½æŠ¢åˆ°ï¼Œå°±ä¼šä»<code>Blocked</code>çŠ¶æ€å›åˆ°<code>Runnable</code>çŠ¶æ€ã€‚</li>
</ul>
</li>
<li><strong>Timed WaitingçŠ¶æ€åŒç†</strong>ï¼šåªä¸è¿‡æ˜¯åœ¨è§„å®šæ—¶é—´èŒƒå›´å†…ä¸<code>Waiting</code>ç›¸åŒã€‚</li>
</ul>
<h3 id="waitã€notifyã€notifyAllæ–¹æ³•çš„ä½¿ç”¨æ³¨æ„äº‹é¡¹"><a href="#waitã€notifyã€notifyAllæ–¹æ³•çš„ä½¿ç”¨æ³¨æ„äº‹é¡¹" class="headerlink" title="waitã€notifyã€notifyAllæ–¹æ³•çš„ä½¿ç”¨æ³¨æ„äº‹é¡¹"></a><code>wait</code>ã€<code>notify</code>ã€<code>notifyAll</code>æ–¹æ³•çš„ä½¿ç”¨æ³¨æ„äº‹é¡¹</h3><ol>
<li><strong>ä¸ºä»€ä¹ˆ<code>wait</code>å¿…é¡»åœ¨<code>synchronized</code>ä¿æŠ¤çš„åŒæ­¥ä»£ç ä¸­ä½¿ç”¨ï¼Ÿ</strong><ul>
<li>å¦‚æœ<code>notify</code>æ–¹æ³•åœ¨<code>buffer.isEmpty()</code>å’Œ<code>wait</code>æ–¹æ³•ä¹‹é—´è¢«è°ƒç”¨ï¼Œç¨‹åºå°±ä¼šä¸€ç›´è¢«<code>wait</code>è€Œä¸ä¼šè¢«å”¤é†’ã€‚</li>
</ul>
</li>
<li><strong>ä¸ºä»€ä¹ˆ<code>wait</code>&#x2F;<code>notify</code>&#x2F;<code>notifyAll</code>è¢«å®šä¹‰åœ¨<code>Object</code>ç±»ä¸­ï¼Œè€Œ<code>sleep</code>å®šä¹‰åœ¨<code>Thread</code>ç±»ä¸­ï¼Ÿ</strong><ul>
<li>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€æŠŠ<code>monitor</code>ç›‘è§†å™¨é”ï¼Œ<code>wait</code>&#x2F;<code>notify</code>&#x2F;<code>notifyAll</code>æ˜¯é”çº§åˆ«çš„æ“ä½œï¼Œå®ƒä»¬çš„é”å±äºå¯¹è±¡ï¼Œæ‰€ä»¥æŠŠå®ƒä»¬å®šä¹‰åœ¨<code>Object</code>ç±»ä¸­æ˜¯æœ€åˆé€‚ã€‚</li>
</ul>
</li>
<li><strong><code>wait</code>&#x2F;<code>notify</code>å’Œ<code>sleep</code>æ–¹æ³•çš„å¼‚åŒï¼Ÿ</strong><ul>
<li><strong>ç›¸åŒç‚¹</strong>ï¼š<ul>
<li>å®ƒä»¬éƒ½å¯ä»¥è®©çº¿ç¨‹é˜»å¡ã€‚</li>
<li>å®ƒä»¬éƒ½å¯ä»¥å“åº”<code>interrupt</code>ä¸­æ–­ï¼šåœ¨ç­‰å¾…çš„è¿‡ç¨‹ä¸­å¦‚æœæ”¶åˆ°ä¸­æ–­ä¿¡å·ï¼Œéƒ½å¯ä»¥è¿›è¡Œå“åº”ï¼Œå¹¶æŠ›å‡º<code>InterruptedException</code>å¼‚å¸¸ã€‚</li>
</ul>
</li>
<li><strong>ä¸åŒç‚¹</strong>ï¼š<ul>
<li><code>wait</code>æ–¹æ³•å¿…é¡»åœ¨<code>synchronized</code>ä¿æŠ¤çš„ä»£ç ä¸­ä½¿ç”¨ï¼Œè€Œ<code>sleep</code>æ–¹æ³•å¹¶æ²¡æœ‰è¿™ä¸ªè¦æ±‚ã€‚</li>
<li>åœ¨åŒæ­¥ä»£ç ä¸­æ‰§è¡Œ<code>sleep</code>æ–¹æ³•æ—¶ï¼Œå¹¶ä¸ä¼šé‡Šæ”¾<code>monitor</code>é”ï¼Œä½†æ‰§è¡Œ<code>wait</code>æ–¹æ³•æ—¶ä¼šä¸»åŠ¨é‡Šæ”¾<code>monitor</code>é”ã€‚</li>
<li><code>sleep</code>æ–¹æ³•ä¸­ä¼šè¦æ±‚å¿…é¡»å®šä¹‰ä¸€ä¸ªæ—¶é—´ï¼Œæ—¶é—´åˆ°æœŸåä¼šä¸»åŠ¨æ¢å¤ï¼Œè€Œå¯¹äºæ²¡æœ‰å‚æ•°çš„<code>wait</code>æ–¹æ³•è€Œè¨€ï¼Œæ„å‘³ç€æ°¸ä¹…ç­‰å¾…ï¼Œç›´åˆ°è¢«ä¸­æ–­æˆ–è¢«å”¤é†’æ‰èƒ½æ¢å¤ï¼Œå®ƒå¹¶ä¸ä¼šä¸»åŠ¨æ¢å¤ã€‚</li>
<li><code>wait</code>&#x2F;<code>notify</code>æ˜¯<code>Object</code>ç±»çš„æ–¹æ³•ï¼Œè€Œ<code>sleep</code>æ˜¯<code>Thread</code>ç±»çš„æ–¹æ³•ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="ä¸‰ç±»çº¿ç¨‹å®‰å…¨é—®é¢˜"><a href="#ä¸‰ç±»çº¿ç¨‹å®‰å…¨é—®é¢˜" class="headerlink" title="ä¸‰ç±»çº¿ç¨‹å®‰å…¨é—®é¢˜"></a>ä¸‰ç±»çº¿ç¨‹å®‰å…¨é—®é¢˜</h3><ul>
<li><strong>è¿è¡Œç»“æœé”™è¯¯</strong>ï¼šå¤šçº¿ç¨‹åŒæ—¶æ“ä½œä¸€ä¸ªå˜é‡å¯¼è‡´çš„è¿è¡Œç»“æœé”™è¯¯ã€‚</li>
<li><strong>å‘å¸ƒå’Œåˆå§‹åŒ–å¯¼è‡´çº¿ç¨‹å®‰å…¨é—®é¢˜</strong>ï¼š<ul>
<li>ç¤ºä¾‹ä»£ç ï¼š<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WrongInit</span> &#123;<br>    <span class="hljs-keyword">private</span> Map&lt;Integer, String&gt; students;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">WrongInit</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>                students = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>                students.put(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;ç‹å°ç¾&quot;</span>);<br>                students.put(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;é’±äºŒå®&quot;</span>);<br>                students.put(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;å‘¨ä¸‰&quot;</span>);<br>                students.put(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;èµµå››&quot;</span>);<br>            &#125;<br>        &#125;).start();<br>    &#125;<br>    <span class="hljs-keyword">public</span> Map&lt;Integer, String&gt; <span class="hljs-title function_">getStudents</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> students;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-type">WrongInit</span> <span class="hljs-variable">multiThreadsError6</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WrongInit</span>();<br>        System.out.println(multiThreadsError6.getStudents().get(<span class="hljs-number">1</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li>ä¸Šè¿°ä»£ç ä¸­åˆ›å»º<code>multiThreadsError6</code>å¯¹è±¡åç«‹åˆ»å°±è¯•å›¾è¾“å‡º<code>student</code>çš„ä¿¡æ¯ï¼Œè€Œå®é™…ä¸Šæ­¤æ—¶çº¿ç¨‹å¯èƒ½è¿˜æ²¡å¯åŠ¨å®Œæ¯•ï¼Œå¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</li>
</ul>
</li>
<li><strong>æ´»è·ƒæ€§é—®é¢˜</strong>ï¼š<ul>
<li><strong>æ­»é”</strong>ï¼šå¤šä¸ªçº¿ç¨‹äº’ç›¸ç­‰å¾…å¯¹æ–¹æŒæœ‰çš„èµ„æºï¼Œå¯¼è‡´ç¨‹åºæ— æ³•ç»§ç»­æ‰§è¡Œã€‚</li>
<li><strong>æ´»é”</strong>ï¼šçº¿ç¨‹ä¸€ç›´å¤„äºå¿™ç¢ŒçŠ¶æ€ï¼Œä½†ç¨‹åºå§‹ç»ˆå¾—ä¸åˆ°ç»“æœã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ä¸­æŸä¸ªæ¶ˆæ¯ç”±äºè‡ªèº«è¢«å†™é”™å¯¼è‡´ä¸èƒ½è¢«æ­£ç¡®å¤„ç†ï¼Œé˜Ÿåˆ—çš„é‡è¯•æœºåˆ¶ä¼šé‡æ–°æŠŠå®ƒæ”¾åœ¨é˜Ÿåˆ—å¤´è¿›è¡Œä¼˜å…ˆé‡è¯•å¤„ç†ï¼Œä½†è¿™ä¸ªæ¶ˆæ¯æœ¬èº«æ— è®ºè¢«æ‰§è¡Œå¤šå°‘æ¬¡éƒ½æ— æ³•è¢«æ­£ç¡®å¤„ç†ï¼Œæœ€ç»ˆå¯¼è‡´çº¿ç¨‹ä¸€ç›´å¤„äºå¿™ç¢ŒçŠ¶æ€ï¼Œä½†ç¨‹åºå§‹ç»ˆå¾—ä¸åˆ°ç»“æœã€‚</li>
<li><strong>é¥¥é¥¿</strong>ï¼šçº¿ç¨‹éœ€è¦æŸäº›èµ„æºæ—¶å§‹ç»ˆå¾—ä¸åˆ°ï¼Œå°¤å…¶æ˜¯CPUèµ„æºï¼Œå°±ä¼šå¯¼è‡´çº¿ç¨‹ä¸€ç›´ä¸èƒ½è¿è¡Œè€Œäº§ç”Ÿçš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œçº¿ç¨‹ä¼˜å…ˆçº§è¿‡ä½ï¼Œæˆ–è€…æŸä¸ªçº¿ç¨‹å§‹ç»ˆæŒæœ‰æŸä¸ªæ–‡ä»¶çš„é”ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•è·å–èµ„æºã€‚</li>
</ul>
</li>
</ul>
<h3 id="å“ªäº›åœºæ™¯éœ€è¦é¢å¤–æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ"><a href="#å“ªäº›åœºæ™¯éœ€è¦é¢å¤–æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ" class="headerlink" title="å“ªäº›åœºæ™¯éœ€è¦é¢å¤–æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ"></a>å“ªäº›åœºæ™¯éœ€è¦é¢å¤–æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ</h3><ol>
<li><strong>è®¿é—®å…±äº«å˜é‡æˆ–èµ„æº</strong>ï¼šä¾‹å¦‚è®¿é—®å…±äº«å¯¹è±¡çš„å±æ€§ã€è®¿é—®<code>static</code>é™æ€å˜é‡ã€è®¿é—®å…±äº«çš„ç¼“å­˜ç­‰ã€‚</li>
<li><strong>ä¾èµ–æ—¶åºçš„æ“ä½œ</strong>ï¼šä¾‹å¦‚å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä»¥ä¸‹ä»£ç ï¼š<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (x == <span class="hljs-number">1</span>) &#123;<br>    x = <span class="hljs-number">7</span> * x;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><strong>ä¸åŒæ•°æ®ä¹‹é—´å­˜åœ¨ç»‘å®šå…³ç³»</strong>ï¼šä¾‹å¦‚IPå’Œç«¯å£å·ï¼Œéœ€è¦åŒæ—¶æ›´æ–°ã€‚</li>
<li><strong>å¯¹æ–¹æ²¡æœ‰å£°æ˜è‡ªå·±æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong>ï¼šä¾‹å¦‚<code>ArrayList</code>ï¼Œéœ€è¦åœ¨å¤–éƒ¨æ‰‹åŠ¨ç”¨<code>synchronized</code>ç­‰æ–¹å¼ä¿è¯å¹¶å‘å®‰å…¨ã€‚</li>
</ol>
<h3 id="ä¸ºä»€ä¹ˆå¤šçº¿ç¨‹ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå¤šçº¿ç¨‹ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå¤šçº¿ç¨‹ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Ÿ"></a>ä¸ºä»€ä¹ˆå¤šçº¿ç¨‹ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Ÿ</h3><ol>
<li><strong>è°ƒåº¦å¼€é”€</strong>ï¼š<ul>
<li><strong>ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ï¼šçº¿ç¨‹æ•°å¾€å¾€å¤§äºCPUæ ¸å¿ƒæ•°ï¼Œæ“ä½œç³»ç»Ÿä¼šæŒ‰ç…§è°ƒåº¦ç®—æ³•ç»™æ¯ä¸ªçº¿ç¨‹åˆ†é…æ—¶é—´ç‰‡ï¼Œçº¿ç¨‹è°ƒåº¦ä¼šå¼•èµ·ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€è¾ƒå¤§ã€‚</li>
<li><strong>ç¼“å­˜å¤±æ•ˆ</strong>ï¼šçº¿ç¨‹è°ƒåº¦åï¼ŒCPUéœ€è¦é‡æ–°ç¼“å­˜æ–°çº¿ç¨‹çš„æ•°æ®ï¼Œè¿™ä¹Ÿä¼šå¸¦æ¥ä¸€å®šçš„å¼€é”€ã€‚</li>
</ul>
</li>
<li><strong>åä½œå¼€é”€</strong>ï¼š<ul>
<li>ä¸ºäº†ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œéœ€è¦ç¦æ­¢ç¼–è¯‘å™¨å’ŒCPUå¯¹å…±äº«æ•°æ®è¿›è¡Œé‡æ’åºç­‰ä¼˜åŒ–ï¼Œè¿˜éœ€è¦é¢‘ç¹åœ°å°†çº¿ç¨‹å·¥ä½œå†…å­˜çš„æ•°æ®åˆ·æ–°åˆ°ä¸»å­˜ä¸­ï¼Œç„¶åå†ä»ä¸»å­˜åˆ·æ–°åˆ°å…¶ä»–çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ï¼Œè¿™ä¼šé™ä½æ€§èƒ½ã€‚</li>
</ul>
</li>
</ol>
<h3 id="ä½¿ç”¨çº¿ç¨‹æ± æ¯”æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹å¥½åœ¨å“ªé‡Œï¼Ÿ"><a href="#ä½¿ç”¨çº¿ç¨‹æ± æ¯”æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹å¥½åœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="ä½¿ç”¨çº¿ç¨‹æ± æ¯”æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹å¥½åœ¨å“ªé‡Œï¼Ÿ"></a>ä½¿ç”¨çº¿ç¨‹æ± æ¯”æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹å¥½åœ¨å“ªé‡Œï¼Ÿ</h3><ol>
<li><strong>è§£å†³çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸçš„ç³»ç»Ÿå¼€é”€é—®é¢˜</strong>ï¼šçº¿ç¨‹æ± ç”¨ä¸€äº›å›ºå®šçš„çº¿ç¨‹ä¸€ç›´ä¿æŒå·¥ä½œçŠ¶æ€å¹¶åå¤æ‰§è¡Œä»»åŠ¡ã€‚</li>
<li><strong>ç»Ÿç­¹å†…å­˜å’ŒCPUçš„ä½¿ç”¨</strong>ï¼šçº¿ç¨‹æ± ä¼šæ ¹æ®é…ç½®å’Œä»»åŠ¡æ•°é‡çµæ´»åœ°æ§åˆ¶çº¿ç¨‹æ•°é‡ï¼Œé¿å…çº¿ç¨‹è¿‡å¤šå¯¼è‡´å†…å­˜æº¢å‡ºï¼Œæˆ–çº¿ç¨‹å¤ªå°‘å¯¼è‡´CPUèµ„æºæµªè´¹ã€‚</li>
<li><strong>ç»Ÿä¸€ç®¡ç†èµ„æº</strong>ï¼šçº¿ç¨‹æ± å¯ä»¥ç»Ÿä¸€ç®¡ç†ä»»åŠ¡é˜Ÿåˆ—å’Œçº¿ç¨‹ï¼Œå¯ä»¥ç»Ÿä¸€å¼€å§‹æˆ–ç»“æŸä»»åŠ¡ï¼Œä¾¿äºæ•°æ®ç»Ÿè®¡ã€‚</li>
</ol>
<h3 id="çº¿ç¨‹æ± çš„å„ä¸ªå‚æ•°çš„å«ä¹‰"><a href="#çº¿ç¨‹æ± çš„å„ä¸ªå‚æ•°çš„å«ä¹‰" class="headerlink" title="çº¿ç¨‹æ± çš„å„ä¸ªå‚æ•°çš„å«ä¹‰"></a>çº¿ç¨‹æ± çš„å„ä¸ªå‚æ•°çš„å«ä¹‰</h3><ul>
<li>**<code>corePoolSize</code>**ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ± åˆå§‹åŒ–æ—¶çº¿ç¨‹æ•°é»˜è®¤ä¸º0ï¼Œå½“æœ‰æ–°çš„ä»»åŠ¡æäº¤åï¼Œä¼šåˆ›å»ºæ–°çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œæ­¤åçº¿ç¨‹æ•°é€šå¸¸ä¸ä¼šå†å°äº<code>corePoolSize</code>ã€‚</li>
<li>**<code>maximumPoolSize</code>**ï¼šæœ€å¤§çº¿ç¨‹æ•°ï¼Œå½“ä»»åŠ¡é˜Ÿåˆ—æ»¡äº†ä¹‹åï¼Œçº¿ç¨‹æ± ä¼šè¿›ä¸€æ­¥åˆ›å»ºæ–°çº¿ç¨‹ï¼Œæœ€å¤šå¯ä»¥è¾¾åˆ°<code>maximumPoolSize</code>ã€‚</li>
<li><strong><code>keepAliveTime</code> + æ—¶é—´å•ä½</strong>ï¼šå½“çº¿ç¨‹æ± ä¸­çº¿ç¨‹æ•°é‡å¤šäºæ ¸å¿ƒçº¿ç¨‹æ•°æ—¶ï¼Œè€Œæ­¤æ—¶åˆæ²¡æœ‰ä»»åŠ¡å¯åšï¼Œçº¿ç¨‹æ± å°±ä¼šæ£€æµ‹çº¿ç¨‹çš„<code>keepAliveTime</code>ï¼Œå¦‚æœè¶…è¿‡è§„å®šçš„æ—¶é—´ï¼Œæ— äº‹å¯åšçš„çº¿ç¨‹å°±ä¼šè¢«é”€æ¯ã€‚</li>
<li>**<code>ThreadFactory</code>**ï¼šçº¿ç¨‹å·¥å‚ï¼Œç”¨äºåˆ›å»ºçº¿ç¨‹ã€‚å¯ä»¥é€‰æ‹©ä½¿ç”¨é»˜è®¤çš„çº¿ç¨‹å·¥å‚ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©è‡ªå·±å®šåˆ¶çº¿ç¨‹å·¥å‚ï¼Œä»¥æ–¹ä¾¿ç»™çº¿ç¨‹è‡ªå®šä¹‰å‘½åã€‚</li>
<li>**<code>workQueue</code>**ï¼šä»»åŠ¡çš„é˜»å¡é˜Ÿåˆ—ï¼Œç”¨äºå­˜å‚¨æäº¤çš„ä»»åŠ¡ã€‚</li>
<li>**<code>handler</code>**ï¼šæ‹’ç»ç­–ç•¥ï¼Œå½“çº¿ç¨‹æ± æ— æ³•å¤„ç†æ–°ä»»åŠ¡æ—¶ï¼Œä¼šæ ¹æ®æ‹’ç»ç­–ç•¥è¿›è¡Œå¤„ç†ã€‚</li>
</ul>
<h3 id="çº¿ç¨‹æ± æœ‰å“ª4ç§æ‹’ç»ç­–ç•¥ï¼Ÿ"><a href="#çº¿ç¨‹æ± æœ‰å“ª4ç§æ‹’ç»ç­–ç•¥ï¼Ÿ" class="headerlink" title="çº¿ç¨‹æ± æœ‰å“ª4ç§æ‹’ç»ç­–ç•¥ï¼Ÿ"></a>çº¿ç¨‹æ± æœ‰å“ª4ç§æ‹’ç»ç­–ç•¥ï¼Ÿ</h3><ol>
<li>**<code>AbortPolicy</code>**ï¼šæ‹’ç»ä»»åŠ¡æ—¶æŠ›å‡º<code>RejectedExecutionException</code>å¼‚å¸¸ã€‚</li>
<li>**<code>DiscardPolicy</code>**ï¼šç›´æ¥ä¸¢å¼ƒä»»åŠ¡ï¼Œä¸é€šçŸ¥ã€‚</li>
<li>**<code>DiscardOldestPolicy</code>**ï¼šä¸¢å¼ƒé˜Ÿåˆ—ä¸­å­˜æ´»æ—¶é—´æœ€é•¿çš„ä»»åŠ¡ï¼Œä¸ºæ–°ä»»åŠ¡è…¾å‡ºç©ºé—´ã€‚</li>
<li>**<code>CallerRunsPolicy</code>**ï¼šå°†ä»»åŠ¡äº¤ç”±æäº¤ä»»åŠ¡çš„çº¿ç¨‹æ‰§è¡Œã€‚</li>
</ol>
<h3 id="æœ‰å“ª6ç§å¸¸è§çš„çº¿ç¨‹æ± ï¼Ÿä»€ä¹ˆæ˜¯Java-8çš„ForkJoinPoolï¼Ÿ"><a href="#æœ‰å“ª6ç§å¸¸è§çš„çº¿ç¨‹æ± ï¼Ÿä»€ä¹ˆæ˜¯Java-8çš„ForkJoinPoolï¼Ÿ" class="headerlink" title="æœ‰å“ª6ç§å¸¸è§çš„çº¿ç¨‹æ± ï¼Ÿä»€ä¹ˆæ˜¯Java 8çš„ForkJoinPoolï¼Ÿ"></a>æœ‰å“ª6ç§å¸¸è§çš„çº¿ç¨‹æ± ï¼Ÿä»€ä¹ˆæ˜¯Java 8çš„<code>ForkJoinPool</code>ï¼Ÿ</h3><ol>
<li>**<code>FixedThreadPool</code>**ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°ç›¸åŒã€‚</li>
<li>**<code>CachedThreadPool</code>**ï¼šçº¿ç¨‹æ•°å¯ä»¥æ— é™å¢åŠ ï¼Œä½†ç©ºé—²çº¿ç¨‹ä¼šè¢«å›æ”¶ã€‚</li>
<li>**<code>ScheduledThreadPool</code>**ï¼šæ”¯æŒå®šæ—¶æˆ–å‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡ã€‚</li>
<li>**<code>SingleThreadExecutor</code>**ï¼šä½¿ç”¨å”¯ä¸€çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ã€‚</li>
<li>**<code>SingleThreadScheduledExecutor</code>**ï¼š<code>ScheduledThreadPool</code>çš„æ ¸å¿ƒçº¿ç¨‹æ•°è®¾ç½®ä¸º1ã€‚</li>
<li>**<code>ForkJoinPool</code>**ï¼šé€‚åˆé€’å½’åœºæ™¯ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„åŒç«¯é˜Ÿåˆ—æ¥å­˜å‚¨åˆ†è£‚å‡ºæ¥çš„å­ä»»åŠ¡ã€‚</li>
</ol>
<h3 id="çº¿ç¨‹æ± å¸¸ç”¨çš„é˜»å¡é˜Ÿåˆ—æœ‰å“ªäº›ï¼Ÿ"><a href="#çº¿ç¨‹æ± å¸¸ç”¨çš„é˜»å¡é˜Ÿåˆ—æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="çº¿ç¨‹æ± å¸¸ç”¨çš„é˜»å¡é˜Ÿåˆ—æœ‰å“ªäº›ï¼Ÿ"></a>çº¿ç¨‹æ± å¸¸ç”¨çš„é˜»å¡é˜Ÿåˆ—æœ‰å“ªäº›ï¼Ÿ</h3><ol>
<li>**<code>LinkedBlockingQueue</code>**ï¼šå¯¹åº”<code>FixedThreadPool</code>å’Œ<code>SingleThreadExecutor</code>ï¼Œå®¹é‡ä¸º<code>Integer.MAX_VALUE</code>ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯æ— ç•Œé˜Ÿåˆ—ã€‚</li>
<li>**<code>SynchronousQueue</code>**ï¼šå¯¹åº”<code>CachedThreadPool</code>ï¼Œé˜Ÿåˆ—å®¹é‡ä¸º0ï¼Œå®é™…ä¸å­˜å‚¨ä»»ä½•ä»»åŠ¡ï¼Œåªè´Ÿè´£å¯¹ä»»åŠ¡è¿›è¡Œä¸­è½¬å’Œä¼ é€’ã€‚</li>
<li>**<code>DelayedWorkQueue</code>**ï¼šå¯¹åº”<code>ScheduledThreadPool</code>å’Œ<code>SingleThreadScheduledExecutor</code>ï¼Œå†…éƒ¨å…ƒç´ æŒ‰ç…§å»¶è¿Ÿæ—¶é—´é•¿çŸ­æ’åºã€‚</li>
</ol>
<h3 id="ä¸ºä»€ä¹ˆä¸åº”è¯¥è‡ªåŠ¨åˆ›å»ºçº¿ç¨‹æ± ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¸åº”è¯¥è‡ªåŠ¨åˆ›å»ºçº¿ç¨‹æ± ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¸åº”è¯¥è‡ªåŠ¨åˆ›å»ºçº¿ç¨‹æ± ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¸åº”è¯¥è‡ªåŠ¨åˆ›å»ºçº¿ç¨‹æ± ï¼Ÿ</h3><p>å› ä¸ºä¸Šè¿°çš„çº¿ç¨‹æ± ä¸­ï¼Œè¦ä¹ˆçº¿ç¨‹æ²¡æœ‰çº¦æŸï¼Œå¯ä»¥æ— é™å¤šï¼›è¦ä¹ˆé˜Ÿåˆ—æ²¡æœ‰çº¦æŸï¼Œå¯ä»¥æ— é™å¤§ã€‚å½“é¢å¯¹éš¾äºå¤„ç†çš„å¤§é‡ä»»åŠ¡æ—¶ï¼š</p>
<ul>
<li>çº¿ç¨‹åˆ›å»ºå¾—å¤ªå¤šï¼Œä¼šå¯¼è‡´è¶…è¿‡æ“ä½œç³»ç»Ÿçš„ä¸Šé™è€Œæ— æ³•åˆ›å»ºæ–°çº¿ç¨‹ï¼Œæˆ–è€…å¯¼è‡´å†…å­˜ä¸è¶³ã€‚</li>
<li>é˜Ÿåˆ—ä¸­å †ç§¯çš„ä»»åŠ¡å¤ªå¤šï¼Œä¼šå¯¼è‡´å¤§é‡å †ç§¯çš„ä»»åŠ¡å ç”¨å¤§é‡å†…å­˜ï¼Œå¹¶å‘ç”Ÿ<code>OOM</code>ï¼ˆ<code>OutOfMemoryError</code>ï¼‰ï¼Œè¿™å‡ ä¹ä¼šå½±å“åˆ°æ•´ä¸ªç¨‹åºï¼Œä¼šé€ æˆå¾ˆä¸¥é‡çš„åæœã€‚</li>
</ul>
<h3 id="åˆé€‚çš„çº¿ç¨‹æ•°é‡æ˜¯å¤šå°‘ï¼ŸCPUæ ¸å¿ƒæ•°å’Œçº¿ç¨‹æ•°çš„å…³ç³»ï¼Ÿ"><a href="#åˆé€‚çš„çº¿ç¨‹æ•°é‡æ˜¯å¤šå°‘ï¼ŸCPUæ ¸å¿ƒæ•°å’Œçº¿ç¨‹æ•°çš„å…³ç³»ï¼Ÿ" class="headerlink" title="åˆé€‚çš„çº¿ç¨‹æ•°é‡æ˜¯å¤šå°‘ï¼ŸCPUæ ¸å¿ƒæ•°å’Œçº¿ç¨‹æ•°çš„å…³ç³»ï¼Ÿ"></a>åˆé€‚çš„çº¿ç¨‹æ•°é‡æ˜¯å¤šå°‘ï¼ŸCPUæ ¸å¿ƒæ•°å’Œçº¿ç¨‹æ•°çš„å…³ç³»ï¼Ÿ</h3><p>è°ƒæ•´çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å……åˆ†å¹¶åˆç†åœ°ä½¿ç”¨CPUå’Œå†…å­˜ç­‰èµ„æºï¼Œä»è€Œæœ€å¤§é™åº¦åœ°æé«˜ç¨‹åºçš„æ€§èƒ½ã€‚</p>
<ul>
<li><strong>CPUå¯†é›†å‹ä»»åŠ¡</strong>ï¼šæœ€ä½³çš„çº¿ç¨‹æ•°ä¸ºCPUæ ¸å¿ƒæ•°çš„1~2å€ã€‚å¦‚æœè®¾ç½®è¿‡å¤šçš„çº¿ç¨‹æ•°ï¼Œä¼šå¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢å¢åŠ ï¼Œæ€§èƒ½ä¸‹é™ã€‚</li>
<li><strong>IOå¯†é›†å‹ä»»åŠ¡</strong>ï¼šçº¿ç¨‹æ•°å¯ä»¥å¤§äºCPUæ ¸å¿ƒæ•°å¾ˆå¤šå€ï¼Œå› ä¸ºIOæ“ä½œè¾ƒæ…¢ï¼Œéœ€è¦æ›´å¤šçš„çº¿ç¨‹æ¥å……åˆ†åˆ©ç”¨CPUèµ„æºã€‚</li>
</ul>
<h3 id="å¦‚ä½•æ ¹æ®å®é™…éœ€è¦ï¼Œå®šåˆ¶è‡ªå·±çš„çº¿ç¨‹æ± ï¼Ÿ"><a href="#å¦‚ä½•æ ¹æ®å®é™…éœ€è¦ï¼Œå®šåˆ¶è‡ªå·±çš„çº¿ç¨‹æ± ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ ¹æ®å®é™…éœ€è¦ï¼Œå®šåˆ¶è‡ªå·±çš„çº¿ç¨‹æ± ï¼Ÿ"></a>å¦‚ä½•æ ¹æ®å®é™…éœ€è¦ï¼Œå®šåˆ¶è‡ªå·±çš„çº¿ç¨‹æ± ï¼Ÿ</h3><ul>
<li><strong>æ ¸å¿ƒçº¿ç¨‹æ•°</strong>ï¼šçº¿ç¨‹çš„å¹³å‡å·¥ä½œæ—¶é—´æ‰€å æ¯”ä¾‹è¶Šé«˜ï¼Œå°±éœ€è¦è¶Šå°‘çš„çº¿ç¨‹ï¼›çº¿ç¨‹çš„å¹³å‡ç­‰å¾…æ—¶é—´æ‰€å æ¯”ä¾‹è¶Šé«˜ï¼Œå°±éœ€è¦è¶Šå¤šçš„çº¿ç¨‹ã€‚</li>
<li><strong>æœ€å¤§çº¿ç¨‹æ•°</strong>ï¼šå¦‚æœä»»åŠ¡ç±»å‹ä¸å›ºå®šï¼Œå¯ä»¥è®¾ç½®ä¸º<code>corePoolSize</code>çš„å‡ å€ã€‚æ›´å¥½çš„åŠæ³•æ˜¯ç”¨ä¸åŒçš„çº¿ç¨‹æ± æ‰§è¡Œä¸åŒç±»å‹çš„ä»»åŠ¡ã€‚</li>
<li><strong>é˜»å¡é˜Ÿåˆ—</strong>ï¼šå¯ä»¥é€‰æ‹©<code>ArrayBlockingQueue</code>ç­‰æœ‰é™å®¹é‡çš„é˜Ÿåˆ—ï¼Œé˜²æ­¢èµ„æºè€—å°½ã€‚</li>
<li><strong>çº¿ç¨‹å·¥å‚</strong>ï¼šå¯ä»¥ä¼ å…¥è‡ªå®šä¹‰çš„çº¿ç¨‹å·¥å‚ï¼Œä»¥ä¾¿æ ¹æ®ä¸šåŠ¡ä¿¡æ¯è¿›è¡Œå‘½åï¼Œæ–¹ä¾¿åç»­å®šä½é—®é¢˜ä»£ç ã€‚</li>
<li><strong>æ‹’ç»ç­–ç•¥</strong>ï¼šå¯ä»¥é€šè¿‡å®ç°<code>RejectedExecutionHandler</code>æ¥å£æ¥å®ç°è‡ªå·±çš„æ‹’ç»ç­–ç•¥ã€‚</li>
</ul>
<h3 id="å¦‚ä½•æ­£ç¡®åœ°å…³é—­çº¿ç¨‹æ± ï¼Ÿshutdownå’ŒshutdownNowçš„åŒºåˆ«ï¼Ÿ"><a href="#å¦‚ä½•æ­£ç¡®åœ°å…³é—­çº¿ç¨‹æ± ï¼Ÿshutdownå’ŒshutdownNowçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ­£ç¡®åœ°å…³é—­çº¿ç¨‹æ± ï¼Ÿshutdownå’ŒshutdownNowçš„åŒºåˆ«ï¼Ÿ"></a>å¦‚ä½•æ­£ç¡®åœ°å…³é—­çº¿ç¨‹æ± ï¼Ÿ<code>shutdown</code>å’Œ<code>shutdownNow</code>çš„åŒºåˆ«ï¼Ÿ</h3><ul>
<li>**<code>shutdown()</code>**ï¼šå®‰å…¨åœ°å…³é—­çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± ä¼šåœ¨æ‰§è¡Œå®Œæ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡å’Œé˜Ÿåˆ—ä¸­ç­‰å¾…çš„ä»»åŠ¡åæ‰å½»åº•å…³é—­ã€‚ä½†è°ƒç”¨<code>shutdown()</code>åï¼Œå¦‚æœè¿˜æœ‰æ–°çš„ä»»åŠ¡è¢«æäº¤ï¼Œçº¿ç¨‹æ± ä¼šæ ¹æ®æ‹’ç»ç­–ç•¥æ‹’ç»åç»­æ–°æäº¤çš„ä»»åŠ¡ã€‚</li>
<li>**<code>isShutdown()</code>**ï¼šè¿”å›<code>true</code>æˆ–<code>false</code>ï¼Œåˆ¤æ–­çº¿ç¨‹æ± æ˜¯å¦å·²ç»å¼€å§‹å…³é—­æµç¨‹ã€‚</li>
<li>**<code>isTerminated()</code>**ï¼šåˆ¤æ–­çº¿ç¨‹æ± æ˜¯å¦çœŸæ­£â€œç»ˆç»“â€ï¼Œå³çº¿ç¨‹æ± å·²å…³é—­å¹¶ä¸”æ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ã€‚</li>
<li>**<code>awaitTermination()</code>**ï¼šå°è¯•ç­‰å¾…ä¸€æ®µæŒ‡å®šçš„æ—¶é—´ï¼Œç›´åˆ°çº¿ç¨‹æ± â€œç»ˆç»“â€ã€‚å¦‚æœåœ¨ç­‰å¾…æ—¶é—´å†…çº¿ç¨‹æ± å·²å…³é—­å¹¶ä¸”ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œè¿”å›<code>true</code>ï¼›å¦åˆ™è¿”å›<code>false</code>ã€‚</li>
<li>**<code>shutdownNow()</code>**ï¼šå°è¯•ä¸­æ–­æ‰€æœ‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶è¿”å›ä»»åŠ¡é˜Ÿåˆ—ä¸­å°šæœªæ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨ã€‚çº¿ç¨‹æ± ä¼šå°è¯•ä¸­æ–­æ‰€æœ‰çº¿ç¨‹ï¼Œä½†çº¿ç¨‹å¯èƒ½ä¸ä¼šç«‹å³åœæ­¢ã€‚</li>
</ul>
<h3 id="çº¿ç¨‹æ± å®ç°â€œçº¿ç¨‹å¤ç”¨â€çš„åŸç†"><a href="#çº¿ç¨‹æ± å®ç°â€œçº¿ç¨‹å¤ç”¨â€çš„åŸç†" class="headerlink" title="çº¿ç¨‹æ± å®ç°â€œçº¿ç¨‹å¤ç”¨â€çš„åŸç†"></a>çº¿ç¨‹æ± å®ç°â€œçº¿ç¨‹å¤ç”¨â€çš„åŸç†</h3><p>çº¿ç¨‹æ± é€šè¿‡å°†çº¿ç¨‹å’Œä»»åŠ¡è§£è€¦ï¼Œè®©åŒä¸€ä¸ªçº¿ç¨‹å¯ä»¥ä»<code>BlockingQueue</code>ä¸­ä¸æ–­æå–æ–°ä»»åŠ¡æ¥æ‰§è¡Œã€‚æ ¸å¿ƒåŸç†æ˜¯è®©æ¯ä¸ªçº¿ç¨‹å»æ‰§è¡Œä¸€ä¸ªâ€œå¾ªç¯ä»»åŠ¡â€ï¼Œåœ¨è¿™ä¸ªâ€œå¾ªç¯ä»»åŠ¡â€ä¸­ï¼Œçº¿ç¨‹ä¼šä¸æ–­æ£€æŸ¥æ˜¯å¦æœ‰ä»»åŠ¡ç­‰å¾…æ‰§è¡Œï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥æ‰§è¡Œä»»åŠ¡çš„<code>run</code>æ–¹æ³•ï¼Œä»è€Œå®ç°çº¿ç¨‹å¤ç”¨ã€‚</p>
<h3 id="ä½ çŸ¥é“å“ªå‡ ç§é”ï¼Ÿåˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"><a href="#ä½ çŸ¥é“å“ªå‡ ç§é”ï¼Ÿåˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ" class="headerlink" title="ä½ çŸ¥é“å“ªå‡ ç§é”ï¼Ÿåˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"></a>ä½ çŸ¥é“å“ªå‡ ç§é”ï¼Ÿåˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</h3><p>æ ¹æ®åˆ†ç±»æ ‡å‡†ï¼Œé”å¯ä»¥åˆ†ä¸ºä»¥ä¸‹7å¤§ç±»åˆ«ï¼š</p>
<ol>
<li><strong>åå‘é”&#x2F;è½»é‡çº§é”&#x2F;é‡é‡çº§é”</strong>ï¼š<ul>
<li><strong>åå‘é”</strong>ï¼šé€‚ç”¨äºæ²¡æœ‰ç«äº‰çš„åœºæ™¯ï¼Œçº¿ç¨‹å¯ä»¥ç›´æ¥è·å–é”ï¼Œå¼€é”€æœ€å°ã€‚</li>
<li><strong>è½»é‡çº§é”</strong>ï¼šé€‚ç”¨äºæœ‰å°‘é‡ç«äº‰çš„åœºæ™¯ï¼Œçº¿ç¨‹ä¼šé€šè¿‡è‡ªæ—‹å°è¯•è·å–é”ã€‚</li>
<li><strong>é‡é‡çº§é”</strong>ï¼šé€‚ç”¨äºç«äº‰æ¿€çƒˆçš„åœºæ™¯ï¼Œçº¿ç¨‹ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ã€‚</li>
</ul>
</li>
<li><strong>å¯é‡å…¥é”&#x2F;éå¯é‡å…¥é”</strong>ï¼š<ul>
<li><strong>å¯é‡å…¥é”</strong>ï¼šçº¿ç¨‹å¯ä»¥å¤šæ¬¡è·å–åŒä¸€æŠŠé”ï¼Œä¾‹å¦‚<code>ReentrantLock</code>ã€‚</li>
<li><strong>éå¯é‡å…¥é”</strong>ï¼šçº¿ç¨‹ä¸èƒ½å¤šæ¬¡è·å–åŒä¸€æŠŠé”ã€‚</li>
</ul>
</li>
<li><strong>å…±äº«é”&#x2F;ç‹¬å é”</strong>ï¼š<ul>
<li><strong>å…±äº«é”</strong>ï¼šå¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶æŒæœ‰é”ï¼Œä¾‹å¦‚è¯»é”ã€‚</li>
<li><strong>ç‹¬å é”</strong>ï¼šåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”ï¼Œä¾‹å¦‚å†™é”ã€‚</li>
</ul>
</li>
<li><strong>å…¬å¹³é”&#x2F;éå…¬å¹³é”</strong>ï¼š<ul>
<li><strong>å…¬å¹³é”</strong>ï¼šçº¿ç¨‹æŒ‰ç…§æ’é˜Ÿé¡ºåºè·å–é”ã€‚</li>
<li><strong>éå…¬å¹³é”</strong>ï¼šçº¿ç¨‹å¯èƒ½ä¼šæ’é˜Ÿè·å–é”ã€‚</li>
</ul>
</li>
<li><strong>æ‚²è§‚é”&#x2F;ä¹è§‚é”</strong>ï¼š<ul>
<li><strong>æ‚²è§‚é”</strong>ï¼šåœ¨è·å–èµ„æºå‰å…ˆåŠ é”ï¼Œä¾‹å¦‚<code>synchronized</code>ã€‚</li>
<li><strong>ä¹è§‚é”</strong>ï¼šåœ¨ä¸åŠ é”çš„æƒ…å†µä¸‹å®Œæˆæ“ä½œï¼Œä¾‹å¦‚<code>AtomicInteger</code>ã€‚</li>
</ul>
</li>
<li><strong>è‡ªæ—‹é”&#x2F;éè‡ªæ—‹é”</strong>ï¼š<ul>
<li><strong>è‡ªæ—‹é”</strong>ï¼šçº¿ç¨‹åœ¨è·å–é”å¤±è´¥åä¼šä¸æ–­å°è¯•è·å–é”ã€‚</li>
<li><strong>éè‡ªæ—‹é”</strong>ï¼šçº¿ç¨‹åœ¨è·å–é”å¤±è´¥åä¼šè¿›å…¥é˜»å¡çŠ¶æ€ã€‚</li>
</ul>
</li>
<li><strong>å¯ä¸­æ–­é”&#x2F;ä¸å¯ä¸­æ–­é”</strong>ï¼š<ul>
<li><strong>å¯ä¸­æ–­é”</strong>ï¼šçº¿ç¨‹åœ¨ç­‰å¾…é”æ—¶å¯ä»¥è¢«ä¸­æ–­ï¼Œä¾‹å¦‚<code>ReentrantLock</code>çš„<code>lockInterruptibly</code>æ–¹æ³•ã€‚</li>
<li><strong>ä¸å¯ä¸­æ–­é”</strong>ï¼šçº¿ç¨‹åœ¨ç­‰å¾…é”æ—¶ä¸èƒ½è¢«ä¸­æ–­ï¼Œä¾‹å¦‚<code>synchronized</code>ã€‚</li>
</ul>
</li>
</ol>
<h3 id="æ‚²è§‚é”ä¸ä¹è§‚é”"><a href="#æ‚²è§‚é”ä¸ä¹è§‚é”" class="headerlink" title="æ‚²è§‚é”ä¸ä¹è§‚é”"></a>æ‚²è§‚é”ä¸ä¹è§‚é”</h3><ul>
<li><strong>æ‚²è§‚é”</strong>ï¼šåœ¨è·å–èµ„æºå‰å…ˆåŠ é”ï¼Œä¾‹å¦‚<code>synchronized</code>å…³é”®å­—å’Œ<code>ReentrantLock</code>ã€‚</li>
<li><strong>ä¹è§‚é”</strong>ï¼šåœ¨ä¸åŠ é”çš„æƒ…å†µä¸‹å®Œæˆæ“ä½œï¼Œä¾‹å¦‚<code>AtomicInteger</code>ã€‚</li>
<li><strong>æ•°æ®åº“ä¸­çš„é”</strong>ï¼š<ul>
<li><strong>æ‚²è§‚é”</strong>ï¼šä¾‹å¦‚<code>SELECT ... FOR UPDATE</code>ï¼Œåœ¨æäº¤ä¹‹å‰ä¸å…è®¸ç¬¬ä¸‰æ–¹ä¿®æ”¹æ•°æ®ã€‚</li>
<li><strong>ä¹è§‚é”</strong>ï¼šé€šè¿‡ç‰ˆæœ¬å·<code>version</code>å­—æ®µå®ç°ï¼Œåœ¨æ›´æ–°æ•°æ®æ—¶æ£€æŸ¥ç‰ˆæœ¬å·æ˜¯å¦ä¸€è‡´ã€‚</li>
</ul>
</li>
</ul>
<h3 id="å¦‚ä½•çœ‹åˆ°synchronizedèƒŒåçš„â€œmonitoré”â€ï¼Ÿ"><a href="#å¦‚ä½•çœ‹åˆ°synchronizedèƒŒåçš„â€œmonitoré”â€ï¼Ÿ" class="headerlink" title="å¦‚ä½•çœ‹åˆ°synchronizedèƒŒåçš„â€œmonitoré”â€ï¼Ÿ"></a>å¦‚ä½•çœ‹åˆ°<code>synchronized</code>èƒŒåçš„â€œmonitoré”â€ï¼Ÿ</h3><ul>
<li><strong>è·å–å’Œé‡Šæ”¾monitoré”çš„æ—¶æœº</strong>ï¼šçº¿ç¨‹åœ¨è¿›å…¥è¢«<code>synchronized</code>ä¿æŠ¤çš„ä»£ç å—ä¹‹å‰ä¼šè‡ªåŠ¨è·å–é”ï¼Œå¹¶ä¸”åœ¨é€€å‡ºæ—¶è‡ªåŠ¨é‡Šæ”¾é”ã€‚</li>
<li><strong><code>synchronized</code>ä¿®é¥°çš„ä»£ç å—</strong>ï¼šåˆ©ç”¨<code>monitorenter</code>å’Œ<code>monitorexit</code>æŒ‡ä»¤å®ç°ã€‚</li>
<li><strong><code>synchronized</code>ä¿®é¥°çš„æ–¹æ³•</strong>ï¼šåˆ©ç”¨<code>ACC_SYNCHRONIZED</code>æ ‡å¿—å®ç°ã€‚</li>
</ul>
<h3 id="synchronizedå’ŒLockå­°ä¼˜å­°åŠ£ï¼Œå¦‚ä½•é€‰æ‹©ï¼Ÿ"><a href="#synchronizedå’ŒLockå­°ä¼˜å­°åŠ£ï¼Œå¦‚ä½•é€‰æ‹©ï¼Ÿ" class="headerlink" title="synchronizedå’ŒLockå­°ä¼˜å­°åŠ£ï¼Œå¦‚ä½•é€‰æ‹©ï¼Ÿ"></a><code>synchronized</code>å’Œ<code>Lock</code>å­°ä¼˜å­°åŠ£ï¼Œå¦‚ä½•é€‰æ‹©ï¼Ÿ</h3><ul>
<li>å¦‚æœèƒ½ä¸ç”¨æœ€å¥½æ—¢ä¸ä½¿ç”¨<code>Lock</code>ä¹Ÿä¸ä½¿ç”¨<code>synchronized</code>ï¼Œä¼˜å…ˆä½¿ç”¨<code>java.util.concurrent</code>åŒ…ä¸­çš„å·¥å…·ç±»ã€‚</li>
<li>å¦‚æœ<code>synchronized</code>å…³é”®å­—é€‚åˆä½ çš„ç¨‹åºï¼Œå°½é‡ä½¿ç”¨å®ƒï¼Œå› ä¸ºä½¿ç”¨<code>Lock</code>æ—¶å¦‚æœå¿˜è®°åœ¨<code>finally</code>é‡Œ<code>unlock</code>ï¼Œå¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚</li>
<li>å¦‚æœéœ€è¦<code>Lock</code>çš„ç‰¹æ®ŠåŠŸèƒ½ï¼ˆå¦‚å°è¯•è·å–é”ã€å¯ä¸­æ–­ã€è¶…æ—¶åŠŸèƒ½ç­‰ï¼‰ï¼Œåˆ™ä½¿ç”¨<code>Lock</code>ã€‚</li>
</ul>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Java%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2078%20%E8%AE%B2-%E5%AE%8C/">Javaå¹¶å‘ç¼–ç¨‹</a></li>
<li><a href="https://juejin.cn/post/6896278031317663751">çº¿ç¨‹æ± è¯¦è§£</a></li>
<li><a href="https://javadoop.com/post/AbstractQueuedSynchronizer-2">AQSè¯¦è§£</a></li>
</ul>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
  </entry>
  <entry>
    <title>å®ç°è‡ªå®šä¹‰æ³¨è§£</title>
    <url>/2024/03/15/Java-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3/</url>
    <content><![CDATA[<p>åœ¨ springBoot ä¸­ï¼Œæ³¨è§£æ˜¯ç¼–ç æ—¶å¿…ä¸å¯å°‘çš„ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´æ–¹ä¾¿å¿«æ·çš„å»å¼€å‘ã€‚å¸¸è§çš„æ³¨è§£å¦‚ï¼š<code>@Autowiredã€@Slf4jã€@Data</code> ç­‰ç­‰ã€‚</p>
<p>ç„¶è€Œè¿™äº›æ³¨è§£éƒ½æ˜¯åˆ«äººå·²ç»å°è£…å¥½ç»™æˆ‘ä»¬ç”¨çš„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è‡ªå®šä¹‰ä¸€ä¸ªæ‹¥æœ‰ç‰¹åˆ«åŠŸèƒ½çš„æ³¨è§£ï¼Œè¯¥æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿ</p>
<p>çœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œç»™ä½ ç­”æ¡ˆï½</p>
<p>ä»Šå¤©ä»¥æ—¥å¿—åŠŸèƒ½ä¸ºä¾‹ï¼Œçµæ´»çš„è¿ç”¨è‡ªå®šä¹‰æ³¨è§£æ–¹ä¾¿å¿«æ·çš„è®°å½•æ¯ä¸ªæ¥å£çš„æ—¥å¿—ã€‚</p>
<p>åœ¨é¡¹ç›®ä¸­ï¼Œæœ‰ä¼—å¤šçš„æ¥å£ï¼Œå¦‚æœæ¥å£æŠ¥é”™äº†ï¼Œè¯¥æ€ä¹ˆå»å¿«é€Ÿå®šä½ä»£ç å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å°±è¦ç”¨åˆ°æ—¥å¿—äº†ã€‚å½“æ¥å£æ¥æ”¶åˆ°è¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘å¸Œæœ›å¯ä»¥è®°å½•ä¸‹æ¥è¿™ä¸ªæ¥å£çš„å„ç§ä¿¡æ¯ã€‚æ¯”å¦‚è¯·æ±‚æ—¶é—´ã€è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¶é—´ç­‰ï¼Œè¿˜å¯ä»¥åœ¨æ¥å£å¼€å§‹å’Œç»“æŸçš„æ—¶å€™åŠ ä¸€ä¸ªæ ‡è®°ï¼Œæ–¹ä¾¿å‡ºç°æŠ¥é”™æˆ–è€… bug çš„æ—¶å€™å¯ä»¥å¿«é€Ÿå®šä½åˆ°æ˜¯å“ªä¸ªæ¥å£å‡ºäº†é—®é¢˜ã€‚</p>
<p>æ¥ä¸‹æ¥å°±ç”¨æ—¥å¿—ç³»ç»Ÿæ¥ä»‹ç»è‡ªå®šä¹‰æ³¨è§£ï½</p>
<hr>
<h2 id="ä¸ä½¿ç”¨æ³¨è§£"><a href="#ä¸ä½¿ç”¨æ³¨è§£" class="headerlink" title="ä¸ä½¿ç”¨æ³¨è§£"></a>ä¸ä½¿ç”¨æ³¨è§£</h2><p>æˆ‘ä»¬å¯ä»¥åœ¨æ¥å£æ–¹æ³•çš„å¼€å¤´å’Œç»“å°¾åŠ ä¸€è¡Œæ—¥å¿—ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Mycontroller</span> &#123;<br>    <span class="hljs-meta">@GetMapping(&quot;/get&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">get</span><span class="hljs-params">(String name,<span class="hljs-type">int</span> age)</span>&#123;<br>        log.info(<span class="hljs-string">&quot;Mycontroller**********get********start&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;æ‰§è¡Œäº†getæ–¹æ³•&quot;</span>);<br>        log.info(<span class="hljs-string">&quot;Mycontroller**********get********end&quot;</span>);<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ‰§è¡Œç»“æœï¼š</p>
<p>   <img src="/img/articles/self/1.png"> </p>
<p>æ–¹æ³•çš„é¦–å°¾ä¸¤è¡Œéƒ½ä¼šæœ‰ä¸€ä¸ªæ—¥å¿—è¾“å‡ºï¼ŒæŠŠè¿™ä¸ªæ–¹æ³•çš„æ‰€æœ‰è¿è¡ŒåŒ…åœ¨äº†æ—¥å¿—é‡Œé¢ï¼Œå¦‚æœä¸ªæ–¹æ³•å‡ºç°äº†é—®é¢˜ï¼Œå°±å¾ˆå®¹æ˜“å®šä½åˆ°è¿™é‡Œäº†ã€‚</p>
<p>æ¯”å¦‚æˆ‘æ•…æ„å†™ä¸€ä¸ªæŠ¥é”™ï¼š<code>int i = 2/0;</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@GetMapping(&quot;/get&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">get</span><span class="hljs-params">(String name,<span class="hljs-type">int</span> age)</span>&#123;<br>    log.info(<span class="hljs-string">&quot;Mycontroller**********get********start&quot;</span>);<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>/<span class="hljs-number">0</span>;<br>    System.out.println(<span class="hljs-string">&quot;æ‰§è¡Œäº†getæ–¹æ³•&quot;</span>);<br>    log.info(<span class="hljs-string">&quot;Mycontroller**********get********end&quot;</span>);<br>    <span class="hljs-keyword">return</span> name;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>é‚£ä¹ˆè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<p>   <img src="/img/articles/self/2.png"> </p>
<p>å¯ä»¥çœ‹åˆ°æŠ¥é”™çš„ä¸Šä¸€è¡Œæ—¥å¿—å®šä½äº† <code>get</code> æ–¹æ³•ã€‚æˆ‘ä»¬åªéœ€åœ¨ <code>get</code> æ–¹æ³•é‡Œé¢æ‰¾é—®é¢˜å°±å¥½äº†ã€‚</p>
<p>æ¯ä¸ªæ–¹æ³•çš„é¦–å°¾éƒ½è¦è¿™æ ·å†™ä¸€ä¸ªæ—¥å¿—è®°å½•ï¼Œä»£ç å°±ä¼š<strong>å¤§é‡å†—ä½™</strong>ã€‚æƒ³è·å–å…¥å‚çš„è¯ï¼Œè¿˜å¾—å†å†™ä¸€æ®µä»£ç æ¥å®ç°ï¼Œå¹¶ä¸”æ ¹æ®æ¯ä¸ªæ–¹æ³•çš„å…¥å‚æ•°é‡ã€ç±»å‹çš„ä¸åŒï¼Œå¯èƒ½ä»£ç ä¹Ÿè¦ç›¸åº”çš„å˜åŠ¨ã€‚</p>
<p>æ—¢ç„¶è¿™ä¸ªæ˜¯é‡å¤æ€§çš„å·¥ä½œï¼Œè€Œä¸”é€»è¾‘ä¸Šéƒ½æ˜¯ï¼š<strong>åœ¨æ–¹æ³•å¼€å§‹ä¹‹å‰å’Œæ–¹æ³•ç»“æŸä¹‹ååšä¸€ä¸ªæ ‡è®°</strong>ã€‚é‚£ä¹ˆæˆ‘ä»¬èƒ½ä¸èƒ½æŠŠè¿™ä¸€éƒ¨åˆ†æŠ½å–å‡ºæ¥ï¼Œåªå†™ä¸€æ¬¡ä»£ç ï¼Œå°±èƒ½ä½œç”¨åœ¨æ¯ä¸€ä¸ªæ–¹æ³•ä¸Šé¢å‘¢ï¼Ÿ</p>
<p>æ¯«æ— ç–‘é—®ï¼Œç­”æ¡ˆæ˜¯<strong>å¯ä»¥</strong>ï¼</p>
<hr>
<h2 id="ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£"><a href="#ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£"></a>ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£</h2><p>åœ¨ä¸€ä¸ªäº‹æƒ…çš„å¼€å§‹å’Œç»“æŸæ’å…¥å¦ä¸€ä¸ªäº‹æƒ…ï¼Œå¾ˆå®¹æ˜“è”æƒ³åˆ° Spring çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ â€”â€”<strong>AOP</strong>ã€‚</p>
<blockquote>
<p>Spring çš„ AOPï¼ˆAspect-Oriented Programmingï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æ˜¯ Spring æ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œç”¨äºå°†æ¨ªåˆ‡å…³æ³¨ç‚¹ä»åº”ç”¨ç¨‹åºçš„ä¸»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä½¿å¾—å…³æ³¨ç‚¹çš„ä»£ç å¯ä»¥è¢«æ¨¡å—åŒ–ã€é‡ç”¨ï¼Œå¹¶ä¸”ä¸ä¸»ä¸šåŠ¡é€»è¾‘è§£è€¦ã€‚</p>
</blockquote>
<h3 id="å®šä¹‰æ³¨è§£"><a href="#å®šä¹‰æ³¨è§£" class="headerlink" title="å®šä¹‰æ³¨è§£"></a>å®šä¹‰æ³¨è§£</h3><p>ä½¿ç”¨ <code>@interface</code> å…³é”®å­—å®šä¹‰ä¸€ä¸ªæ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> LogInfo &#123;<br> <br>&#125;<br></code></pre></td></tr></table></figure>

<p>åœ¨è‡ªå®šä¹‰æ³¨è§£ä¸­ï¼Œæ ¹æ®éœ€è¦æ ‡æ³¨å…ƒæ³¨è§£ï¼Œå¦‚æœæ²¡æœ‰ç‰¹å®šéœ€æ±‚çš„è¯<strong>ä¹Ÿå¯ä»¥ä¸æ ‡æ³¨</strong>ã€‚</p>
<p>ä¸€å…±æœ‰ä»¥ä¸‹ 5 ä¸ªå…ƒæ³¨è§£ï¼š</p>
<ol>
<li><p>@Retention</p>
<p>ï¼ˆä¿ç•™ç­–ç•¥ï¼‰ï¼š</p>
<ul>
<li><code>RetentionPolicy.SOURCE</code>ï¼šæ³¨è§£ä»…å­˜åœ¨äºæºä»£ç ä¸­ï¼Œåœ¨ç¼–è¯‘æ—¶ä¼šè¢«ä¸¢å¼ƒã€‚è¿™ç§ç±»å‹çš„æ³¨è§£é€šå¸¸ç”¨äºæä¾›ç¼–è¯‘æ—¶çš„è¾…åŠ©ä¿¡æ¯ï¼Œä¸ä¼šå¯¹è¿è¡Œæ—¶äº§ç”Ÿå½±å“ã€‚</li>
<li><code>RetentionPolicy.CLASS</code>ï¼šæ³¨è§£å­˜åœ¨äºç¼–è¯‘åçš„å­—èŠ‚ç æ–‡ä»¶ä¸­ï¼Œä½†åœ¨è¿è¡Œæ—¶ä¼šè¢«ä¸¢å¼ƒã€‚è¿™ç§ç±»å‹çš„æ³¨è§£å¯ä»¥åœ¨ç¼–è¯‘æ—¶å¯¹ä»£ç è¿›è¡Œä¸€äº›å¤„ç†ï¼Œä½†ä¸ä¼šå½±å“ç¨‹åºè¿è¡Œæ—¶çš„è¡Œä¸ºã€‚</li>
<li><code>RetentionPolicy.RUNTIME</code>ï¼šæ³¨è§£åœ¨è¿è¡Œæ—¶å¯ä»¥é€šè¿‡åå°„è·å–åˆ°ã€‚è¿™ç§ç±»å‹çš„æ³¨è§£å¯ä»¥åœ¨è¿è¡Œæ—¶å¯¹ç¨‹åºçš„è¡Œä¸ºè¿›è¡ŒåŠ¨æ€è°ƒæ•´ï¼Œä¾‹å¦‚åœ¨ AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ä¸­ç»å¸¸ä½¿ç”¨ã€‚</li>
</ul>
</li>
<li><p>@Target</p>
<p>ï¼ˆç›®æ ‡ç±»å‹ï¼‰ï¼š</p>
<ul>
<li><code>ElementType.METHOD</code>ï¼šæŒ‡å®šæ³¨è§£å¯ä»¥åº”ç”¨äºæ–¹æ³•ã€‚</li>
<li><code>ElementType.FIELD</code>ï¼šæŒ‡å®šæ³¨è§£å¯ä»¥åº”ç”¨äºå­—æ®µã€‚</li>
<li><code>ElementType.TYPE</code>ï¼šæŒ‡å®šæ³¨è§£å¯ä»¥åº”ç”¨äºç±»ã€æ¥å£ï¼ˆåŒ…æ‹¬æ³¨è§£ç±»å‹ï¼‰ã€‚</li>
<li><code>ElementType.PARAMETER</code>ï¼šæŒ‡å®šæ³¨è§£å¯ä»¥åº”ç”¨äºå‚æ•°ã€‚</li>
<li><code>ElementType.CONSTRUCTOR</code>ï¼šæŒ‡å®šæ³¨è§£å¯ä»¥åº”ç”¨äºæ„é€ å‡½æ•°ç­‰ã€‚</li>
</ul>
</li>
<li><p>@Documented</p>
<p>ï¼ˆæ–‡æ¡£åŒ–ï¼‰ï¼š</p>
<ul>
<li>å½“ä¸€ä¸ªæ³¨è§£è¢« @Documented ä¿®é¥°æ—¶ï¼Œè¿™ä¸ªæ³¨è§£å°†ä¼šåŒ…å«åœ¨ Javadoc ç”Ÿæˆçš„æ–‡æ¡£ä¸­ï¼Œä½¿å¾—æ³¨è§£çš„ä¿¡æ¯å¯ä»¥è¢«æ–‡æ¡£åŒ–å±•ç¤ºã€‚</li>
</ul>
</li>
<li><p>@Inherited</p>
<p>ï¼ˆç»§æ‰¿æ€§ï¼‰ï¼š</p>
<ul>
<li>å¦‚æœä¸€ä¸ªæ³¨è§£è¢« @Inherited ä¿®é¥°ï¼Œé‚£ä¹ˆå­ç±»ä¼šç»§æ‰¿çˆ¶ç±»çš„è¯¥æ³¨è§£ã€‚è¿™å¯¹äºä¸€äº›éœ€è¦åœ¨ç»§æ‰¿å…³ç³»ä¸­ä¼ é€’æ³¨è§£çš„æƒ…å†µéå¸¸æœ‰ç”¨ã€‚</li>
</ul>
</li>
<li><p>@Repeatable</p>
<p>ï¼ˆå¯é‡å¤æ€§ï¼‰ï¼š</p>
<ul>
<li>å…è®¸ä¸€ä¸ªæ³¨è§£åœ¨åŒä¸€ä¸ªç›®æ ‡ä¸Šè¢«å¤šæ¬¡åº”ç”¨ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨å®¹å™¨æ³¨è§£æ¥åŒ…è£¹å¤šä¸ªç›¸åŒçš„æ³¨è§£å®ä¾‹ã€‚è¿™æ ·å¯ä»¥ä½¿ä»£ç æ›´åŠ ç®€æ´å’Œæ˜“è¯»ã€‚</li>
</ul>
</li>
</ol>
<h3 id="å¼•-AOP-ä¾èµ–"><a href="#å¼•-AOP-ä¾èµ–" class="headerlink" title="å¼• AOP ä¾èµ–"></a>å¼• AOP ä¾èµ–</h3><p>è¦å®ç° AOP è‡ªå®šä¹‰æ³¨è§£ï¼Œç¬¬ä¸€æ­¥å…ˆå¼•å…¥ AOP çš„ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--AOP--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="ç¼–å†™-AOP-ç¨‹åº"><a href="#ç¼–å†™-AOP-ç¨‹åº" class="headerlink" title="ç¼–å†™ AOP ç¨‹åº"></a>ç¼–å†™ AOP ç¨‹åº</h3><p>æ–°å»ºä¸€ä¸ª AOP ç±»ï¼Œé’ˆå¯¹äºç‰¹å®šæ–¹æ³•æ ¹æ®ä¸šåŠ¡éœ€è¦è¿›è¡Œç¼–ç¨‹ (åŠ  @Aspect æ³¨è§£å£°æ˜ä¸º AOP ç±»ï¼‰</p>
<p>è¿™ä¸ªç±»ä¸­ï¼Œæˆ‘ä»¬è¦å®ç°è‡ªå®šä¹‰æ³¨è§£çš„åŠŸèƒ½ï¼Œæ¯”å¦‚åœ¨æ–¹æ³•å¼€å§‹ä¹‹å‰ï¼Œåšä¸€ä¸ªæ ‡è®°ï¼Œè®°å½•è¯¥æ–¹æ³•çš„å…¥å‚ï¼Œæ–¹æ³•ç»“æŸä¹‹åå†åšä¸€ä¸ªæ ‡è®°ã€‚</p>
<p>æ–°å»ºä¸€ä¸ª AOP ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs Java"><span class="hljs-meta">@Aspect</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAOP</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>@Aspect æ³¨è§£ï¼šæ ‡è®°è¯¥ç±»ä¸ºåˆ‡é¢ç±»ï¼ŒSpring AOP ä¼šè‡ªåŠ¨è¯†åˆ«å¸¦æœ‰ <code>@Aspect</code> æ³¨è§£çš„ç±»ï¼Œå¹¶å°†å…¶è§†ä¸ºåˆ‡é¢ï¼Œç„¶åæ ¹æ®å®šä¹‰çš„é€šçŸ¥å’Œåˆ‡ç‚¹æ¥å®ç°æ¨ªåˆ‡é€»è¾‘ã€‚</p>
<p>@Componentï¼šç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå— Spring å®¹å™¨ç®¡ç†çš„ç»„ä»¶çš„æ³¨è§£ã€‚å¯ä»¥è®© Spring è‡ªåŠ¨æ‰«æå¹¶è¯†åˆ«è¢«æ³¨è§£çš„ç±»ï¼Œç„¶åå°†å…¶å®ä¾‹åŒ–å¹¶åŠ å…¥åˆ° Spring å®¹å™¨ä¸­ç®¡ç†ã€‚</p>
</blockquote>
<p>å†™ä¸€ä¸ªåœ¨<strong>æ¥å£æ‰§è¡Œä¹‹å‰</strong>è¦æ‰§è¡Œçš„é€»è¾‘æ–¹æ³•ï¼š</p>
<p>ç”¨ <code>@Before</code> æ³¨è§£æ ‡æ³¨ï¼Œé‡Œé¢çš„ <code>@annotation</code> æ˜¯ç”¨äºå®šä¹‰åˆ‡ç‚¹è¡¨è¾¾å¼çš„ä¸€ç§ç‰¹æ®Šç”¨æ³•ï¼Œ</p>
<p>ä¸‹åˆ—ä»£ç ä¸­ <code>@Before(&quot;@annotation(LogInfo)&quot;)</code> è¡¨ç¤ºåœ¨æ‰§è¡Œ<strong>è¢«è‡ªå®šä¹‰æ³¨è§£æ ‡è®°çš„æ–¹æ³•å‰</strong>æ‰§è¡Œ <code>logBeforeæ–¹æ³•</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs Java"><span class="hljs-meta">@Aspect</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAOP</span> &#123;<br>    <span class="hljs-meta">@Before(&quot;@annotation(LogInfo)&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logBefore</span><span class="hljs-params">(JoinPoint joinPoint)</span>&#123;<br>        <span class="hljs-comment">// è·å–æ–¹æ³•æ‰€åœ¨ç±»çš„åç§°</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">fullClassName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getDeclaringTypeName();<br> <br>        <span class="hljs-comment">// è·å–æ–¹æ³•åç§°</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();<br> <br>        <span class="hljs-comment">// æå–ç±»åçš„æœ€åä¸€éƒ¨åˆ†</span><br>        <span class="hljs-comment">// æ¯”å¦‚ï¼šcom.pidanxia.aop.LogAOPï¼Œåªæ‹¿LogAOP</span><br>        String[] classNameParts = fullClassName.split(<span class="hljs-string">&quot;\\.&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> classNameParts[classNameParts.length - <span class="hljs-number">1</span>];<br> <br>        <span class="hljs-comment">// åœ¨æ–¹æ³•æ‰§è¡Œå‰è®°å½•æ—¥å¿—</span><br>        log.info(className + <span class="hljs-string">&quot;****************&quot;</span> + methodName + <span class="hljs-string">&quot;****************start&quot;</span>);<br> <br>        <span class="hljs-comment">// è·å–å‚æ•°åˆ—è¡¨</span><br>        Object[] args = joinPoint.getArgs();<br>        <span class="hljs-comment">// å…¥å‚é›†åˆ</span><br>        Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-comment">// è·å–æ–¹æ³•å‚æ•°åç§°</span><br>        <span class="hljs-type">MethodSignature</span> <span class="hljs-variable">methodSignature</span> <span class="hljs-operator">=</span> (MethodSignature) joinPoint.getSignature();<br>        String[] parameterNames = methodSignature.getParameterNames();<br>        <span class="hljs-comment">// è¾“å‡ºå…¥å‚å€¼</span><br>        <span class="hljs-keyword">if</span> (parameterNames != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; args.length; i++) &#123;<br>                <span class="hljs-keyword">if</span> (parameterNames.length &gt; i) &#123;<br>                    <span class="hljs-type">String</span> <span class="hljs-variable">paramName</span> <span class="hljs-operator">=</span> parameterNames[i];<br>                    <span class="hljs-type">Object</span> <span class="hljs-variable">paramValue</span> <span class="hljs-operator">=</span> args[i];<br>                    map.put(paramName, paramValue);<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>(map);<br>        log.info(<span class="hljs-string">&quot;\nå…¥å‚ï¼š&quot;</span> + json);<br>    &#125;<br></code></pre></td></tr></table></figure>

<p>ä¹‹å‰æœ‰äº†ï¼Œç†åº”ä¹Ÿè¦æœ‰ä¸€ä¸ªä¹‹åçš„ã€‚å†™ä¸€ä¸ªåœ¨<strong>æ¥å£æ‰§è¡Œä¹‹å</strong>è¦æ‰§è¡Œçš„é€»è¾‘æ–¹æ³•ï¼š</p>
<p>ç”¨ <code>@After</code> æ³¨è§£æ ‡æ³¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs Java"><span class="hljs-meta">@After(&quot;@annotation(LogInfo)&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logAfter</span><span class="hljs-params">(JoinPoint joinPoint)</span>&#123;<br>    <span class="hljs-comment">// è·å–æ–¹æ³•æ‰€åœ¨ç±»çš„åç§°</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">fullClassName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getDeclaringTypeName();<br> <br>    <span class="hljs-comment">// è·å–æ–¹æ³•åç§°</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();<br> <br>    <span class="hljs-comment">// æå–ç±»åçš„æœ€åä¸€éƒ¨åˆ†</span><br>    String[] classNameParts = fullClassName.split(<span class="hljs-string">&quot;\\.&quot;</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> classNameParts[classNameParts.length - <span class="hljs-number">1</span>];<br> <br>    <span class="hljs-comment">// åœ¨æ–¹æ³•æ‰§è¡Œåè®°å½•æ—¥å¿—</span><br>    log.info(className + <span class="hljs-string">&quot;****************&quot;</span> + methodName + <span class="hljs-string">&quot;****************end&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£-1"><a href="#ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£-1" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£"></a>ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£</h3><p>åœ¨æ¥å£å¤„ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£æ ‡è®°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs Java"><span class="hljs-meta">@LogInfo</span><br><span class="hljs-meta">@GetMapping(&quot;/get&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">get</span><span class="hljs-params">(String name,<span class="hljs-type">int</span> age)</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;æ‰§è¡Œäº†getæ–¹æ³•&quot;</span>);<br>    <span class="hljs-keyword">return</span> name;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="/img/articles/self/3.png"> </p>
<p>å³ä½¿æˆ‘ä»¬æ²¡æœ‰åœ¨æ¥å£æ–¹æ³•ä¸­å†™ä»»ä½•çš„æ—¥å¿—é€»è¾‘ï¼Œåªè¦æ ‡è®°äº†æ³¨è§£ï¼Œå°±ä¼šè‡ªåŠ¨è°ƒç”¨æ³¨è§£æ–¹æ³•ï¼</p>
<h3 id="æ•´åˆæˆ-Around-æ³¨è§£"><a href="#æ•´åˆæˆ-Around-æ³¨è§£" class="headerlink" title="æ•´åˆæˆ @Around æ³¨è§£"></a>æ•´åˆæˆ <code>@Around</code> æ³¨è§£</h3><p>æœ‰äº†ä¹‹å‰ï¼Œæœ‰äº†ä¹‹åï¼Œè¿˜ä¼šæœ‰ä¸€ä¸ªåŒ…å›´çš„æ³¨è§£ï¼</p>
<p>ä¸Šé¢çš„ <code>@Before</code> å’Œ <code>@After</code> å¯ä»¥åˆå¹¶ä¸ºä¸€ä¸ªæ³¨è§£ï¼š<code>@Around</code></p>
<p>ä¸€èˆ¬å¼€å‘ä¸­éƒ½æ˜¯ä½¿ç”¨ <code>@Around</code> æ³¨è§£æ¯”è¾ƒå¤šï¼Œå› ä¸ºè¿™æ ·åªç”¨å†™ä¸€ä¸ªæ³¨è§£æ–¹æ³•å°±å¯ä»¥äº†ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯ç”¨ <code>Object result = point.proceed();</code> æ¥éš”å¼€ä¹‹å‰å’Œä¹‹åæ‰§è¡Œçš„ä¸¤éƒ¨åˆ†ã€‚</p>
<p><code>Object result = point.proceed();</code> è¯­å¥å°±æ˜¯æ‰§è¡Œæ¥å£æ–¹æ³•çš„æ„æ€ï¼Œæ‰§è¡Œå®Œè¿™æ¡è¯­å¥ï¼Œæ¥å£æ–¹æ³•å°±æ‰§è¡Œå®Œäº†ã€‚</p>
<p><strong>ç‰¹åˆ«æ³¨æ„ï¼š</strong>ç”¨ <code>@Around</code> æ³¨è§£æ ‡æ³¨çš„æ–¹æ³•å…¥å‚å¿…é¡»æ˜¯ï¼š**<code>ProceedingJoinPoint</code> ç±»å‹**çš„ï¼Œå› ä¸º <code>proceed()</code> æ–¹æ³•æ˜¯åœ¨ <code>ProceedingJoinPoint</code> æ¥å£ä¸­å®šä¹‰çš„ï¼Œ<code>JoinPoint</code> æ¥å£ä¸­æ²¡æœ‰å®šä¹‰ã€‚</p>
<p>æŠŠä¹‹å‰çš„ <code>logBeforeæ–¹æ³•</code>å’Œ <code>logAfteræ–¹æ³•</code>éƒ½æ³¨é‡Šæ‰ï¼Œç„¶åå†™ä¸€ä¸ªæ–°çš„ <code>logAroundæ–¹æ³•</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Around(&quot;@annotation(LogInfo)&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logAround</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable&#123;<br> <br>    â€¦â€¦  <span class="hljs-comment">//è¿™é‡Œä»£è¡¨logBeforeæ–¹æ³•çš„ä»£ç ï¼Œä¸€æ¨¡ä¸€æ ·æ‹·è´è¿‡æ¥å³å¯</span><br> <br>    <span class="hljs-comment">// æ‰§è¡ŒåŸæ–¹æ³•</span><br>    <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> joinPoint.proceed();<br> <br>    <span class="hljs-comment">// åœ¨æ–¹æ³•æ‰§è¡Œåè®°å½•æ—¥å¿—</span><br>    log.info(className + <span class="hljs-string">&quot;****************&quot;</span> + methodName + <span class="hljs-string">&quot;****************end&quot;</span>);<br> <br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åå†æ¥è¯·æ±‚ä¸€ä¸‹æ¥å£ï¼Œçœ‹çœ‹æ§åˆ¶å°è¾“å‡ºï¼š</p>
<p>   <img src="/img/articles/self/4.png"> </p>
<p>å¯ä»¥çœ‹åˆ°æ•ˆæœæ˜¯è·Ÿä¹‹å‰çš„ã€‚</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
  </entry>
  <entry>
    <title>Javaé™åˆ¶æ¥å£è®¿é—®</title>
    <url>/2024/07/12/Java-%E9%99%90%E5%88%B6%E6%8E%A5%E5%8F%A3%E8%AE%BF%E9%97%AE/</url>
    <content><![CDATA[<h1 id="æ¥å£è®¿é—®é™åˆ¶å®ç°"><a href="#æ¥å£è®¿é—®é™åˆ¶å®ç°" class="headerlink" title="æ¥å£è®¿é—®é™åˆ¶å®ç°"></a>æ¥å£è®¿é—®é™åˆ¶å®ç°</h1><h2 id="ç›®çš„"><a href="#ç›®çš„" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h2><p>é™åˆ¶ç”¨æˆ·åœ¨ä¸€å®šæ—¶é—´å†…åªèƒ½è®¿é—®æ¥å£çš„æ¬¡æ•°ã€‚</p>
<h2 id="åç«¯é™åˆ¶æ–¹æ³•"><a href="#åç«¯é™åˆ¶æ–¹æ³•" class="headerlink" title="åç«¯é™åˆ¶æ–¹æ³•"></a>åç«¯é™åˆ¶æ–¹æ³•</h2><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>1.é€šè¿‡ Redis è®°å½•è¯·æ±‚æ¬¡æ•°ï¼Œå¦‚æœè¶…è¿‡é™åˆ¶åˆ™æ‹’ç»è®¿é—®ã€‚åŒæ—¶è®¾ç½® Redis çš„ key çš„æ—¶æ•ˆæ€§ï¼Œè¿‡æœŸè‡ªåŠ¨é”€æ¯ã€‚</p>
<p>2.ä½¿ç”¨é™æµå™¨</p>
<h3 id="è‡ªå®šä¹‰æ³¨è§£ï¼ˆJavaï¼‰"><a href="#è‡ªå®šä¹‰æ³¨è§£ï¼ˆJavaï¼‰" class="headerlink" title="è‡ªå®šä¹‰æ³¨è§£ï¼ˆJavaï¼‰"></a>è‡ªå®šä¹‰æ³¨è§£ï¼ˆJavaï¼‰</h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¯·æ±‚é™åˆ¶çš„è‡ªå®šä¹‰æ³¨è§£</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Target</span> æ³¨è§£å¯ä¿®é¥°çš„å¯¹è±¡èŒƒå›´ï¼š</span><br><span class="hljs-comment"> *         - ElementType.METHOD: ä½œç”¨äºæ–¹æ³•</span><br><span class="hljs-comment"> *         - ElementType.TYPE: ä½œç”¨äºç±»</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Retention</span> å®šä¹‰æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼š</span><br><span class="hljs-comment"> *         - RetentionPolicy.RUNTIME: åœ¨è¿è¡Œæ—¶æœ‰æ•ˆ</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Inherited</span> è¡¨ç¤ºæ³¨è§£å¯è¢«ç»§æ‰¿</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Target(&#123;ElementType.METHOD, ElementType.TYPE&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> AccessLimit &#123;<br>    <span class="hljs-comment">// å¤±æ•ˆæ—¶é—´ï¼ˆç§’ï¼‰</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">seconds</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">// æœ€å¤§è¯·æ±‚æ¬¡æ•°</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">maxCount</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="é…ç½®æ‹¦æˆªå™¨ï¼ˆJavaï¼‰"><a href="#é…ç½®æ‹¦æˆªå™¨ï¼ˆJavaï¼‰" class="headerlink" title="é…ç½®æ‹¦æˆªå™¨ï¼ˆJavaï¼‰"></a>é…ç½®æ‹¦æˆªå™¨ï¼ˆJavaï¼‰</h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LimitInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(LimitInterceptor.class);<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RedisCache redisCache;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-keyword">if</span> (handler <span class="hljs-keyword">instanceof</span> HandlerMethod) &#123;<br>            <span class="hljs-type">HandlerMethod</span> <span class="hljs-variable">hm</span> <span class="hljs-operator">=</span> (HandlerMethod) handler;<br>            <span class="hljs-type">AccessLimit</span> <span class="hljs-variable">accessLimit</span> <span class="hljs-operator">=</span> hm.getMethodAnnotation(AccessLimit.class);<br>            <span class="hljs-keyword">if</span> (accessLimit == <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            &#125;<br><br>            <span class="hljs-type">int</span> <span class="hljs-variable">seconds</span> <span class="hljs-operator">=</span> accessLimit.seconds(); <span class="hljs-comment">// å¤±æ•ˆæ—¶é—´ï¼ˆç§’ï¼‰</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">maxCount</span> <span class="hljs-operator">=</span> accessLimit.maxCount(); <span class="hljs-comment">// æœ€å¤§è¯·æ±‚æ¬¡æ•°</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> request.getServletPath() + request.getSession().getId();<br><br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">if</span> (redisCache.getCacheObject(key) != <span class="hljs-literal">null</span>) &#123;<br>                count = (Integer) redisCache.getCacheObject(key);<br>            &#125;<br><br>            <span class="hljs-keyword">if</span> (count == <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è®¿é—®</span><br>                redisCache.setCacheObject(key, <span class="hljs-number">1</span>);<br>                redisCache.expire(key, seconds, TimeUnit.SECONDS); <span class="hljs-comment">// è®¾ç½®ç¼“å­˜å¤±æ•ˆæ—¶é—´</span><br>                logger.info(<span class="hljs-string">&quot;&#123;&#125; ç¬¬ä¸€æ¬¡è®¿é—®&quot;</span>, key);<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (count &lt; maxCount) &#123;<br>                <span class="hljs-comment">// å¢åŠ è®¿é—®æ¬¡æ•°</span><br>                redisCache.incr(key, <span class="hljs-number">1</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-comment">// è¶…å‡ºè®¿é—®æ¬¡æ•°</span><br>                logger.error(<span class="hljs-string">&quot;è¶…å‡ºè®¿é—®æ¬¡æ•°&quot;</span>);<br>                render(response, <span class="hljs-string">&quot;è¯·æ±‚æ¬¡æ•°è¿‡äºé¢‘ç¹ï¼&quot;</span>);<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å°è£…è¿”å›å€¼</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> response å“åº”å¯¹è±¡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> msg      è¿”å›æ¶ˆæ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception å¼‚å¸¸</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">render</span><span class="hljs-params">(HttpServletResponse response, String msg)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        response.setContentType(<span class="hljs-string">&quot;application/json;charset=utf-8&quot;</span>);<br>        <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> response.getWriter();<br>        out.print(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>().writeValueAsString(RespBean.error(msg)));<br>        out.flush();<br>        out.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="æ³¨å†Œæ‹¦æˆªå™¨ï¼ˆJavaï¼‰"><a href="#æ³¨å†Œæ‹¦æˆªå™¨ï¼ˆJavaï¼‰" class="headerlink" title="æ³¨å†Œæ‹¦æˆªå™¨ï¼ˆJavaï¼‰"></a>æ³¨å†Œæ‹¦æˆªå™¨ï¼ˆJavaï¼‰</h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> &#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> LimitInterceptor <span class="hljs-title function_">limitHandlerInterceptor</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LimitInterceptor</span>();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addInterceptors</span><span class="hljs-params">(InterceptorRegistry registry)</span> &#123;<br>        registry.addInterceptor(limitHandlerInterceptor());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="åœ¨-Controller-çš„æ¥å£åŠ ä¸Šæ³¨è§£ï¼ˆJavaï¼‰"><a href="#åœ¨-Controller-çš„æ¥å£åŠ ä¸Šæ³¨è§£ï¼ˆJavaï¼‰" class="headerlink" title="åœ¨ Controller çš„æ¥å£åŠ ä¸Šæ³¨è§£ï¼ˆJavaï¼‰"></a>åœ¨ Controller çš„æ¥å£åŠ ä¸Šæ³¨è§£ï¼ˆJavaï¼‰</h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PostMapping(&quot;/&quot;)</span><br><span class="hljs-meta">@AccessLimit(seconds = 6, maxCount = 1)</span> <span class="hljs-comment">// ç”¨æˆ·é‡å¤è®¿é—®è¯¥æ¥å£å¿…é¡»é—´éš” 6 ç§’åŠä»¥ä¸Š</span><br><span class="hljs-keyword">public</span> RespBean <span class="hljs-title function_">addEmp</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Employee employee)</span> &#123;<br>    <span class="hljs-keyword">if</span> (employeeService.addEmp(employee)) &#123;<br>        <span class="hljs-keyword">return</span> RespBean.ok(<span class="hljs-string">&quot;æ·»åŠ æˆåŠŸ!&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> RespBean.error(<span class="hljs-string">&quot;æ·»åŠ å¤±è´¥ï¼&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
  </entry>
  <entry>
    <title>Linuxç¬”è®°</title>
    <url>/2024/07/18/Linux%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h2 id="1-è¿œç¨‹ç™»é™†åˆ°linuxæœåŠ¡å™¨"><a href="#1-è¿œç¨‹ç™»é™†åˆ°linuxæœåŠ¡å™¨" class="headerlink" title="1.è¿œç¨‹ç™»é™†åˆ°linuxæœåŠ¡å™¨"></a>1.è¿œç¨‹ç™»é™†åˆ°linuxæœåŠ¡å™¨</h2><ol>
<li>ä¸ºä»€ä¹ˆè¦è¿œç¨‹ï¼Ÿâ€”â€”-&gt;å°ç»„å…¬ç½‘å…±äº«linuxæœåŠ¡å™¨</li>
<li>è¿œç¨‹æ“ä½œçš„è½¯ä»¶ï¼šxshellï¼ˆè¿œç¨‹ç™»é™†ï¼‰ï¼Œxftpï¼ˆè¿œç¨‹æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ï¼‰</li>
<li>å¦‚ä½•è¿æ¥ï¼Ÿï¼šlinux çš„ifconfigå‘½ä»¤</li>
<li>xshellå¯ä»¥å®ç°è¿œç¨‹è¿›è¡Œlinuxå‘½ä»¤æ“ä½œï¼Œxftpè¿œç¨‹æ–‡ä»¶çš„windowså’Œxftpäº’ä¼ </li>
</ol>
<hr>
<h2 id="2-linux-viå’Œvimç¼–è¾‘å™¨"><a href="#2-linux-viå’Œvimç¼–è¾‘å™¨" class="headerlink" title="2.linux viå’Œvimç¼–è¾‘å™¨"></a>2.linux viå’Œvimç¼–è¾‘å™¨</h2><p>linuxç³»ç»Ÿå†…ç½®çš„viæ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆç›¸å½“äºwindowsçš„è®°äº‹æœ¬ï¼‰</p>
<p>vimæ˜¯viçš„å¢å¼ºç‰ˆï¼Œæœ‰ç¨‹åºç¼–è¾‘èƒ½åŠ›</p>
<h3 id="2-1å¸¸ç”¨çš„ä¸‰ç§æ¨¡å¼ï¼š"><a href="#2-1å¸¸ç”¨çš„ä¸‰ç§æ¨¡å¼ï¼š" class="headerlink" title="2.1å¸¸ç”¨çš„ä¸‰ç§æ¨¡å¼ï¼š"></a>2.1å¸¸ç”¨çš„ä¸‰ç§æ¨¡å¼ï¼š</h3><ol>
<li>æ­£å¸¸æ¨¡å¼ï¼šç”¨vimæ‰“å¼€æ–‡æ¡£å°±ç›´æ¥è¿›å…¥çš„<strong>é»˜è®¤æ¨¡å¼</strong>ï¼Œå¯ä»¥ä¸Šä¸‹å·¦å³ç§»åŠ¨å…‰æ ‡ï¼Œå¯ä»¥<strong>åˆ é™¤å­—ç¬¦</strong>æˆ–<strong>åˆ é™¤æ•´è¡Œ</strong></li>
<li>æ’å…¥æ¨¡å¼ï¼šè¾“å…¥<code>i/I</code></li>
<li>å‘½ä»¤è¡Œæ¨¡å¼ï¼šè¯»å–ï¼Œå­˜ç›˜ï¼Œæ›¿æ¢ï¼Œç¦»å¼€vimï¼Œæ˜¾ç¤ºè¡Œå·ã€‚<strong>ä»æ’å…¥æ¨¡å¼è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼â€”-&gt;å…ˆè¾“å…¥<code>esc</code>ï¼Œå†è¾“å…¥å†’å·ï¼ˆ<code>:</code>ï¼‰</strong></li>
</ol>
<h3 id="2-2vi-vimçš„å¿«æ·é”®ï¼š"><a href="#2-2vi-vimçš„å¿«æ·é”®ï¼š" class="headerlink" title="2.2vi&#x2F;vimçš„å¿«æ·é”®ï¼š"></a>2.2vi&#x2F;vimçš„å¿«æ·é”®ï¼š</h3><ol>
<li>vi&#x2F;vimçš„å„ç§æ¨¡å¼çš„åˆ‡æ¢ï¼šè¾“å…¥<code>vim filename</code>æ‰“å¼€æ–‡ä»¶ï¼ˆé»˜è®¤æ¨¡å¼ï¼‰ï¼Œè¾“å…¥i&#x2F;Iè¿›å…¥ç¼–è¾‘æ¨¡å¼ æŒ‰escå›åˆ°é»˜è®¤æ¨¡å¼ï¼Œåœ¨é»˜è®¤æ¨¡å¼è¾“å…¥ï¼šæˆ–è€… &#x2F; è¿›å…¥å‘½ä»¤æ¨¡å¼ æŒ‰ä¸‹escé”®é€€å‡ºã€‚<strong>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼šwqï¼ˆä¿å­˜é€€å‡ºï¼‰ï¼Œqï¼ˆé€€å‡ºï¼Œä¸ä¿å­˜ï¼‰ï¼Œqï¼ï¼ˆå¼ºåˆ¶é€€å‡ºï¼Œä¸ä¿å­˜ï¼‰</strong>ã€‚</li>
<li><strong>æ‹·è´å½“å‰è¡Œï¼š</strong><code>yy</code>ï¼Œè‹¥è¦æ‹·è´å½“å‰è¡Œå‘ä¸‹5è¡Œï¼ˆåŒ…æ‹¬å½“å‰è¡Œï¼‰ <code>5yy</code>ï¼ˆé€‰ä¸­å‡ è¡Œï¼‰ç„¶åè¾“å…¥pï¼ˆç²˜è´´ï¼‰</li>
<li><strong>åˆ é™¤å½“å‰è¡Œï¼š</strong><code>dd</code>ï¼Œè‹¥è¦åˆ é™¤å½“å‰è¡Œå‘ä¸‹5è¡Œï¼ˆåŒ…æ‹¬å½“å‰è¡Œï¼‰ <code>5dd</code></li>
<li><strong>æŸ¥æ‰¾å…³é”®å­—ï¼š</strong>è¦åœ¨<em>å‘½ä»¤è¡Œ</em>ä¸‹è¿›è¡Œæ“ä½œï¼šè¿›å…¥å‘½ä»¤è¡Œï¼Œç„¶åè¾“å…¥**&#x2F;å…³é”®å­—**ï¼Œå›è½¦æŸ¥æ‰¾ï¼Œè¾“å…¥næ˜¯æŸ¥æ‰¾ä¸‹ä¸€ä¸ª</li>
<li><strong>è®¾ç½®æ–‡ä»¶è¡Œå·ï¼š</strong><code>set nu</code>ï¼ˆè®¾ç½®ï¼‰ï¼Œ<code>set nonu</code>ï¼ˆå–æ¶ˆæ–‡ä»¶è¡Œå·ï¼‰</li>
<li><strong>è·³è½¬æ–‡ä»¶é¦–å°¾è¡Œï¼š</strong>åœ¨<em>é»˜è®¤æ¨¡å¼</em>ä¸‹ï¼Œ<code>G</code>å°±æ˜¯æ–‡ä»¶å°¾è¡Œï¼Œ<code>gg</code>æ˜¯æ–‡ä»¶é¦–è¡Œã€‚</li>
<li><strong>æ’¤é”€åŠ¨ä½œï¼š</strong>åœ¨<em>é»˜è®¤æ¨¡å¼</em>ä¸‹ï¼Œè¾“å…¥<code>u</code>ã€‚</li>
<li><strong>å¿«é€Ÿå®šä½åˆ°æŸä¸€è¡Œï¼š</strong>åœ¨<em>é»˜è®¤æ¨¡å¼ä¸‹</em>ï¼Œè¾“å…¥20ï¼ˆå®šä½åˆ°20è¡Œï¼‰ï¼Œå†è¾“å…¥<code>shift+g</code></li>
<li>å…¶ä»–â€¦çœ‹hspæ–‡æ¡£</li>
</ol>
<hr>
<h3 id="2-3-å…³æœºé‡å¯"><a href="#2-3-å…³æœºé‡å¯" class="headerlink" title="2.3.å…³æœºé‡å¯"></a>2.3.å…³æœºé‡å¯</h3><ol>
<li><code>shutdown -h(haltçš„æ„æ€ï¼šåœæ­¢) now</code> ç«‹åˆ»è¿›è¡Œå…³æœº</li>
<li><code>shutdown -h 1</code>ï¼Œæé†’ç”¨æˆ·ä¸€åˆ†é’Ÿä¹‹åå…³æœºï¼Œä¸ç›´æ¥è¾“å…¥shutdownçš„æ•ˆæœä¸€è‡´</li>
<li><code>shutdown -rï¼ˆrebootçš„æ„æ€ï¼‰ now</code> ç°åœ¨é‡å¯è®¡ç®—æœº</li>
<li><code>halt</code> å…³æœº</li>
<li><code>reboot</code> é‡å¯è®¡ç®—æœº</li>
<li><code>sync</code> æŠŠå†…å­˜æ•°æ®åŒæ­¥åˆ°ç£ç›˜ï¼šç›®å‰çš„<code>shutdown/reboot/halt</code>å‘½ä»¤éƒ½ä¼šåœ¨å…³æœºå‰è‡ªåŠ¨æ‰§è¡Œsyncå‘½ä»¤</li>
</ol>
<h4 id="2-3-1ç”¨æˆ·ç™»é™†æˆ–æ³¨é”€"><a href="#2-3-1ç”¨æˆ·ç™»é™†æˆ–æ³¨é”€" class="headerlink" title="2.3.1ç”¨æˆ·ç™»é™†æˆ–æ³¨é”€"></a>2.3.1ç”¨æˆ·ç™»é™†æˆ–æ³¨é”€</h4><ol>
<li>åˆ‡æ¢ç®¡ç†å‘˜è´¦æˆ· <code>su root</code> ç»†èŠ‚ï¼š<code>su - root</code> å’Œ<code>su root</code> ï¼šå‰è€…ç”¨æˆ·æ˜¯rootï¼ˆåœ¨rootå®¶ï¼‰ï¼Œåè€…ç”¨æˆ·è¿˜æ˜¯åŸç”¨æˆ·ï¼ˆåœ¨ahaoå®¶ï¼‰ï¼Œåªæ˜¯æœ‰äº†rootæƒé™</li>
<li>logoutæ³¨é”€å½“å‰ç”¨æˆ·ï¼šæ³¨æ„å¿…é¡»æ˜¯åœ¨ <em>éå›¾å½¢è¿è¡Œçº§åˆ«</em>ï¼ˆåœ¨shellä¸‹æ‰è¡Œï¼Œé€€å‡ºå½“å‰ç”¨æˆ·ï¼‰ï¼Œå¹¶ä¸”åœ¨ <em>è¿è¡Œçº§åˆ«ä¸º3</em> ä¸‹æ‰æœ‰æ•ˆã€‚</li>
</ol>
<hr>
<h3 id="2-4-ç”¨æˆ·ç®¡ç†"><a href="#2-4-ç”¨æˆ·ç®¡ç†" class="headerlink" title="2.4.ç”¨æˆ·ç®¡ç†"></a>2.4.ç”¨æˆ·ç®¡ç†</h3><ol>
<li>linuxæ˜¯å¤šç”¨æˆ·æ“ä½œç³»ç»Ÿï¼Œè‹¥è¦è¿›è¡Œæ“ä½œï¼Œé¦–å…ˆè¦å‘ç³»ç»Ÿç”³è¯·ç”¨æˆ·è´¦å·ã€‚</li>
<li><strong>æ·»åŠ ç”¨æˆ·ï¼š</strong> <code>useradd ç”¨æˆ·å</code> ï¼Œæ·»åŠ è°å°±ä¼šè‡ªåŠ¨åˆ›å»ºè¯¥ç”¨æˆ·çš„å®¶ç›®å½•ï¼Œåœ¨&#x2F;home&#x2F;ç”¨æˆ·å ä¸­ã€‚</li>
<li><code>useradd -d æŒ‡å®šç›®å½• ç”¨æˆ·å</code> åœ¨æŒ‡å®šç›®å½•ä¸‹ï¼ˆæ²¡æœ‰å¯ä»¥è‡ªåŠ¨åˆ›å»ºï¼‰ï¼Œåˆ›å»ºç”¨æˆ·ååŒåæ–‡ä»¶å¤¹ã€‚</li>
<li><code>passwd ç”¨æˆ·å</code> ç»™ç”¨æˆ·æŒ‡å®šå¯†ç ï¼Œè‹¥ä¸å†™ç”¨æˆ·ååˆ™é»˜è®¤ç»™å½“å‰ç”¨æˆ·è®¾ç½®ã€‚</li>
<li>æ˜¾ç¤ºå½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç›®å½• <code>pwd</code></li>
<li>åˆ é™¤ç”¨æˆ·ï¼š<code>userdel ç”¨æˆ·å</code> ï¼ˆä¼šä¿ç•™å®¶ç›®å½•ï¼‰ï¼Œ<code>userdel -r ç”¨æˆ·å</code>ï¼ˆä¼šè¿å¸¦å®¶ç›®å½•ä¸€èµ·åˆ é™¤ï¼‰ï¼Œä½†æ˜¯ä¸¤è€…éƒ½ä¸èƒ½ç»§ç»­ç™»é™†äº†ã€‚</li>
<li>ä¸€èˆ¬æƒ…å†µä¸‹å»ºè®®ä¿ç•™å®¶ç›®å½•ï¼šå·¥ä½œèµ„æ–™è¦ä¿ç•™ã€‚</li>
</ol>
<h4 id="2-4-1-ç”¨æˆ·ç®¡ç†2"><a href="#2-4-1-ç”¨æˆ·ç®¡ç†2" class="headerlink" title="2.4.1 ç”¨æˆ·ç®¡ç†2"></a>2.4.1 ç”¨æˆ·ç®¡ç†2</h4><ol>
<li>æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æŒ‡ä»¤ï¼š<code>id ç”¨æˆ·å</code>ï¼Œå¯ä»¥æŸ¥è¯¢uidï¼Œgidå’Œå½“å‰ç»„</li>
<li>åˆ‡æ¢ç”¨æˆ·<code>su - ç”¨æˆ·å</code> æ³¨æ„ï¼šä»æƒé™é«˜çš„ç”¨æˆ·åˆ‡æ¢åˆ°æƒé™ä½çš„ç”¨æˆ·ä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œåä¹‹éœ€è¦ã€‚åˆ‡æ¢å›åŸæ¥ï¼šexit&#x2F;logout</li>
<li>æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼š<code>whoamiï¼ˆå½“å‰ç”¨æˆ·åï¼‰/who am i(é¦–æ¬¡ç™»é™†çš„ç”¨æˆ·)</code></li>
</ol>
<h4 id="2-4-2-ç”¨æˆ·ç»„"><a href="#2-4-2-ç”¨æˆ·ç»„" class="headerlink" title="2.4.2 ç”¨æˆ·ç»„"></a>2.4.2 ç”¨æˆ·ç»„</h4><ol>
<li>ç»™æƒé™ç›¸åŒçš„ç»„è¿›è¡Œåˆ†ç»„</li>
<li><code>groupadd ç»„å</code> è¿›è¡Œæ·»åŠ ï¼Œ<code>groupdel ç»„å</code> è¿›è¡Œåˆ é™¤</li>
<li>linuxç‰¹ç‚¹ï¼šæ²¡æœ‰æ¶ˆæ¯å°±æ˜¯å¥½æ¶ˆæ¯ã€‚å½“é»˜è®¤åˆ›å»ºä¸€ä¸ªç”¨æˆ·æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†ç”¨æˆ·åˆ†é…ç»™ä¸ç”¨æˆ·åç›¸åŒçš„ç»„ã€‚</li>
<li>å°†ç”¨æˆ·æŒ‡å®šç»„åè¿›è¡Œæ·»åŠ ï¼š<code>useradd -g ç”¨æˆ·ç»„ ç”¨æˆ·å</code></li>
<li>å°†ç”¨æˆ·åˆ‡æ¢åˆ°å¦å¤–çš„ç»„ï¼š<code>usermod -g ç”¨æˆ·ç»„ ç”¨æˆ·å</code></li>
<li>ç”¨æˆ·ç»„å’Œç›¸å…³æ–‡ä»¶ï¼š</li>
</ol>
<ul>
<li>&#x2F;etc&#x2F;passwdæ–‡ä»¶ï¼šç”¨æˆ·é…ç½®æ–‡ä»¶ï¼Œè®°å½•å„ç§ä¿¡æ¯ã€‚æ¯è¡Œå«ä¹‰ï¼š<em>ç”¨æˆ·åï¼šå£ä»¤ï¼šç”¨æˆ·æ ‡è¯†å·ï¼šç»„æ ‡è¯†å·ï¼šæ³¨é‡Šæ€§æè¿°ï¼šä¸»ç›®å½•ï¼šç™»å½•Shll</em></li>
<li>&#x2F;etc&#x2F;shadowæ–‡ä»¶ï¼šå£ä»¤é…ç½®æ–‡ä»¶ï¼Œæ¯è¡Œå«ä¹‰ï¼š<em>ç™»å½•åï¼šåŠ å¯†å£ä»¤ï¼šæœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´ï¼šæœ€å°æ—¶é—´é—´éš”ï¼šæœ€å¤§æ—¶é—´é—´éš”ï¼šè­¦å‘Šæ—¶é—´ï¼šä¸æ´»åŠ¨æ—¶é—´ï¼šå¤±æ•ˆæ—¶é—´ï¼šæ ‡å¿—</em></li>
<li>&#x2F;etc&#x2F;groupæ–‡ä»¶ï¼šè®°å½•linuxåŒ…å«çš„ç»„çš„ä¿¡æ¯ï¼Œæ¯è¡Œå«ä¹‰ï¼š<em>ç»„åï¼šå£ä»¤ï¼šç»„æ ‡è¯†å·ï¼šç»„å†…ç”¨æˆ·åˆ—è¡¨</em></li>
<li>shellçš„ä½œç”¨ï¼šå°†å£ä»¤è¿›è¡Œè§£é‡Šï¼Œè¾“å…¥linuxå†…æ ¸æ“ä½œã€‚</li>
</ul>
<hr>
<h2 id="3-å®ç”¨æŒ‡ä»¤"><a href="#3-å®ç”¨æŒ‡ä»¤" class="headerlink" title="3.å®ç”¨æŒ‡ä»¤"></a>3.å®ç”¨æŒ‡ä»¤</h2><h3 id="3-1è¿è¡Œçº§åˆ«"><a href="#3-1è¿è¡Œçº§åˆ«" class="headerlink" title="3.1è¿è¡Œçº§åˆ«"></a>3.1è¿è¡Œçº§åˆ«</h3><ol>
<li><p>0å…³æœºï¼Œ1å•ç”¨æˆ·ï¼ˆå¯ä»¥æ‰¾å›ä¸¢å¤±çš„å¯†ç ï¼‰ï¼Œ2å¤šç”¨æˆ·çŠ¶æ€ä¸‹æ²¡æœ‰ç½‘ç»œæœåŠ¡ï¼Œ3å¤šç”¨æˆ·çŠ¶æ€ä¸‹æœ‰ç½‘ç»œæœåŠ¡ï¼ˆ2 4ç”¨çš„å°‘ï¼Œè¿™ä¸ªç”¨çš„å¤šï¼‰ï¼Œ4ç³»ç»Ÿæœªä½¿ç”¨ä¿ç•™ç»™ç”¨æˆ·ï¼Œ5å›¾å½¢ç•Œé¢ï¼Œ6ç³»ç»Ÿé‡å¯</p>
</li>
<li><p>å¸¸ç”¨3å’Œ5ï¼ŒinitæŒ‡ä»¤åˆ‡æ¢ä¸åŒçš„è¿è¡Œçº§åˆ«ï¼š<code>init 3</code>åˆ‡æ¢è‡³3</p>
</li>
<li><p>ä¿®æ”¹é»˜è®¤è¿è¡Œçº§åˆ«ï¼Œåœ¨centos7ä»¥å‰ï¼Œetc&#x2F;inittabæ–‡ä»¶ä¸­çš„</p>
<p><code>multi-user.target:analogous to runlevel 3 graphical.target:analogous to runlevel 5 </code>è¿™ä¸¤å¥è¯ä¸­</p>
</li>
<li><p>ä¹‹åï¼ˆcentos7ï¼‰ç”¨<code>systemctl get-default</code>å‘½ä»¤æŸ¥çœ‹å½“å‰ç”¨æˆ·çº§åˆ«<br><code>systemctl set-default TARGET.targetï¼ˆç”¨æˆ·çº§åˆ«ï¼‰</code>å‘½ä»¤ä¿®æ”¹å½“å‰ç”¨æˆ·çº§åˆ«</p>
</li>
</ol>
<h3 id="3-2æ‰¾å›rootå¯†ç "><a href="#3-2æ‰¾å›rootå¯†ç " class="headerlink" title="3.2æ‰¾å›rootå¯†ç "></a>3.2æ‰¾å›rootå¯†ç </h3><ol>
<li>ä¸åŒç‰ˆæœ¬ä¸åŒ</li>
<li>ä»¥7ä¹‹åä¸ºä¾‹ï¼šåœ¨å¼€æœºç•Œé¢æŒ‰â€œeâ€ï¼Œé€Ÿåº¦è¦å¿«ã€‚</li>
<li>çœ‹è€éŸ©æ–‡æ¡£ç…§æŠ„å°±è¡Œã€‚</li>
</ol>
<h3 id="3-3å¸®åŠ©æŒ‡ä»¤"><a href="#3-3å¸®åŠ©æŒ‡ä»¤" class="headerlink" title="3.3å¸®åŠ©æŒ‡ä»¤"></a>3.3å¸®åŠ©æŒ‡ä»¤</h3><ol>
<li><strong>man+æŒ‡ä»¤</strong>ï¼šè·å–å¸®åŠ©ä¿¡æ¯ï¼Œå¦‚<code>man ls</code>æŸ¥çœ‹lsæŒ‡ä»¤çš„å¸®åŠ©ä¿¡æ¯ï¼ˆls -aåˆ—å‡ºåŒ…æ‹¬ . å¼€å¤´çš„éšè—æ–‡ä»¶ï¼Œlinuxçš„éšè—æ–‡ä»¶ä»¥ . å¼€å¤´ï¼‰</li>
<li><strong>help+æŒ‡ä»¤</strong></li>
</ol>
<h3 id="3-4æ–‡ä»¶ç›®å½•æŒ‡ä»¤"><a href="#3-4æ–‡ä»¶ç›®å½•æŒ‡ä»¤" class="headerlink" title="3.4æ–‡ä»¶ç›®å½•æŒ‡ä»¤"></a>3.4æ–‡ä»¶ç›®å½•æŒ‡ä»¤</h3><ol>
<li><strong>pwd</strong>ï¼šæ˜¾ç¤ºå½“å‰æ‰€åœ¨çš„ç»å¯¹è·¯å¾„ã€‚ç›¸å¯¹è·¯å¾„ï¼šä»å½“å‰ç›®å½•å¼€å§‹æ‰¾ã€‚</li>
<li><strong>lsæ˜¾ç¤ºæ–‡ä»¶</strong>ï¼š-læ˜¯ä»¥åˆ—è¡¨å½¢å¼ï¼Œ-lhæ˜¯ä»¥å•ä½æ˜¾ç¤ºæ–‡ä»¶å¤§å°ã€‚</li>
<li><strong>cdåˆ‡æ¢</strong>ï¼šcd ~å›åˆ°å®¶ç›®å½•ï¼Œcd ..å›åˆ°ä¸Šä¸€ç›®å½•</li>
<li><strong>mkdir</strong>ï¼š<code>mkdir é€‰é¡¹ è¦åˆ›å»ºçš„ç›®å½•</code> å¦‚-pï¼šå¯ä»¥åˆ›å»ºå¤šçº§ç›®å½•ï¼Œ<code>mkdir -p /home/animal/dog</code>ï¼Œç›¸åº”çš„ç›®å½•éƒ½ä¼šåˆ›å»º</li>
<li><strong>rmdir</strong>ï¼šåˆ é™¤ç©ºç›®å½•ï¼Œ<code>rmdir é€‰é¡¹ è¦åˆ é™¤çš„ç©ºç›®å½•</code>ï¼Œè‹¥è¦åˆ é™¤éç©ºç›®å½•ï¼š<code>rm -rf è¦åˆ é™¤çš„ç›®å½•</code>ï¼šè¯¥å‘½ä»¤ä¼šé€’å½’åˆ é™¤æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ã€‚ï¼ˆè·‘è·¯æŒ‡ä»¤rm -rf &#x2F;*ï¼‰</li>
<li><strong>touch</strong>ï¼šåˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œ<code>touch æ–‡ä»¶åç§°</code></li>
<li><strong>cp</strong>ï¼š<code>cp é€‰é¡¹ source dest</code>ï¼šå¤åˆ¶ä»æºæ–‡ä»¶å¤¹sourceåˆ°ç›®æ ‡æ–‡ä»¶å¤¹destï¼Œ-rï¼šé€’å½’æ•´ä¸ªæ–‡ä»¶å¤¹ã€‚ç¬¬äºŒæ¬¡æ‰§è¡Œä¼šè¦†ç›–ï¼Œç³»ç»Ÿä¼šæç¤ºã€‚å¼ºåˆ¶è¦†ç›–ä¸”ä¸æç¤º<code>\cp</code> åæ–œæ cp</li>
<li><strong>rmæŒ‡ä»¤</strong>ï¼š<code>rm é€‰é¡¹ è¦åˆ é™¤çš„ç›®å½•æˆ–è€…æ–‡ä»¶</code>ï¼š-rï¼šé€’å½’åˆ é™¤æ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œ-fï¼šå¼ºåˆ¶åˆ é™¤ä¸æç¤ºï¼Œ-rfï¼šé€’å½’åˆ é™¤ä¸”ä¸æç¤º</li>
<li><strong>mvæŒ‡ä»¤</strong>ï¼šç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•æˆ–è€…é‡å‘½åã€‚<code>mv è€æ–‡ä»¶ æ–°æ–‡ä»¶ï¼ˆé‡å‘½åï¼‰</code>ï¼Œ<code>mv è€æ–‡ä»¶ä½ç½® æ–°ä½ç½®ï¼ˆå°†æ–‡ä»¶ç§»åŠ¨åˆ°è¿™ä¸ªä½ç½®å»ï¼‰</code>ï¼Œè¿˜å¯ä»¥ç§»åŠ¨å¹¶ä¸”é‡å‘½åã€‚<code>mv è€æ–‡ä»¶å æ–°è·¯å¾„/æ–°åç§°</code>ï¼Œå¯¹æ–‡ä»¶å¤¹ä¹Ÿæ˜¯ç›¸åŒçš„æ“ä½œ</li>
<li><strong>catæŒ‡ä»¤</strong>ï¼šæŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼Œ<code>cat é€‰é¡¹ è¦æŸ¥çœ‹çš„æ–‡ä»¶</code> å¸¸ç”¨é€‰é¡¹ï¼š-nï¼Œæ˜¾ç¤ºè¡Œå·ã€‚<em>å¯¹äºé‡è¦çš„æ–‡ä»¶æ¨èä½¿ç”¨cat</em>ï¼Œå› ä¸ºè¿™ä¸ªæŒ‡ä»¤åªèƒ½è¯»ä¸èƒ½æ”¹ã€‚ä¸ºäº†æ–¹ä¾¿æµè§ˆï¼Œä¸€èˆ¬ä¼šå¸¦ä¸Š<strong>ç®¡é“å‘½ä»¤</strong> | more(å°†å‰ä¸€ä¸ªæŒ‡ä»¤çš„ç»“æœäº¤ç»™åé¢moreçš„æŒ‡ä»¤è¿›è¡Œ<em>äº¤äº’</em>ï¼Œå¦‚å¯ä»¥ç¿»é¡µç­‰)</li>
<li><strong>moreæŒ‡ä»¤</strong>ï¼šæ˜¯åŸºäºviç¼–è¾‘å™¨çš„æ–‡æœ¬è¿‡æ»¤å™¨ï¼Œä»¥å…¨å±å¹•çš„æ–¹å¼æŒ‰é¡µæ˜¾ç¤ºæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹ã€‚<em>å¯ä»¥å’Œcaté…åˆä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨ã€‚</em>moreæŒ‡ä»¤ä¸­çš„å¿«æ·é”®ï¼š<strong>ç©ºæ ¼é”®</strong>(å‘ä¸‹ç¿»é¡µ)ï¼Œ<strong>enteré”®</strong>ï¼ˆå‘ä¸‹ä¸€è¡Œï¼‰ï¼Œ<strong>q</strong>ï¼ˆç¦»å¼€æ–‡ä»¶ï¼Œå¹¶ä¸”ä¸å†æ˜¾ç¤ºå†…å®¹ï¼‰ï¼Œ<strong>ctrl+f</strong>ï¼ˆå‘ä¸‹æ»šåŠ¨ä¸€å±ï¼‰ï¼Œ<strong>ctrl+b</strong>ï¼ˆè¿”å›ä¸Šä¸€å±ï¼‰ï¼Œ**&#x3D;<strong>ï¼ˆè¾“å‡ºå½“å‰çš„è¡Œå·ï¼‰ï¼Œ</strong>:f**ï¼ˆè¾“å‡ºæ–‡ä»¶åå’Œå½“å‰è¡Œå·ï¼‰ã€‚</li>
<li><strong>lessæŒ‡ä»¤</strong>ï¼šä¸moreç±»ä¼¼ï¼Œä½†æ¯”moreæ›´åŠ å¼ºå¤§ï¼Œæ”¯æŒå„ç§æ˜¾ç¤ºç»ˆç«¯ã€‚lessæ–‡ä»¶æ˜¾ç¤ºå†…å®¹ï¼Œå¹¶ä¸æ˜¯ä¸€æ¬¡æ€§å…¨åŠ è½½ï¼Œè€Œæ˜¯æ ¹æ®æ˜¾ç¤ºéœ€è¦åŠ è½½ï¼Œå¯¹å¤§å‹æ–‡ä»¶æ•ˆç‡æ›´é«˜ã€‚<strong>ç©ºæ ¼é”®</strong>ï¼šå‘ä¸‹ç¿»é¡µï¼Œ<strong>PageDownå’ŒPageUp</strong>ï¼šå‘ä¸Šå‘ä¸‹ç¿»é¡µã€‚**&#x2F;å­—ä¸²<strong>ï¼šnï¼šå‘ä¸‹æŸ¥æ‰¾ï¼ŒNï¼šå‘ä¸ŠæŸ¥æ‰¾ã€‚</strong>q**ï¼šç¦»å¼€lessè¿™ä¸ªç¨‹åºã€‚</li>
<li><strong>echoæŒ‡ä»¤</strong>ï¼šè¾“å‡ºå†…å®¹åˆ°æ§åˆ¶å°ï¼Œ<code>echo é€‰é¡¹ è¾“å‡ºå†…å®¹</code></li>
<li><strong>headæŒ‡ä»¤</strong>ï¼š<code>head æ–‡ä»¶å</code>é»˜è®¤æŸ¥çœ‹æ–‡ä»¶çš„å¤´åè¡Œå†…å®¹ã€‚<code>head -n 5 æ–‡ä»¶å</code> -næŒ‡å®šæŸ¥çœ‹æ–‡ä»¶å¤´å‡ è¡Œå†…å®¹</li>
<li><strong>tailæŒ‡ä»¤</strong>ï¼šä¸headç›¸åï¼Œé»˜è®¤æŸ¥çœ‹å°¾10è¡Œçš„å†…å®¹ï¼Œ-nç”¨æ³•ç›¸åŒï¼Œ<code>tail -f æ–‡ä»¶å</code>å®æ—¶è¿½è¸ªè¯¥æ–‡æ¡£çš„æ‰€æœ‰æ›´æ–°ã€‚</li>
<li><strong>ç®­å¤´&gt;å’Œ&gt;&gt;æŒ‡ä»¤</strong>:è¾“å‡ºé‡å®šå‘å’Œ&gt;&gt;è¿½åŠ ï¼Œechoå’Œ&gt;é…åˆï¼šå°†è¦è¾“å‡ºçš„æŒ‡ä»¤å†™åœ¨æŒ‡å®šçš„æ–‡ä»¶ä¸­ã€‚&gt;ä¼šè¦†ç›–æ–‡ä»¶ä¸­çš„åŸå†…å®¹ï¼Œ&gt;&gt;è¿½åŠ å†…å®¹ï¼ŒåŸå…ˆçš„å†…å®¹ä¸ä¼šè¦†ç›–ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºã€‚</li>
</ol>
<ul>
<li>åŸºæœ¬è¯­æ³•ï¼š</li>
<li><code>ls -l &gt; æ–‡ä»¶</code> lsï¼ˆåˆ—è¡¨ï¼‰å‡ºæ¥çš„å†…å®¹å†™å…¥æ–‡ä»¶ä¸­ï¼ˆè¦†ç›–ï¼‰ã€‚</li>
<li><code>ls -al &gt;&gt; æ–‡ä»¶</code>åˆ—è¡¨å‡ºæ¥çš„å†…å®¹è¿½åŠ åˆ°æ–‡ä»¶çš„æœ«å°¾ã€‚</li>
<li><code>cat æ–‡ä»¶1 &gt; æ–‡ä»¶2</code>æ–‡ä»¶1å†…å®¹è¦†ç›–æ–‡ä»¶2å†…å®¹</li>
<li><code>echo &quot;å†…å®¹&quot; &gt;&gt; æ–‡ä»¶</code> å°†è¦åœ¨æ§åˆ¶å°è¾“å‡ºçš„å†…å®¹è¿½åŠ åˆ°æ–‡ä»¶</li>
</ul>
<ol>
<li><strong>lnæŒ‡ä»¤</strong>ï¼š</li>
</ol>
<ul>
<li><em>è½¯é“¾æ¥</em>ï¼Œä¹Ÿç§°ä¸º<em>ç¬¦å·é“¾æ¥</em>ï¼Œç±»ä¼¼äºwindowsé‡Œé¢çš„å¿«æ·æ–¹å¼ã€‚ä¸»è¦å­˜æ”¾äº†é“¾æ¥å…¶ä»–æ–‡ä»¶çš„è·¯å¾„ã€‚</li>
<li>è¯´ç™½äº†å°±æ˜¯è®¿é—®ä¸€ä¸ªå·²ç»é“¾æ¥å¥½çš„ï¼Œå°±ç›¸å½“äºè®¿é—®é‚£ä¸ªè¢«é“¾æ¥çš„æ–‡ä»¶ï¼Œç›¸å½“äºåˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼æ¥è®¿é—®ç¨‹åºçš„æ„æ€ã€‚</li>
<li>è¯­æ³•ï¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥åˆ°å“ªå„¿<code>ln -s åŸæ–‡ä»¶æˆ–ç›®å½• è½¯è¿æ¥å(è‡ªå®šä¹‰è½¯é“¾æ¥åï¼Œå¯ä»¥åŠ è·¯å¾„ï¼Œå°±æ˜¯è‡ªå®šä¹‰çš„è½¯é“¾æ¥åˆ›å»ºåˆ°å“ªå„¿)</code></li>
<li>åˆ é™¤çš„è¯ç›´æ¥rmåˆ é™¤è½¯é“¾æ¥å</li>
</ul>
<ol>
<li>historyæŒ‡ä»¤ï¼šæŸ¥çœ‹å·²ç»æ‰§è¡Œè¿‡çš„å†å²å‘½ä»¤ã€‚<code>history 10</code>:æŸ¥çœ‹å†å²æ‰§è¡Œè¿‡çš„10æ¡æŒ‡ä»¤ã€‚<code>!5</code>ï¼šæ‰§è¡Œæ›¾ç»æ‰§è¡Œè¿‡çš„ç¬¬äº”æ¡æŒ‡ä»¤ã€‚</li>
</ol>
<h3 id="3-5æ—¶é—´æ—¥æœŸæŒ‡ä»¤"><a href="#3-5æ—¶é—´æ—¥æœŸæŒ‡ä»¤" class="headerlink" title="3.5æ—¶é—´æ—¥æœŸæŒ‡ä»¤"></a>3.5æ—¶é—´æ—¥æœŸæŒ‡ä»¤</h3><ol>
<li>dateæŒ‡ä»¤ï¼šæ˜¾ç¤ºå½“å‰æ—¥æœŸï¼š</li>
</ol>
<ul>
<li><code>date</code>ï¼šæ˜¾ç¤ºå½“å‰æ—¶é—´</li>
<li><code>date +%Y</code> ï¼šæ˜¾ç¤ºå½“å‰å¹´ä»½<br><code>date +%m</code>ï¼šæ˜¾ç¤ºå½“å‰æœˆä»½<br><code>date +%d</code>ï¼šæ˜¾ç¤ºå½“å‰æ˜¯å“ªä¸€å¤©<br><code>date&quot;+%Y-%m-%d%H:%M:%Sâ€</code>ï¼šæ˜¾ç¤ºå¹´æœˆæ—¥æ—¶åˆ†ç§’,æŒ‰ç…§å›ºå®šæ ¼å¼</li>
<li><code>date -s å­—ç¬¦ä¸²æ—¶é—´</code>ï¼Œå¯ä»¥è®¾ç½®å½“å‰ç³»ç»Ÿæ—¶é—´ã€‚</li>
<li><code>cal é€‰é¡¹</code>ï¼šä¸åŠ é€‰é¡¹ç›´æ¥æ˜¾ç¤ºå½“å‰æœˆçš„æ—¥å†,<code>cal 2022</code>:æ˜¾ç¤º2022å¹´æ•´å¹´çš„æ—¥å†ã€‚</li>
</ul>
<h3 id="3-6æŸ¥æ‰¾æŒ‡ä»¤"><a href="#3-6æŸ¥æ‰¾æŒ‡ä»¤" class="headerlink" title="3.6æŸ¥æ‰¾æŒ‡ä»¤"></a>3.6æŸ¥æ‰¾æŒ‡ä»¤</h3><ol>
<li><p>findæŒ‡ä»¤ï¼š</p>
<ul>
<li><code>find æ–‡ä»¶å¤¹å -name æ–‡ä»¶å</code>ï¼šæ ¹æ®åç§°æŸ¥æ‰¾</li>
<li><code>find æ–‡ä»¶å¤¹å -user æ–‡ä»¶å</code>ï¼šæŒ‰æ‹¥æœ‰è€…æŸ¥æ‰¾</li>
<li><code>find æ–‡ä»¶å¤¹å -size 200M</code>ï¼šæŒ‰æ–‡ä»¶å¤§å°æŸ¥æ‰¾ï¼ˆ+æ˜¯å¤§äºï¼Œ-æ˜¯å°äºï¼Œä¸å†™næ˜¯ç­‰äºï¼Œæˆ‘è¿™ä¸ªä¾‹å­å°±æ˜¯ç­‰äºã€‚è¿˜æœ‰å•ä½æœ‰kï¼ŒMï¼ŒGï¼‰</li>
<li>æ–‡ä»¶å¤¹åå†™<code>/</code>å°±æ˜¯æŸ¥å…¨éƒ¨</li>
</ul>
</li>
<li><p>locateæŒ‡ä»¤ï¼šæŸ¥æ‰¾é€Ÿåº¦ç‰¹åˆ«å¿«ï¼Œæ— éœ€éå†æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œæ˜¯å»ºç«‹locateæ•°æ®åº“ã€‚ç¬¬ä¸€æ¬¡è¿è¡Œå‰ï¼Œå¿…é¡»ä½¿ç”¨<strong>updatedbæŒ‡ä»¤</strong>åˆ›å»ºã€‚</p>
</li>
<li><p>whichæŒ‡ä»¤ï¼šå¯ä»¥æŸ¥çœ‹æŒ‡ä»¤åœ¨å“ªä¸ªç›®å½•ä¸‹</p>
</li>
<li><p>grepæŒ‡ä»¤ï¼šgrepè¿‡æ»¤æŸ¥æ‰¾ä¹Ÿå°±æ˜¯åªæŸ¥æ‰¾è¿™ä¸€ä¸ªï¼Œå¾€å¾€å’Œç®¡é“ç¬¦å·</p>
<figure class="highlight 1c"><table><tr><td class="code"><pre><code class="hljs 1c"><span class="hljs-string">|</span><br></code></pre></td></tr></table></figure>

<p>ç»“åˆä½¿ç”¨ï¼Œè¡¨ç¤ºå°†å‰ä¸€ä¸ªå‘½ä»¤çš„å¤„ç†ç»“æœè¾“å‡ºä¼ é€’ç»™åé¢çš„å‘½ä»¤å¤„ç†ã€‚</p>
<ul>
<li><code>-n</code>æ˜¾ç¤ºåŒ¹é…è¡Œå’Œè¡Œå·</li>
<li><code>-i</code>å¿½ç•¥å­—æ¯å¤§å°å†™</li>
</ul>
</li>
</ol>
<h3 id="3-7å‹ç¼©å’Œè§£å‹"><a href="#3-7å‹ç¼©å’Œè§£å‹" class="headerlink" title="3.7å‹ç¼©å’Œè§£å‹"></a>3.7å‹ç¼©å’Œè§£å‹</h3><ol>
<li><p>gzip&#x2F;gunzipæŒ‡ä»¤ï¼šgzipç”¨äºå‹ç¼©æ–‡ä»¶ï¼Œgunzipç”¨äºè§£å‹æ–‡ä»¶</p>
<ul>
<li><code>gzip æ–‡ä»¶</code>ï¼šå‹ç¼©æ–‡ä»¶ä¸º*.gzæ–‡ä»¶</li>
<li><code>gunzip æ–‡ä»¶.gz</code>ï¼šè§£å‹ç¼©gzæ–‡ä»¶</li>
</ul>
</li>
<li><p>zip&#x2F;unzipï¼šå¾€å¾€ç”¨äºæ–‡ä»¶å¤¹å‹ç¼©ï¼Œé¡¹ç›®æ‰“åŒ…å‘å¸ƒã€‚</p>
<ul>
<li><code>zip é€‰é¡¹ å‹ç¼©æˆ.zip è¦å‹ç¼©çš„å†…å®¹</code></li>
<li><code>unzip é€‰é¡¹ æ–‡ä»¶å.zip</code></li>
<li><code>zip -r</code>ï¼šé€’å½’å‹ç¼©ï¼Œå³å‹ç¼©ç›®å½•ï¼šå°†æŸä¸€ä¸ªæ–‡ä»¶å¤¹ä»¥åŠä¸‹é¢çš„å†…å®¹å‹ç¼©ã€‚æ³¨æ„å‹ç¼©ç›®å½•å¿…é¡»ç”¨è¿™ä¸ªå‘½ä»¤ã€‚</li>
<li><code>unzip -d è·¯å¾„ è¦è§£å‹çš„æ–‡ä»¶.zip</code>ï¼šå°†æ–‡ä»¶è§£å‹åˆ°å“ªå„¿ï¼Œè¦è§£å‹çš„æ–‡ä»¶å‰å¯åŠ æ­¤æ–‡ä»¶çš„è·¯å¾„ï¼Œæ›´ç²¾ç¡®ã€‚</li>
</ul>
</li>
<li><p>taræŒ‡ä»¤ï¼šæ˜¯æ‰“åŒ…æŒ‡ä»¤ï¼Œæ²¡æœ‰untarä¸€è¯´ã€‚æœ€åæ‰“åŒ…çš„æŒ‡ä»¤æ˜¯.tar.gzæ–‡ä»¶ã€‚</p>
<ul>
<li><p>è¯­æ³•ï¼š<code>tar é€‰é¡¹ xxx.tar.gz(æ˜¯æ‰“åŒ…ä»¥åçš„æ–‡ä»¶å) æ‰“åŒ…çš„å†…å®¹</code>ï¼Œæ‰“åŒ…ç›®å½•å’Œæ–‡ä»¶éƒ½è¡Œã€‚</p>
</li>
<li><p><code>-c</code>ï¼šäº§ç”Ÿ.taræ‰“åŒ…æ–‡ä»¶ã€‚</p>
<p><code>-v</code>ï¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</p>
<p><code>-f</code>ï¼šæŒ‡å®šå‹ç¼©åçš„æ–‡ä»¶å</p>
<p><code>-z</code>ï¼šç”¨gzipå¯¹æ–‡æ¡£è¿›è¡Œå‹ç¼©æˆ–è§£å‹</p>
<p><code>-x</code>ï¼šè§£åŒ….taræ–‡ä»¶</p>
</li>
<li><p>Linuxåªèƒ½å‹ç¼©ä¸€ä¸ªæ–‡ä»¶ï¼Œè€Œå¤šä¸ªæ–‡ä»¶è¦å…ˆå¯¹å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ‰“åŒ…æ‰èƒ½å‹ç¼©ã€‚</p>
</li>
</ul>
</li>
</ol>
<hr>
<h2 id="4-linuxç»„çš„ä»‹ç»"><a href="#4-linuxç»„çš„ä»‹ç»" class="headerlink" title="4.linuxç»„çš„ä»‹ç»"></a>4.linuxç»„çš„ä»‹ç»</h2><ol>
<li>æ¯ä¸ªç”¨æˆ·å¿…é¡»å±äºä¸€ä¸ªç»„ï¼Œä¸èƒ½ç‹¬ç«‹äºç»„å¤–ã€‚</li>
<li>æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ï¼Œæ‰€æœ‰è€…ï¼Œæ‰€åœ¨ç»„ï¼Œå…¶ä»–ç»„çš„æ¦‚å¿µã€‚</li>
<li>æ–‡ä»¶å±äºå“ªä¸€ä¸ªç”¨æˆ·åˆ›å»ºçš„ï¼Œå°±å±äºè¿™ä¸ªç”¨æˆ·æ‰€åœ¨ç»„ï¼Œç»„å†…æˆå‘˜å¯¹è¿™ä¸ªæ–‡ä»¶æœ‰ä¸€å®šçš„æƒé™ï¼Œå…¶ä»–ç»„æˆå‘˜æ²¡æœ‰ã€‚</li>
</ol>
<h3 id="4-1æ‰€æœ‰è€…"><a href="#4-1æ‰€æœ‰è€…" class="headerlink" title="4.1æ‰€æœ‰è€…"></a>4.1æ‰€æœ‰è€…</h3><ol>
<li>æ–‡ä»¶&#x2F;ç›®å½•çš„æ‰€æœ‰è€…ï¼šä¸€èˆ¬æ¥è¯´ï¼Œè°åˆ›å»ºäº†è¯¥æ–‡ä»¶&#x2F;ç›®å½•ï¼Œè°å°±æ˜¯æ‰€æœ‰è€…ã€‚</li>
<li>æŸ¥çœ‹æ–‡ä»¶æ‰€æœ‰è€…å‘½ä»¤ï¼š<code>ls -ahl </code>:æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ–‡ä»¶çš„æ‰€æœ‰è€…ã€‚</li>
<li>ä¿®æ”¹æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼š<code>chown è¦æ”¹æˆçš„ç”¨æˆ·å æ–‡ä»¶å</code></li>
</ol>
<h3 id="4-2æ‰€åœ¨ç»„"><a href="#4-2æ‰€åœ¨ç»„" class="headerlink" title="4.2æ‰€åœ¨ç»„"></a>4.2æ‰€åœ¨ç»„</h3><ol>
<li>åˆ›å»ºç»„ï¼Œ<code>groupadd ç»„å</code></li>
<li>æ·»åŠ ç”¨æˆ· <code>useradd -g ç»„å ç”¨æˆ·</code></li>
<li>æ‰€åœ¨ç»„ï¼šå½“ç”¨æˆ·åˆ›å»ºäº†æ–‡ä»¶ä»¥åï¼Œæ–‡ä»¶æ‰€åœ¨ç»„å°±æ˜¯ç”¨æˆ·æ‰€åœ¨ç»„ã€‚</li>
<li>æŸ¥çœ‹æ–‡ä»¶&#x2F;ç›®å½•æ‰€åœ¨ç»„æŒ‡ä»¤ï¼š<code>ls -ahl</code>ï¼šç¬¬ä¸€ä¸ªæ˜¯ç”¨æˆ·åï¼Œç¬¬äºŒä¸ªæ˜¯ç»„åã€‚</li>
<li>ä¿®æ”¹æ–‡ä»¶æ‰€åœ¨ç»„ï¼š<code>chgrp ç»„å æ–‡ä»¶å</code></li>
</ol>
<h3 id="4-3å…¶ä»–ç»„"><a href="#4-3å…¶ä»–ç»„" class="headerlink" title="4.3å…¶ä»–ç»„"></a>4.3å…¶ä»–ç»„</h3><ol>
<li>é™¤æ–‡ä»¶çš„æ‰€æœ‰è€…å’Œæ‰€åœ¨ç»„çš„ç”¨æˆ·å¤–ï¼Œç³»ç»Ÿçš„å…¶ä»–ç”¨æˆ·éƒ½æ˜¯æ–‡ä»¶çš„å…¶ä»–ç»„ï¼šè¯´ç™½äº†å°±æ˜¯é™¤å»æ“ä½œçš„ç»„å°±æ˜¯å…¶ä»–ç»„</li>
<li>åœ¨æ·»åŠ ç”¨æˆ·æ—¶ï¼Œå¯ä»¥æŒ‡å®šå°†è¯¥ç”¨æˆ·æ·»åŠ åˆ°å“ªä¸ªç»„ä¸­ï¼ŒåŒæ ·çš„ç”¨rootçš„ç®¡ç†æƒé™å¯ä»¥æ”¹å˜æŸä¸ªç”¨æˆ·æ‰€åœ¨çš„ç»„ã€‚<ul>
<li>æ·»åŠ ï¼š<code>usermod -g æ–°ç»„å ç”¨æˆ·å</code></li>
<li>ä¿®æ”¹ï¼š<code>usermod -d ç›®å½•å ç”¨æˆ·å æ”¹å˜è¯¥ç”¨æˆ·ç™»é™†çš„åˆå§‹ç›®å½•</code>ï¼šä¿®æ”¹æ—¶å¿…é¡»è¦æœ‰<em>è¿›å…¥æ–°ç›®å½•çš„æƒé™</em>ã€‚</li>
</ul>
</li>
</ol>
<h2 id="5-æƒé™"><a href="#5-æƒé™" class="headerlink" title="5.æƒé™"></a>5.æƒé™</h2><h3 id="5-1rwxæƒé™"><a href="#5-1rwxæƒé™" class="headerlink" title="5.1rwxæƒé™"></a>5.1rwxæƒé™</h3><ol>
<li>ä¸¾ä¾‹ï¼š<code>-rwxrw-r--1 root root 1213 Feb 2 09:39 abc</code><ul>
<li>å‰åä½<code>-rwxrw-r--1</code></li>
<li>ç¬¬é›¶ä½<code>-</code>ï¼šç¬¬0ä½ç¡®å®šæ–‡ä»¶ç±»å‹(d,-,I,c,b)ï¼Œ-å°±æ˜¯æ²¡æœ‰<br>Iæ˜¯é“¾æ¥ï¼Œç›¸å½“äºwindowsçš„å¿«æ·æ–¹å¼<br>dæ˜¯ç›®å½•ï¼Œç›¸å½“äºwindowslçš„æ–‡ä»¶å¤¹<br>cæ˜¯å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼Œé¼ æ ‡ï¼Œé”®ç›˜<br>bæ˜¯å—è®¾å¤‡ï¼Œæ¯”å¦‚ç¡¬ç›˜</li>
<li>ç¬¬1-3ä½<code>rwx</code>ç¡®å®šæ‰€æœ‰è€…ï¼ˆè¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼‰æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ã€‚â€“User</li>
<li>ç¬¬4-6ä½<code>rw-</code>ç¡®å®šæ‰€å±ç»„ï¼ˆåŒç”¨æˆ·ç»„çš„ï¼‰æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ï¼Œ-Group</li>
<li>ç¬¬7-9<code>r--</code>ä½ç¡®å®šå…¶ä»–ç”¨æˆ·æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™-Other</li>
</ul>
</li>
<li>rwxæƒé™ï¼š<ul>
<li>æ–‡ä»¶ï¼š</li>
<li>[r]ä»£è¡¨å¯è¯»(read:å¯ä»¥è¯»å–ï¼ŒæŸ¥çœ‹</li>
<li>[w]ä»£è¡¨å¯å†™(wite:å¯ä»¥ä¿®æ”¹ï¼Œä½†æ˜¯ä¸ä»£è¡¨å¯ä»¥åˆ é™¤è¯¥æ–‡ä»¶ï¼Œåˆ é™¤ä¸€ä¸ªæ–‡ä»¶çš„å‰ææ¡ä»¶æ˜¯å¯¹è¯¥æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•æœ‰å†™æƒé™ï¼Œæ‰èƒ½åˆ é™¤è¯¥æ–‡ä»¶</li>
<li>[x]ä»£è¡¨å¯æ‰§è¡Œ(execute):å¯ä»¥è¢«æ‰§è¡Œ</li>
<li>ç›®å½•ï¼š</li>
<li>[r]ä»£è¡¨å¯è¯»(read):å¯ä»¥è¯»å–ï¼ŒIsæŸ¥çœ‹ç›®å½•å†…å®¹</li>
<li>[w]ä»£è¡¨å¯å†™(wite:å¯ä»¥ä¿®æ”¹ï¼Œå¯¹ç›®å½•å†…åˆ›å»º+åˆ é™¤+é‡å‘½åç›®å½•</li>
<li>[x]ä»£è¡¨å¯æ‰§è¡Œ(execute):å¯ä»¥è¿›å…¥è¯¥ç›®å½•</li>
</ul>
</li>
<li>rwxä¸¾ä¾‹ï¼š<ul>
<li><code>-rwxrw-r--1 root root 1213 Feb 2 09:39 abc</code></li>
<li><code>-ï¼ˆæ–‡ä»¶ç±»å‹ï¼‰rwxï¼ˆæ–‡ä»¶æ‹¥æœ‰è€…çš„æƒé™æ˜¯è¯»å†™æ‰§è¡Œï¼‰rw-ï¼ˆä¸æ–‡ä»¶æ‹¥æœ‰è€…åŒåœ¨ä¸€ä¸ªç»„çš„æƒé™æ˜¯è¯»å†™ï¼‰r--ï¼ˆå…¶ä»–ç»„æˆå‘˜å¯¹æ–‡ä»¶çš„æƒé™æ˜¯è¯»ï¼‰1ï¼ˆæ–‡ä»¶ï¼šç¡¬è¿æ¥æ•°ã€‚ å¦‚æœæ˜¯ç›®å½•ï¼šå­ç›®å½•æ•°ï¼‰ rootï¼ˆç”¨æˆ·ï¼‰ rootï¼ˆæ‰€åœ¨ç»„ï¼‰ 1213ï¼ˆæ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ï¼Œå¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œæ˜¾ç¤º4096å­—èŠ‚ï¼‰ Feb 2 09:39ï¼ˆæœ€åä¿®æ”¹æ—¥æœŸï¼‰ abc</code>ï¼ˆæ–‡ä»¶åï¼‰</li>
<li>åœ¨linuxä¸­ä¹Ÿå¯ä»¥ç”¨æ•°å­—æ¥ä»£è¡¨ç›¸åº”çš„æƒé™ï¼šå¯ç”¨æ•°å­—è¡¨ç¤ºä¸ºï¼šr&#x3D;4,W&#x3D;2,x&#x3D;1å› æ­¤rwx&#x3D;4+2+1&#x3D;7</li>
</ul>
</li>
</ol>
<h3 id="5-2-chmod"><a href="#5-2-chmod" class="headerlink" title="5.2 chmod"></a>5.2 chmod</h3><ol>
<li><p>ä¿®æ”¹æ–‡ä»¶&#x2F;æ–‡ä»¶å¤¹æƒé™ï¼š</p>
<ul>
<li><p>ç¬¬ä¸€ç§æ–¹å¼ï¼š+ã€-ã€&#x3D;å˜æ›´æƒé™ã€‚uï¼šæ‰€æœ‰è€…ï¼Œgï¼šæ‰€æœ‰ç»„ï¼Œoï¼šå…¶ä»–äººï¼Œaï¼šæ‰€æœ‰äºº(uã€gã€oçš„æ€»å’Œ)</p>
<figure class="highlight gml"><table><tr><td class="code"><pre><code class="hljs gml">plaintext<br><span class="hljs-number">1</span>)chmod u=rwx,g=rx,o=<span class="hljs-variable language_">x</span> æ–‡ä»¶/ç›®å½•å 			æˆ‘è¦ç»™åé¢çš„æ–‡ä»¶/ç›®å½•çš„æ‰€æœ‰è€…rwxï¼Œæ‰€åœ¨ç»„çš„æˆå‘˜rxï¼Œå…¶ä»–äºº<span class="hljs-variable language_">x</span>æƒé™<br><span class="hljs-number">2</span>)chmod o+w æ–‡ä»¶/ç›®å½•å					ç»™å…¶ä»–ç”¨æˆ·èµ‹äºˆwçš„æƒé™<br><span class="hljs-number">3</span>)chmod a-<span class="hljs-variable language_">x</span> æ–‡ä»¶/ç›®å½•å					ç»™æ‰€æœ‰äººå‰”é™¤<span class="hljs-variable language_">x</span>æƒé™<br></code></pre></td></tr></table></figure>
</li>
<li><p>ç¬¬äºŒç§æ–¹å¼ï¼šé€šè¿‡æ•°å­—å˜æ›´æƒé™ r&#x3D;4 w&#x3D;2 x&#x3D;1<br>rwx&#x3D;4+2+1&#x3D;7<br><code>chmod u=rwx,g=rx,o=x æ–‡ä»¶ç›®å½•å</code><br>ç›¸å½“äº<code>chmod 751 æ–‡ä»¶ç›®å½•å</code></p>
</li>
</ul>
</li>
</ol>
<h3 id="5-3-chown"><a href="#5-3-chown" class="headerlink" title="5.3 chown"></a>5.3 chown</h3><ol>
<li>ä¿®æ”¹æ–‡ä»¶æ‹¥æœ‰è€…<ul>
<li><code>chown newownerï¼ˆæ‰€æœ‰è€…åå­—ï¼‰ æ–‡ä»¶/ç›®å½•</code>ï¼šæ”¹å˜æ‰€æœ‰è€…</li>
<li><code>chown newowner:newgroupï¼ˆæ‰€æœ‰è€…åå­—ï¼šæ‰€æœ‰è€…æ‰€åœ¨ç»„ï¼‰ æ–‡ä»¶/ç›®å½•</code>ï¼šæ”¹å˜æ‰€æœ‰è€…å’Œæ‰€åœ¨ç»„</li>
<li><code>-R</code>ï¼š<code>chown -R æ‰€æœ‰è€… ç›®å½•</code> å¦‚æœæ˜¯ç›®å½•åˆ™ä½¿å…¶ä¸‹æ‰€æœ‰å­æ–‡ä»¶æˆ–ç›®å½•é€’å½’ç”Ÿæ•ˆ</li>
</ul>
</li>
</ol>
<h3 id="5-4-chgrp"><a href="#5-4-chgrp" class="headerlink" title="5.4 chgrp"></a>5.4 chgrp</h3><ol>
<li>ä¿®æ”¹æ–‡ä»¶&#x2F;ç›®å½•æ‰€åœ¨ç»„<ul>
<li><code>chgrp newgroup(æ–°ç»„å) æ–‡ä»¶/ç›®å½•</code>æ”¹å˜æ‰€æœ‰ç»„</li>
</ul>
</li>
</ol>
<h2 id="6-crondä»»åŠ¡è°ƒåº¦"><a href="#6-crondä»»åŠ¡è°ƒåº¦" class="headerlink" title="6.crondä»»åŠ¡è°ƒåº¦"></a>6.crondä»»åŠ¡è°ƒåº¦</h2><h3 id="6-1-æ¦‚è¿°"><a href="#6-1-æ¦‚è¿°" class="headerlink" title="6.1 æ¦‚è¿°"></a>6.1 æ¦‚è¿°</h3><ol>
<li>ä»»åŠ¡è°ƒåº¦ï¼šæ˜¯æŒ‡ç³»ç»Ÿåœ¨æŸä¸ªæ—¶é—´æ‰§è¡Œçš„ç‰¹å®šå‘½å…¨æˆ–ç¨‹åºã€‚</li>
<li>ä»»åŠ¡è°ƒåº¦åˆ†ç±»ï¼š<ul>
<li>ç³»ç»Ÿå·¥ä½œï¼šæœ‰äº›é‡è¦çš„å·¥ä½œå¿…é¡»å‘¨è€Œå¤å§‹åœ°æ‰§è¡Œã€‚å¦‚ç—…æ¯’æ‰«æç­‰</li>
<li>ä¸ªåˆ«ç”¨æˆ·å·¥ä½œï¼šä¸ªåˆ«ç”¨æˆ·å¯èƒ½å¸Œæœ›æ‰§è¡ŒæŸäº›ç¨‹åºï¼Œæ¯”å¦‚å¯¹mysqlæ•°æ®åº“çš„å¤‡ä»½ã€‚</li>
</ul>
</li>
</ol>
<h3 id="6-2-crontab"><a href="#6-2-crontab" class="headerlink" title="6.2 crontab"></a>6.2 crontab</h3><h4 id="å®šæ—¶ä»»åŠ¡è®¾ç½®"><a href="#å®šæ—¶ä»»åŠ¡è®¾ç½®" class="headerlink" title="å®šæ—¶ä»»åŠ¡è®¾ç½®"></a>å®šæ—¶ä»»åŠ¡è®¾ç½®</h4><ol>
<li><p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š<code>crontab é€‰é¡¹</code></p>
<ul>
<li><code>crontab -e</code>ï¼šç¼–è¾‘å½“å‰ç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡ã€‚</li>
<li><code>crontab -l</code>ï¼šæŸ¥çœ‹å½“å‰ç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡ã€‚</li>
<li><code>crontab -r</code>ï¼šåˆ é™¤å½“å‰ç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡ã€‚</li>
</ul>
</li>
<li><p><strong>å®šæ—¶ä»»åŠ¡æ ¼å¼</strong></p>
<ul>
<li>å®šæ—¶ä»»åŠ¡çš„æ ¼å¼ä¸ºï¼š<figure class="highlight asciidoc"><table><tr><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-bullet">* </span>* * * * command<br></code></pre></td></tr></table></figure>
å…¶ä¸­ï¼Œ<code>command</code> æ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œè€Œå‰é¢çš„äº”ä¸ª <code>*</code> åˆ†åˆ«è¡¨ç¤ºï¼š<ul>
<li>ç¬¬ä¸€ä¸ª <code>*</code>ï¼šåˆ†é’Ÿï¼ˆ0-59ï¼‰</li>
<li>ç¬¬äºŒä¸ª <code>*</code>ï¼šå°æ—¶ï¼ˆ0-23ï¼‰</li>
<li>ç¬¬ä¸‰ä¸ª <code>*</code>ï¼šæ—¥æœŸï¼ˆ1-31ï¼‰</li>
<li>ç¬¬å››ä¸ª <code>*</code>ï¼šæœˆä»½ï¼ˆ1-12ï¼‰</li>
<li>ç¬¬äº”ä¸ª <code>*</code>ï¼šæ˜ŸæœŸå‡ ï¼ˆ0-7ï¼Œå…¶ä¸­ 0 å’Œ 7 éƒ½è¡¨ç¤ºæ˜ŸæœŸå¤©ï¼‰</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>ç¤ºä¾‹</strong></p>
<ul>
<li><code>*/1 * * * * ls -l /etc/ &gt; /tmp/to.txt</code>ï¼šæ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ <code>ls -l /etc/</code> å‘½ä»¤ï¼Œå¹¶å°†è¾“å‡ºé‡å®šå‘åˆ° <code>/tmp/to.txt</code> æ–‡ä»¶ä¸­ã€‚</li>
<li><code>0 2 * * * echo &quot;Hello, World!&quot;</code>ï¼šæ¯å¤©å‡Œæ™¨ 2 ç‚¹æ‰§è¡Œä¸€æ¬¡ <code>echo &quot;Hello, World!&quot;</code> å‘½ä»¤ã€‚</li>
<li><code>0 0 1 * * echo &quot;Happy New Month!&quot;</code>ï¼šæ¯æœˆçš„ç¬¬ä¸€å¤©åˆå¤œæ‰§è¡Œä¸€æ¬¡ <code>echo &quot;Happy New Month!&quot;</code> å‘½ä»¤ã€‚</li>
<li><code>0 0 * * 0 echo &quot;Happy Sunday!&quot;</code>ï¼šæ¯å‘¨æ—¥åˆå¤œæ‰§è¡Œä¸€æ¬¡ <code>echo &quot;Happy Sunday!&quot;</code> å‘½ä»¤ã€‚</li>
</ul>
</li>
<li><p><strong>å ä½ç¬¦è¯´æ˜</strong></p>
<ul>
<li><code>*</code>ï¼šè¡¨ç¤ºæ‰€æœ‰å¯èƒ½çš„å€¼ã€‚ä¾‹å¦‚ï¼Œ<code>*</code> åœ¨åˆ†é’Ÿä½ç½®è¡¨ç¤ºæ¯åˆ†é’Ÿã€‚</li>
<li><code>-</code>ï¼šè¡¨ç¤ºä¸€ä¸ªèŒƒå›´ã€‚ä¾‹å¦‚ï¼Œ<code>9-17</code> è¡¨ç¤º 9 åˆ° 17 ä¹‹é—´çš„æ‰€æœ‰å€¼ã€‚</li>
<li><code>,</code>ï¼šè¡¨ç¤ºåˆ—ä¸¾å¤šä¸ªå€¼ã€‚ä¾‹å¦‚ï¼Œ<code>1,3,5</code> è¡¨ç¤º 1ã€3 å’Œ 5ã€‚</li>
<li><code>/</code>ï¼šè¡¨ç¤ºæ¯éš”å¤šå°‘æ—¶é—´æ‰§è¡Œä¸€æ¬¡ã€‚ä¾‹å¦‚ï¼Œ<code>*/2</code> è¡¨ç¤ºæ¯éš” 2 ä¸ªå•ä½æ‰§è¡Œä¸€æ¬¡ã€‚</li>
</ul>
</li>
<li><p><strong>ç‰¹æ®Šç¬¦å·è¯´æ˜</strong></p>
<ul>
<li><code>@reboot</code>ï¼šåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚</li>
<li><code>@yearly</code> æˆ– <code>@annually</code>ï¼šæ¯å¹´æ‰§è¡Œä¸€æ¬¡ã€‚</li>
<li><code>@monthly</code>ï¼šæ¯æœˆæ‰§è¡Œä¸€æ¬¡ã€‚</li>
<li><code>@weekly</code>ï¼šæ¯å‘¨æ‰§è¡Œä¸€æ¬¡ã€‚</li>
<li><code>@daily</code> æˆ– <code>@midnight</code>ï¼šæ¯å¤©æ‰§è¡Œä¸€æ¬¡ã€‚</li>
<li><code>@hourly</code>ï¼šæ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚</li>
</ul>
</li>
<li><p><strong>è¾“å‡ºé‡å®šå‘</strong></p>
<ul>
<li>å®šæ—¶ä»»åŠ¡çš„è¾“å‡ºå¯ä»¥é‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚ï¼š<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">* * * * * <span class="hljs-built_in">ls</span> -l /etc/ &gt; /tmp/to.txt<br></code></pre></td></tr></table></figure>
å¦‚æœéœ€è¦å°†é”™è¯¯ä¿¡æ¯ä¹Ÿé‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>2&gt;&amp;1</code>ï¼š<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">* * * * * <span class="hljs-built_in">ls</span> -l /etc/ &gt; /tmp/to.txt 2&gt;&amp;1<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h3 id="6-3atå®šæ—¶ä»»åŠ¡"><a href="#6-3atå®šæ—¶ä»»åŠ¡" class="headerlink" title="6.3atå®šæ—¶ä»»åŠ¡"></a>6.3atå®šæ—¶ä»»åŠ¡</h3><ol>
<li>atå‘½ä»¤æ˜¯<strong>ä¸€æ¬¡æ€§</strong>å®šæ—¶è®¡åˆ’ä»»åŠ¡ï¼Œatçš„å®ˆæŠ¤è¿›ç¨‹atdä¼šä»¥åå°æ¨¡å¼è¿è¡Œï¼Œæ£€æŸ¥ä½œä¸šé˜Ÿåˆ—æ¥è¿è¡Œã€‚</li>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œatdå®ˆæŠ¤è¿›ç¨‹æ¯60ç§’æ£€æŸ¥ä½œä¸šé˜Ÿåˆ—ï¼Œæœ‰ä½œä¸šæ—¶ï¼Œä¼šæ£€æŸ¥ä½œä¸šè¿è¡Œæ—¶é—´ï¼Œå¦‚æœæ—¶é—´ä¸å½“å‰æ—¶é—´åŒ¹é…ï¼Œåˆ™è¿è¡Œæ­¤ä½œä¸šã€‚</li>
<li>atå‘½ä»¤æ˜¯ä¸€æ¬¡æ€§å®šæ—¶è®¡åˆ’ä»»åŠ¡ï¼Œæ‰§è¡Œå®Œä¸€ä¸ªä»»åŠ¡åä¸å†æ‰§è¡Œæ­¤ä»»åŠ¡äº†ã€‚</li>
<li>åœ¨ä½¿ç”¨atå‘½ä»¤çš„æ—¶å€™ï¼Œä¸€å®šè¦ä¿è¯atdè¿›ç¨‹çš„å¯åŠ¨ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å…³æŒ‡ä»¤æ¥æŸ¥çœ‹ï¼š<code>ps -ef | grep atd</code>ã€‚<code>ps -ef</code>ï¼šæ£€æµ‹å½“å‰æ­£åœ¨è¿è¡Œçš„æŒ‡ä»¤æœ‰å“ªäº›ã€‚</li>
<li>atå‘½ä»¤æ ¼å¼ï¼š<code>at [é€‰é¡¹] [æ—¶é—´]</code></li>
<li>Ctrl+Dç»“æŸatå‘½ä»¤çš„è¾“å…¥</li>
<li>atæ—¶é—´å®šä¹‰ï¼š<ul>
<li>atæŒ‡å®šæ—¶é—´çš„æ–¹æ³•ï¼š<ol>
<li>æ¥å—åœ¨å½“å¤©çš„hh:mm(å°æ—¶ï¼šåˆ†é’Ÿ)å¼çš„æ—¶é—´æŒ‡å®šã€‚å‡å¦‚è¯¥æ—¶é—´å·²è¿‡å»ï¼Œé‚£ä¹ˆå°±æ”¾åœ¨ç¬¬äºŒå¤©æ‰§è¡Œã€‚ä¾‹å¦‚ï¼š04:00</li>
<li>ä¾¿ç”¨midnight(æ·±å¤œ)ï¼Œnoon(ä¸­åˆ)ï¼Œteatime(é¥®èŒ¶æ—¶é—´ï¼Œä¸€èˆ¬æ˜¯ä¸‹åˆ4ç‚¹)ç­‰æ¯”è¾ƒæ‘¸ç³Šçš„è¯è¯­æ¥æŒ‡å®šæ—¶é—´ã€‚</li>
<li>é‡‡ç”¨12å°æ—¶è®¡æ—¶åˆ¶ï¼Œå³åœ¨æ—¶é—´åé¢åŠ ä¸ŠAM(ä¸Šåˆ)æˆ–PM(ä¸‹åˆ)æ¥è¯´æ˜æ˜¯ä¸Šåˆè¿˜æ˜¯ä¸‹åˆã€‚ä¾‹å¦‚ï¼š12pmã€‚</li>
<li>æŒ‡å®šå‘½ä»¤æ‰§è¡Œçš„å…·ä½“æ—¥æœŸï¼ŒæŒ‡å®šæ ¼è¯•ä¸ºmonth day(æœˆæ—¥)æˆ–mm&#x2F;dd&#x2F;yy(æœˆ&#x2F;æ—¥&#x2F;å¹´)æˆ–dd.mm.yyï¼ˆæ—¥.æœˆ.å¹´)ï¼ŒæŒ‡å®šçš„æ—¥æœŸå¿…é¡»è·Ÿåœ¨æŒ‡å®šæ—¶é—´çš„åé¢ã€‚ä¾‹å¦‚ï¼š04:00 2021-03-1ã€‚</li>
<li>ä½¿ç”¨ç›¸å¯¹è®¡æ—¶æ³•ã€‚æŒ‡å®šæ ¼å¼ä¸ºï¼šnow+count time-units,nowå°±æ˜¯å½“å‰æ—¶é—´ï¼Œtime-unitsæ˜¯æ—¶é—´å•ä½ï¼Œè¿™é‡Œèƒ½å¤Ÿæ˜¯minutes(åˆ†é’Ÿ)ã€hours(å°æ—¶)ã€days(å¤©)ã€weeks(æ˜ŸæœŸ)ã€‚countæ˜¯æ—¶é—´çš„æ•°é‡ï¼Œå‡ å¤©ï¼Œå‡ å°æ—¶ã€‚ä¾‹å¦‚ï¼šnow+5 minutesã€‚ï¼ˆäº”åˆ†é’Ÿä»¥åï¼‰</li>
<li>ç›´æ¥ä½¿ç”¨today(ä»Šå¤©)ã€tomorrow(æ˜å¤©)æ¥æŒ‡å®šå®Œæˆå‘½ä»¤çš„æ—¶é—´ã€‚</li>
</ol>
</li>
</ul>
</li>
</ol>
<h2 id="7-linuxæŒ‚è½½ï¼Œç£ç›˜åˆ†åŒº"><a href="#7-linuxæŒ‚è½½ï¼Œç£ç›˜åˆ†åŒº" class="headerlink" title="7.linuxæŒ‚è½½ï¼Œç£ç›˜åˆ†åŒº"></a>7.linuxæŒ‚è½½ï¼Œç£ç›˜åˆ†åŒº</h2><ol>
<li>åŸç†ä»‹ç»ï¼šLinuxæ¥è¯´æ— è®ºæœ‰å‡ ä¸ªåˆ†åŒºï¼Œåˆ†ç»™å“ªä¸€ç›®å½•ä½¿ç”¨ï¼Œå®ƒå½’æ ¹ç»“åº•å°±åªæœ‰ä¸€ä¸ªæ ¹ç›®å½•ï¼Œä¸€ä¸ªç‹¬ç«‹ä¸”å”¯ä¸€çš„æ–‡ä»¶ç»“æ„ï¼ŒLinuxä¸­æ¯ä¸ªåˆ†åŒºéƒ½æ˜¯ç”¨æ¥ç»„æˆæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚</li>
<li>Linuxé‡‡ç”¨äº†ä¸€ç§å«â€œè½½å…¥â€çš„å¤„ç†æ–¹æ³•ï¼Œå®ƒçš„æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­åŒ…å«äº†ä¸€æ•´å¥—çš„æ–‡ä»¶å’Œç›®å½•ï¼Œä¸”å°†ä¸€ä¸ªåˆ†åŒºå’Œä¸€ä¸ªç›®å½•è”ç³»èµ·æ¥ã€‚è¿™æ—¶è¦è½½å…¥çš„ä¸€ä¸ªåˆ†åŒºå°†ä½¿å®ƒçš„å­˜å‚¨ç©ºé—´åœ¨ä¸€ä¸ªç›®å½•ä¸‹è·å¾—ã€‚</li>
<li>ç¤ºæ„å›¾ï¼šè¿›å…¥åˆ°ä¸€ä¸ªç›®å½•å°±æ˜¯è®¿é—®æŸä¸ªåˆ†åŒºäº†ï¼Œå°±æ˜¯é€»è¾‘å­˜å‚¨å’Œç‰©ç†å­˜å‚¨ä¹‹é—´çš„æ˜ å°„ã€‚</li>
<li>æŸ¥çœ‹æ‰€æœ‰è®¾å¤‡æŒ‚è½½çš„æƒ…å†µï¼š<code>lsblkæˆ–è€…lsblk -f</code>ï¼Œ-fï¼šæœ‰åˆ†åŒºæƒ…å†µï¼Œuuidåˆ†åŒºå”¯ä¸€æ ‡è¯†ç¬¦ï¼ŒmountpointæŒ‚è½½ç‚¹ã€‚</li>
<li>å¦‚æœç¡¬ç›˜ä¸€æ»¡äº†å¯¼è‡´&#x2F;homeä¸å¤Ÿç”¨äº†ï¼Œå¯ä»¥åŠ ä¸€å—ç¡¬ç›˜æŒ‚è½½åˆ°&#x2F;homeï¼Œè¾¾åˆ°æ‰©å®¹çš„æ•ˆæœï¼Œå…¶ä»–åŒç†ã€‚</li>
</ol>
<h3 id="7-1-linuxåˆ†åŒºä»‹ç»"><a href="#7-1-linuxåˆ†åŒºä»‹ç»" class="headerlink" title="7.1 linuxåˆ†åŒºä»‹ç»"></a>7.1 linuxåˆ†åŒºä»‹ç»</h3><ol>
<li>ç¡¬ç›˜è¯´æ˜ï¼š<ul>
<li>Linuxç¡¬ç›˜çˆ¶IDEç¡¬ç›˜å’ŒSCSIç¡¬ç›˜ï¼Œç›®å‰åŸºæœ¬ä¸Šæ˜¯SCSIç¡¬ç›˜ã€‚</li>
<li>å¯¹äºIDEç¡¬ç›˜ï¼Œé©±åŠ¨å™¨æ ‡è¯†ç¬¦ä¸ºâ€œhdx<del>â€,å…¶ä¸­â€œhdâ€è¡¨æ˜åˆ†åŒºæ‰€åœ¨è®¾å¤‡çš„ç±»å‹ï¼Œè¿™é‡Œæ˜¯æŒ‡IDEç¡¬ç›˜äº†ã€‚â€Ã—â€ä¸ºç›˜å·(aä¸ºåŸºæœ¬ç›˜ï¼Œbä¸ºåŸºæœ¬ä»å±ç›˜ï¼Œcä¸ºè¾…åŠ©ä¸»ç›˜ï¼Œdä¸ºè¾…åŠ©ä»å±ç›˜)ï¼Œâ€œ</del>â€ä»£è¡¨åˆ†åŒºå‰å››ä¸ªåˆ†åŒºç”¨æ•°å­—1åˆ°4è¡¨ç¤ºï¼Œå®ƒä»¬æ˜¯ä¸»åˆ†åŒºæˆ–æ‰©å±•åˆ†åŒºï¼Œä»5å¼€å§‹å°±æ˜¯é€»è¾‘åˆ†åŒºã€‚ä¾‹ï¼Œhda3è¡¨ç¤ºä¸ºç¬¬ä¸€ä¸ªIDEç¡¬ç›˜ä¸Šçš„ç¬¬ä¸‰ä¸ªä¸»åˆ†åŒºæˆ–æ‰©å±•åˆ†åŒºï¼Œhdb2è¡¨ç¤ºä¸ºç¬¬äºŒä¸ªIDEç¡¬ç›˜ä¸Šçš„ç¬¬äºŒä¸ªä¸»åˆ†åŒºæˆ–æ‰©å±•åˆ†åŒºã€‚</li>
<li>å¯¹äºSCSIç¡¬ç›˜ï¼Œåˆ™æ ‡è¯†ä¸ºâ€œsdx~â€,SCSIç¡¬ç›˜æ˜¯ç”¨â€sdâ€æ¥è¡¨ç¤ºåˆ†åŒºæ‰€åœ¨è®¾å¤‡çš„ç±»å‹çš„ï¼Œå…¶ä½™åˆ™å’ŒIDEç¡¬ç›˜çš„è¡¨ç¤ºæ–¹æ³•ä¸€æ ·ã€‚</li>
</ul>
</li>
<li>ç£ç›˜æƒ…å†µæŸ¥è¯¢ï¼š<ul>
<li><code>df -h</code>æŸ¥è¯¢ç³»ç»Ÿæ•´ä½“ç£ç›˜ä½¿ç”¨æƒ…å†µ</li>
<li><code>du -h</code>æŸ¥è¯¢æŒ‡å®šç›®å½•çš„ç£ç›˜å ç”¨æƒ…å†µ,é»˜è®¤ä¸ºå½“å‰ç›®å½•ã€‚<ul>
<li>-s æŒ‡å®šç›®å½•å ç”¨å¤§å°æ±‡æ€»</li>
<li>-h å¸¦è®¡é‡å•ä½</li>
<li>-a å«æ–‡ä»¶</li>
<li>â€“max-depth&#x3D;1 å­ç›®å½•æ·±åº¦</li>
<li>-c åˆ—å‡ºæ˜ç»†çš„åŒæ—¶ï¼Œå¢åŠ æ±‡æ€»å€¼</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="8-Linuxç½‘ç»œé…ç½®"><a href="#8-Linuxç½‘ç»œé…ç½®" class="headerlink" title="8.Linuxç½‘ç»œé…ç½®"></a>8.Linuxç½‘ç»œé…ç½®</h2><h3 id="8-1-NATç½‘ç»œ"><a href="#8-1-NATç½‘ç»œ" class="headerlink" title="8.1 NATç½‘ç»œ"></a>8.1 NATç½‘ç»œ</h3><ol>
<li><p>ç½‘ç»œé…ç½®æŒ‡ä»¤ï¼š</p>
<ul>
<li>windowsæŸ¥çœ‹VMnet8ç½‘ç»œé…ç½®ï¼šipconfigæŒ‡ä»¤</li>
<li>linuxæŸ¥çœ‹ç½‘ç»œé…ç½®ï¼šifconfig</li>
<li>pingï¼šæµ‹è¯•ä¸»æœºä¹‹é—´ç½‘ç»œçš„è¿é€šæ€§</li>
</ul>
</li>
<li><p>linuxç½‘ç»œé…ç½®ï¼š</p>
<ul>
<li><p>è‡ªåŠ¨è·å–ipï¼Œç¼ºç‚¹æ˜¯æ¯æ¬¡è·å–çš„ipéƒ½ä¸ä¸€æ ·</p>
</li>
<li><p>æŒ‡å®šipï¼šç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶æ¥æŒ‡å®šip,å¹¶å¯ä»¥è¿æ¥åˆ°å¤–ç½‘ï¼ˆç¨‹åºå‘˜æ¨èï¼‰ç¼–è¾‘<code>vi /etc/sysconfig/network-scripts/ifcfg-ens33</code>è¦æ±‚ï¼šå°†ipåœ°å€é…ç½®çš„é™æ€çš„ï¼Œæ¯”å¦‚ï¼šipåœ°å€ä¸º192.168.200.130ã€‚</p>
</li>
<li><p>ifcfg-ens33 æ–‡ä»¶è¯´æ˜</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><code class="hljs routeros">plaintext<br><span class="hljs-attribute">DEVICE</span>=eth0		#æ¥å£åï¼ˆè®¾å¤‡ï¼Œç½‘å¡ï¼‰<br><span class="hljs-attribute">HWADDR</span>=00:0C:2X:6x:0x:Xx		#MACåœ°å€<br><span class="hljs-attribute">TYPE</span>=Ethernet		#ç½‘ç»œç±»å‹ï¼ˆé€šå¸¸æ˜¯Ethemet)<br><span class="hljs-attribute">UUID</span>=926a57ba-92c6-4231-bacb-f27e5e6a9f44		#éšæœºid<br><span class="hljs-comment">#ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ç½‘ç»œæ¥å£æ˜¯å¦æœ‰æ•ˆ(yes/no)</span><br><span class="hljs-attribute">ONBOOT</span>=<span class="hljs-literal">yes</span><br><span class="hljs-comment">#IPçš„é…ç½®æ–¹æ³•[none|static|bootpdhcp](å¼•å¯¼æ—¶ä¸ä½¿ç”¨åè®®|é™æ€åˆ†é…IP|BOOTPåè®®|DHCPåè®®)</span><br><span class="hljs-attribute">BOOTPROTO</span>=static<br><span class="hljs-comment">#IPåœ°å€</span><br><span class="hljs-attribute">IPADDR</span>=192.168.200.130<br><span class="hljs-comment">#ç½‘å…³</span><br><span class="hljs-attribute">GATEWAY</span>=192.168.200.2<br><span class="hljs-comment">#åŸŸåè§£æå™¨</span><br><span class="hljs-attribute">DNS1</span>=192.168.200.2<br></code></pre></td></tr></table></figure>
</li>
<li><p>åœ¨vmçš„è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨é…ç½®ä¸Šä¹Ÿè¦ä¿®æ”¹</p>
</li>
</ul>
</li>
</ol>
<h3 id="8-2-ä¸»æœºåå’Œhostsæ˜ å°„"><a href="#8-2-ä¸»æœºåå’Œhostsæ˜ å°„" class="headerlink" title="8.2 ä¸»æœºåå’Œhostsæ˜ å°„"></a>8.2 ä¸»æœºåå’Œhostsæ˜ å°„</h3><ol>
<li>è®¾ç½®ä¸»æœºå<ul>
<li>ä¸ºäº†æ–¹ä¾¿è®°å¿†ï¼Œå¯ä»¥ç»™Linuxç³»ç»Ÿè®¾ç½®ä¸»æœºåï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ä¸»æœºå<code>vim /etc/hostname</code></li>
<li>æŒ‡ä»¤hostnameï¼šæŸ¥çœ‹ä¸»æœºå</li>
<li>ä¿®æ”¹æ–‡ä»¶åœ¨&#x2F;etc&#x2F;hostnameæŒ‡å®š</li>
<li>ä¿®æ”¹åï¼Œé‡å¯ç”Ÿæ•ˆ</li>
</ul>
</li>
<li>è®¾ç½®hostsæ˜ å°„<ul>
<li>windowsï¼šåœ¨C:\Windows\System32\drivers\etc\hosts æ–‡ä»¶æŒ‡å®šå³å¯<br>æ¡ˆä¾‹ï¼š192.168.200.130 hspedu100</li>
<li>linuxï¼šåœ¨&#x2F;etc&#x2F;hostsæ–‡ä»¶ æŒ‡å®š<br>æ¡ˆä¾‹ï¼š192.168.200.1 ThinkPad-PC</li>
<li>é€šè¿‡<code>ping ä¸»æœºå</code>æ¥æµ‹è¯•è¿é€šæ€§ã€‚</li>
</ul>
</li>
<li>ä¸»æœºåè§£æè¿‡ç¨‹åˆ†æ(Hostsã€DNS)<ul>
<li>Hostsæ˜¯ä»€ä¹ˆï¼šä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œç”¨æ¥è®°å½•IPå’ŒHostname(ä¸»æœºå)çš„æ˜ å°„å…³ç³»</li>
<li>DNSï¼š<br>1.DNS,å°±æ˜¯Domain Name Systemçš„ç¼©å†™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯åŸŸåç³»ç»Ÿ<br>2.æ˜¯äº’è”ç½‘ä¸Šä½œä¸ºåŸŸåå’ŒPåœ°å€ç›¸äº’æ˜ å°„çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“</li>
</ul>
</li>
<li>ä¸¾ä¾‹ï¼šå½“ç”¨æˆ·è¾“å…¥ä¸€ä¸ªç½‘ç«™<ul>
<li>æµè§ˆå™¨å…ˆæ£€æŸ¥æµç›‘å™¨ç¼“å­˜ä¸­æœ‰æ²¡æœ‰è¯¥åŸŸåè§£æIPåœ°å€ï¼Œæœ‰å°±å…ˆè°ƒç”¨è¿™ä¸ªIPå®Œæˆè§£æï¼›å¦‚æœæ²¡æœ‰æ£€æŸ¥æ“ä½œç³»ç»ŸDNSè§£æå™¨ç¼“å­˜ï¼Œå¦‚æœæœ‰ç›´æ¥è¿”å›IPå®Œæˆè§£æã€‚è¿™ä¸¤ä¸ªç¼“å­˜ï¼Œå¯ä»¥ç†è§£ä¸ºæœ¬åœ°è§£æå™¨ç¼“å­˜ã€‚</li>
<li>ä¸€èˆ¬æ¥è¯´ï¼Œå½“ç”µè„‘ç¬¬ä¸€æ¬¡æˆåŠŸè®¿é—®æŸä¸€ç½‘ç«™åï¼Œåœ¨ä¸€å®šæ—¶é—´å†…ï¼Œæµè§ˆå™¨æˆ–æ“ä½œç³»ç»Ÿä¼šç¼“å­˜ä»–çš„Påœ°å€(DNSè§£æè®°å½•)å¦‚åœ¨cmdçª—å£ä¸­è¾“å…¥<code>ipconfig /displaydns //DNSåŸŸåè§£æç¼“å­˜</code>è¿˜æœ‰<code>ipconfig /flushdns //æ‰‹åŠ¨æ¸…ç†dnsç¼“å­˜</code>ã€‚</li>
<li>å¦‚æœæœ¬åœ°è§£æå™¨ç¼“å­˜æ²¡æœ‰æ‰¾åˆ°å¯¹åº”æ˜ å°„ï¼Œæ£€æŸ¥ç³»ç»Ÿä¸­hostsæ–‡ä»¶ä¸­æœ‰æ²¡æœ‰é…ç½®å¯¹åº”çš„åŸŸåIPæ˜ å°„ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å®Œæˆè§£æå¹¶è¿”å›ã€‚</li>
<li>å¦‚æœ æœ¬åœ°DNSè§£æå™¨ç¼“å­˜ å’Œ hostsæ–‡ä»¶ ä¸­å‡æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„IP,åˆ™åˆ°åŸŸåæœåŠ¡DNSè¿›è¡Œè§£æåŸŸã€‚</li>
</ul>
</li>
</ol>
<h2 id="9-è¿›ç¨‹ç®¡ç†"><a href="#9-è¿›ç¨‹ç®¡ç†" class="headerlink" title="9.è¿›ç¨‹ç®¡ç†"></a>9.è¿›ç¨‹ç®¡ç†</h2><ol>
<li>è¿›ç¨‹ï¼Œå°±æ¯”å¦‚windowsä»»åŠ¡ç®¡ç†å™¨é‡Œé¢çš„è¿›ç¨‹ã€‚ç¨‹åºè¿è¡Œèµ·æ¥å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚åœ¨LINUXä¸­ï¼Œæ¯ä¸ªæ‰§è¡Œçš„ç¨‹åºéƒ½ç§°ä¸ºä¸€ä¸ªè¿›ç¨‹ã€‚æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½åˆ†é…ä¸€ä¸ªIDå·(id,è¿›ç¨‹å·)&#x3D;&gt;windows &#x3D;linuxã€‚</li>
<li>æ¯ä¸ªè¿›ç¨‹éƒ½å¯èƒ½ä»¥ä¸¤ç§æ–¹å¼å­˜åœ¨çš„ã€‚å‰å°ä¸åå°ï¼Œæ‰€è°“å‰å°è¿›ç¨‹å°±æ˜¯ç”¨æˆ·ç›®å‰çš„å±å¹•ä¸Šå¯ä»¥è¿›è¡Œæ“ä½œçš„ã€‚åå°è¿›ç¨‹åˆ™æ˜¯å®é™…åœ¨æ“ä½œï¼Œä½†ç”±äºå±å¹•ä¸Šæ— æ³•çœ‹åˆ°çš„è¿›ç¨‹ï¼Œé€šå¸¸ä½¿ç”¨åå°æ–¹å¼æ‰§è¡Œã€‚</li>
<li>ä¸€èˆ¬ç³»ç»Ÿçš„æœåŠ¡éƒ½æ˜¯ä»¥åå°è¿›ç¨‹çš„æ–¹å¼å­˜åœ¨ï¼Œè€Œä¸”éƒ½ä¼šå¸¸é©»åœ¨ç³»ç»Ÿä¸­ã€‚ç›´åˆ°å…³æœºæ‰æ‰ç»“æŸã€‚</li>
</ol>
<h3 id="9-1psæŒ‡ä»¤"><a href="#9-1psæŒ‡ä»¤" class="headerlink" title="9.1psæŒ‡ä»¤"></a>9.1psæŒ‡ä»¤</h3><ol>
<li>pså‘½ä»¤æ˜¯ç”¨æ¥æŸ¥çœ‹ç›®å‰ç³»ç»Ÿä¸­ï¼Œæœ‰å“ªäº›æ­£åœ¨æ‰§è¡Œï¼Œä»¥åŠå®ƒä»¬æ‰§è¡Œçš„çŠ¶å†µã€‚å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ã€‚</li>
<li>å¯ä»¥ç»“åˆç®¡é“å‘½ä»¤æ¥è¿‡æ»¤ä¿¡æ¯ï¼Œæ¯”å¦‚æˆ‘æƒ³çœ‹çœ‹æœ‰æ²¡æœ‰sshdæœåŠ¡ï¼š<code>ps -aux | grep sshd</code></li>
</ol>
<h3 id="9-3ç»ˆæ­¢è¿›ç¨‹"><a href="#9-3ç»ˆæ­¢è¿›ç¨‹" class="headerlink" title="9.3ç»ˆæ­¢è¿›ç¨‹"></a>9.3ç»ˆæ­¢è¿›ç¨‹</h3><ol>
<li><p>killå’Œkillallï¼šè‹¥æ˜¯æŸä¸ªè¿›ç¨‹æ‰§è¡Œä¸€åŠéœ€è¦åœæ­¢æ—¶ï¼Œæˆ–æ˜¯å·²æ¶ˆäº†å¾ˆå¤§çš„ç³»ç»Ÿèµ„æºæ—¶ï¼Œæ­¤æ—¶å¯ä»¥è€ƒè™‘åœæ­¢è¯¥è¿›ç¨‹ã€‚ä½¿ç”¨killallå‘½ä»¤æ¥å®Œæˆæ­¤é¡¹ä»»åŠ¡ã€‚</p>
</li>
<li><p><code>kill [é€‰é¡¹] è¿›ç¨‹å·</code>ï¼ˆåŠŸèƒ½æè¿°ï¼šé€šè¿‡è¿›ç¨‹å·æ€æ­»&#x2F;ç»ˆæ­¢è¿›ç¨‹ï¼‰<br><code>killall è¿›ç¨‹åç§°</code>ï¼ˆåŠŸèƒ½æè¿°ï¼šé€šè¿‡è¿›ç¨‹åç§°æ€æ­»è¿›ç¨‹ï¼Œä¹Ÿæ”¯æŒé€šé…ç¬¦ï¼Œè¿™åœ¨ç³»ç»Ÿå› è´Ÿè½½è¿‡å¤§è€Œå˜å¾—å¾ˆæ…¢æ—¶å¾ˆæœ‰ç”¨)</p>
</li>
<li><p>å¸¸ç”¨é€‰é¡¹</p>
<p><code>-9</code>ï¼šè¡¨ç¤ºå¼ºè¿«è¿›ç¨‹ç«‹å³åœæ­¢</p>
</li>
</ol>
<h3 id="9-4æŸ¥çœ‹è¿›ç¨‹æ ‘"><a href="#9-4æŸ¥çœ‹è¿›ç¨‹æ ‘" class="headerlink" title="9.4æŸ¥çœ‹è¿›ç¨‹æ ‘"></a>9.4æŸ¥çœ‹è¿›ç¨‹æ ‘</h3><ol>
<li>åŸºæœ¬è¯­æ³•ï¼š<code>pstree [é€‰é¡¹]</code>ï¼Œå¯ä»¥æ›´åŠ ç›´è§‚çš„æ¥çœ‹è¿›ç¨‹ä¿¡æ¯</li>
<li>å¸¸ç”¨é€‰é¡¹:<ul>
<li><code>-P</code>ï¼šæ˜¾ç¤ºè¿›ç¨‹çš„PID</li>
<li><code>-u</code>ï¼šæ˜¾ç¤ºè¿›ç¨‹çš„æ‰€å±ç”¨æˆ·</li>
</ul>
</li>
</ol>
<h3 id="9-5æœåŠ¡ç®¡ç†"><a href="#9-5æœåŠ¡ç®¡ç†" class="headerlink" title="9.5æœåŠ¡ç®¡ç†"></a>9.5æœåŠ¡ç®¡ç†</h3><ol>
<li>æœåŠ¡(service)æœ¬è´¨å°±æ˜¯è¿›ç¨‹ï¼Œä½†æ˜¯æ˜¯è¿è¡Œåœ¨åå°çš„ï¼Œé€šå¸¸éƒ½ä¼šç›‘å¬æŸä¸ªç«¯å£ï¼Œç­‰å¾…å…¶å®ƒç¨‹åºçš„æƒ…æ±‚ï¼Œæ¯”å¦‚(mysqld,sshd é˜²ç«å¢™ç­‰ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬åˆç§°ä¸ºå®ˆæŠ¤ç¨‹ï¼Œæ˜¯Linuxä¸­éå¸¸é‡è¦çš„çŸ¥è¯†ç‚¹ã€‚</li>
<li>serviceç®¡ç†æŒ‡ä»¤ï¼š<ul>
<li><code>service æœåŠ¡å [start|stop|restart|reload|status]</code></li>
<li>åœ¨CentoS7.0åå¾ˆå¤šæœåŠ¡ä¸å†ä½¿ç”¨service,è€Œæ˜¯systemctl(åé¢ä¸“é—¨è®²)</li>
<li>serviceæŒ‡ä»¤ç®¡ç†çš„æœåŠ¡åœ¨&#x2F;etc&#x2F;init.dæŸ¥çœ‹</li>
</ul>
</li>
<li>æŸ¥çœ‹æœåŠ¡åï¼š<ul>
<li>æ–¹å¼1ï¼šä½¿ç”¨<code>setup</code> -&gt; ç³»ç»ŸæœåŠ¡ å°±å¯ä»¥çœ‹åˆ°å…¨éƒ¨ã€‚å¸¦æ˜Ÿå·çš„ä¸ºè‡ªå¯åŠ¨</li>
<li>æ–¹å¼2ï¼š<code>/etc/init.d</code> çœ‹åˆ°serviceæŒ‡ä»¤ç®¡ç†çš„æœåŠ¡<code>ls -l /etc/init.d</code></li>
</ul>
</li>
<li>checkconfigæŒ‡ä»¤<ul>
<li>è¯­æ³•ï¼š<ul>
<li>æŸ¥çœ‹æœåŠ¡<code>chkconfig --list [|grep xxx]</code></li>
<li><code>chkconfig æœåŠ¡å --list</code></li>
<li><code>chkconfig --level 5 æœåŠ¡å on/off</code></li>
</ul>
</li>
<li>ä½¿ç”¨ç»†èŠ‚ï¼šchkconfigé‡æ–°è®¾ç½®æœåŠ¡åè‡ªå¯åŠ¨å›æˆ–å…³é—­ï¼Œéœ€è¦é‡å¯æœºå™¨rebootç”Ÿæ•ˆã€‚</li>
</ul>
</li>
<li>systemctlç®¡ç†æŒ‡ä»¤<ul>
<li>åŸºæœ¬è¯­æ³•ï¼š<code>systemctl [start|stop|restart|status] æœåŠ¡å</code></li>
<li>systemctlæŒ‡ä»¤ç®¡ç†çš„æœåŠ¡åœ¨&#x2F;usr&#x2F;Iib&#x2F;systemd&#x2F;systemæŸ¥çœ‹</li>
<li>systemctliè®¾ç½®æœåŠ¡çš„è‡ªå¯åŠ¨çŠ¶æ€<br>1.<code>systemctl list-unit-files [|grepæœåŠ¡å]</code>ï¼ˆæŸ¥çœ‹æœåŠ¡å¼€æœºå¯åŠ¨çŠ¶æ€ï¼Œgrepå¯ä»¥è¿›è¡Œè¿‡æ»¤ï¼‰<br>2.<code>systemctl enable æœåŠ¡å</code>ï¼ˆè®¾ç½®æœåŠ¡å¼€æœºå¯åŠ¨ï¼‰<br>3.<code>systemctl disable æœåŠ¡å</code>ï¼ˆå…³é—­æœåŠ¡å¼€æœºå¯åŠ¨ï¼‰<br>4.<code>systemct is-enabled æœåŠ¡å</code>ï¼ˆæŸ¥è¯¢æŸä¸ªæœåŠ¡æ˜¯å¦æ˜¯è‡ªå¯åŠ¨çš„ï¼‰</li>
<li>é˜²ç«å¢™ï¼šé˜²æ­¢é‡è¦ç«¯å£è¢«è®¿é—®</li>
<li>ç»†èŠ‚è®¨è®ºï¼š<br>1.å…³é—­æˆ–è€…å¯ç”¨é˜²ç«å¢™åï¼Œç«‹å³ç”Ÿæ•ˆã€‚[telnetæµ‹è¯•æŸä¸ªç«¯å£å³å¯]<br>2.è¿™ç§æ–¹å¼åªæ˜¯ä¸´æ—¶ç”Ÿæ•ˆï¼Œå½“é‡å¯ç³»ç»Ÿåï¼Œè¿˜æ˜¯å›å½’ä»¥å‰å¯¹æœåŠ¡çš„è®¾ç½®ã€‚<br>3.å¦‚æœå¸Œæœ›è®¾ç½®æŸä¸ªæœåŠ¡è‡ªå¯åŠ¨æˆ–å…³é—­æ°¸ä¹…ç”Ÿæ•ˆï¼Œè¦ä½¿ç”¨<code>systemctl [enable|disable] æœåŠ¡å</code></li>
</ul>
</li>
<li>firewallæŒ‡ä»¤<ul>
<li>æ‰“å¼€ç«¯å£ï¼š<code>firewall-cmd --permanent --add-port=ç«¯å£å·/åè®®</code><br>å…³é—­ç«¯å£ï¼š<code>firewall-cmd --permanent --remove-port=ç«¯å£å·/åè®®</code><br>é‡æ–°è½½å…¥ï¼Œæ‰èƒ½ç”Ÿæ•ˆï¼š<code>firewall-cmd --reload</code><br>æŸ¥è¯¢ç«¯å£æ˜¯å¦å¼€æ”¾ï¼š<code>firewall-cmd --query-port=ç«¯å£/åè®®</code></li>
</ul>
</li>
<li>åŠ¨æ€ç›‘æ§è¿›ç¨‹<ul>
<li>topä¸pså‘½ä»¤å¾ˆç›¸ä¼¼ã€‚å®ƒä»¬éƒ½ç”¨æ¥æ˜¾ç¤ºæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ã€‚Topä¸psæœ€å¤§çš„ä¸åŒä¹‹å¤„ï¼Œåœ¨äºtopåœ¨æ‰§è¡Œä¸€æ®µæ—¶é—´å¯ä»¥æ›´æ–°æ­£åœ¨è¿è¡Œçš„çš„è¿›ç¨‹ã€‚</li>
<li>è¯­æ³•ï¼š<code>top é€‰é¡¹</code></li>
<li>ç›´æ¥topï¼Œé»˜è®¤-dæ˜¯ä¸‰ç§’</li>
</ul>
</li>
<li>ç›‘æ§ç½‘ç»œçŠ¶æ€<ul>
<li>æŸ¥çœ‹ç³»ç»Ÿç½‘ç»œæƒ…å†µnetstatï¼šåŸºæœ¬è¯­æ³•ï¼Œ<code>netstat [é€‰é¡¹]</code></li>
<li>é€‰é¡¹è¯´æ˜ï¼š<ul>
<li>-anï¼šæŒ‰ä¸€å®šé¡ºåºæ’åˆ—è¾“å‡º</li>
<li>-pï¼šæ˜¾ç¤ºå“ªä¸ªè¿›ç¨‹åœ¨è°ƒç”¨</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="10-rpmä¸yum"><a href="#10-rpmä¸yum" class="headerlink" title="10.rpmä¸yum"></a>10.rpmä¸yum</h2><h3 id="10-1rmp"><a href="#10-1rmp" class="headerlink" title="10.1rmp"></a>10.1rmp</h3><ol>
<li><p>ä»‹ç»ï¼šrpmç”¨äºäº’è”ç½‘ä¸‹è½½åŒ…çš„æ‰“åŒ…åŠå®‰è£…å·¥å…·ï¼Œå®ƒåŒ…å«åœ¨æŸäº›Linuxåˆ†å‘ç‰ˆä¸­ã€‚å®ƒç”Ÿæˆå…·æœ‰.RPMæ‰©å±•åçš„æ–‡ä»¶ã€‚RPMæ˜¯RedHat Package Manager(RedHatsè½¯ä»¶åŒ…ç®¡ç†å·¥å…·)çš„ç¼©å†™ï¼Œç±»ä»¥windowsçš„setup.exe,è¿™ä¸€æ–‡ä»¶æ ¼å¼åç§°è™½ç„¶æ‰“ä¸Šäº†RedHatçš„æ ‡å¿—ï¼Œä½†ç†å¿µæ˜¯é€šç”¨çš„ã€‚</p>
</li>
<li><p>rpmåŒ…çš„ç®€å•æŸ¥è¯¢æŒ‡ä»¤ï¼šæŸ¥è¯¢å·²å®‰è£…çš„rpmåˆ—è¡¨<code>rpm -qa|grep xx</code></p>
</li>
<li><p>å…¶ä»–æŸ¥è¯¢æŒ‡ä»¤ï¼š</p>
<ul>
<li><code>rpm-qa</code>ï¼šæŸ¥è¯¢æ‰€å®‰è£…çš„æ‰€æœ‰rpmè½¯ä»¶åŒ…<br><code>rpm -qa | more</code><br><code>rpm -qa | grep X [rpm -qa | grep firefox]</code></li>
</ul>
</li>
<li><p>rpmåŒ…çš„ç®¡ç†ï¼š</p>
<ul>
<li>å¸è½½rpmåŒ…è¯­æ³•ï¼š<code>rpm -e RPMåŒ…çš„åç§° //erase</code></li>
<li>å®‰è£…rpmåŒ…çš„è¯­æ³•ï¼š<code>rpm -ivh RPMåŒ…å…¨è·¯å¾„åç§°</code></li>
<li>å‚æ•°è¯´æ˜ï¼ši&#x3D;installå®‰è£…ï¼Œv&#x3D;verboseæç¤ºï¼Œh&#x3D;hashè¿›åº¦æ¡</li>
</ul>
</li>
</ol>
<h3 id="10-2yum"><a href="#10-2yum" class="headerlink" title="10.2yum"></a>10.2yum</h3><ol>
<li>ä»‹ç»ï¼šYumæ˜¯ä¸€ä¸ªShellå‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚åŸºäºRPMåŒ…ç®¡ç†ï¼Œèƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½RPMåŒ…å¹¶ç›®ä¸”å®‰è£…ï¼Œå¯ä»¥<strong>è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»</strong>ï¼Œå¹¶ç›®ä¸€æ¬¡å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä»¶åŒ…ã€‚</li>
<li>yumçš„åŸºæœ¬æŒ‡ä»¤ï¼šæŸ¥è¯¢yumæœåŠ¡å™¨æ˜¯å¦æœ‰éœ€è¦å®‰è£…çš„è½¯ä»¶<br><code>yum list|grep xxè½¯ä»¶åˆ—è¡¨</code><br>å®‰è£…æŒ‡å®šçš„yumåŒ…<br><code>yum install xxx ä¸‹è½½å®‰è£…</code></li>
</ol>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
  </entry>
  <entry>
    <title>MyBatis-Plusçš„ä½¿ç”¨</title>
    <url>/2024/12/10/MyBatis-Plus%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h1 id="MyBatis-Plusçš„ä½¿ç”¨"><a href="#MyBatis-Plusçš„ä½¿ç”¨" class="headerlink" title="MyBatis-Plusçš„ä½¿ç”¨"></a>MyBatis-Plusçš„ä½¿ç”¨</h1><p>æ•°æ®åº“åŸºæœ¬è®¾è®¡å®Œæ¯•ï¼Œåˆ›å»ºå®Œæ•°æ®åº“åå°±éœ€è¦è®©åç«¯è¿æ¥æ•°æ®åº“ã€‚åœ¨è¿™é‡Œç”¨<code>MyBatis-Plus</code>çš„ä»£ç ç”Ÿæˆå™¨èƒ½å¿«é€Ÿç”Ÿæˆ<code>entity</code>,<code>mapper</code>,<code>service</code>ç­‰æ–‡ä»¶ã€‚</p>
<h2 id="æ“ä½œæ­¥éª¤"><a href="#æ“ä½œæ­¥éª¤" class="headerlink" title="æ“ä½œæ­¥éª¤"></a>æ“ä½œæ­¥éª¤</h2><h3 id="ç¬¬ä¸€æ­¥ï¼Œæ·»åŠ ä¾èµ–"><a href="#ç¬¬ä¸€æ­¥ï¼Œæ·»åŠ ä¾èµ–" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼Œæ·»åŠ ä¾èµ–"></a>ç¬¬ä¸€æ­¥ï¼Œæ·»åŠ ä¾èµ–</h3><p>åœ¨<code>pom.xml</code>æ–‡ä»¶ä¸­çš„<code>dependencies</code>é‡Œæ·»åŠ å¦‚ä¸‹å‡ è¡Œä»£ç ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml">xml<br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-spring-boot3-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.freemarker<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>freemarker<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.31<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>ç°åœ¨æˆ‘ç”¨çš„æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¦‚æœ‰é—®é¢˜è¯·å»<a href="https://baomidou.com/">å®˜ç½‘</a>æŸ¥çœ‹æ˜¯å¦æœ‰æ›´æ–°ã€‚å…¶ä¸­<code>freemarker</code>æ˜¯æˆ‘è¦ä½¿ç”¨çš„æ¨¡ç‰ˆå¼•æ“ã€‚</p>
<h3 id="ç¬¬äºŒæ­¥-åç«¯è¿æ¥æ•°æ®åº“"><a href="#ç¬¬äºŒæ­¥-åç«¯è¿æ¥æ•°æ®åº“" class="headerlink" title="ç¬¬äºŒæ­¥ åç«¯è¿æ¥æ•°æ®åº“"></a>ç¬¬äºŒæ­¥ åç«¯è¿æ¥æ•°æ®åº“</h3><p>åœ¨<code>application.properties</code>ä¸‹å†™æ˜ä½ è¦è¿æ¥çš„æ•°æ®åº“çš„è¯¦ç»†ä¿¡æ¯ï¼Œæˆ‘ç”¨çš„æ˜¯<code>mysql5.7</code>ã€‚</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><code class="hljs routeros">properties<br>spring.datasource.<span class="hljs-attribute">driver-class-name</span>=com.mysql.cj.jdbc.Driver<br>spring.datasource.<span class="hljs-attribute">url</span>=jdbc:mysql://localhost:3306/&quot;yourDatabaseName&quot;<br>spring.datasource.<span class="hljs-attribute">username</span>=<span class="hljs-string">&quot;yourSqlUsername(maybe root)&quot;</span><br>spring.datasource.<span class="hljs-attribute">password</span>=<span class="hljs-string">&quot;yourSqlPassword&quot;</span><br>mybatis-plus.<span class="hljs-attribute">mapper-locations</span>=classpath:xml/*.xml<br>mybatis-plus.configuration.<span class="hljs-attribute">log-impl</span>=org.apache.ibatis.logging.stdout.StdOutImpl<br></code></pre></td></tr></table></figure>

<p>è¯·å°†åŒå¼•å·çš„åœ°æ–¹æ¢ä¸Šä½ è‡ªå·±è¦ä½¿ç”¨çš„ã€‚å…¶ä¸­æœ€åä¸€å¥è¯æ˜¯ä¸ºäº†ä¹‹ååœ¨ç»ˆç«¯æ‰“å°å‡ºä»£ç æ‰§è¡Œçš„sqlè¯­å¥ã€‚</p>
<h3 id="ç¬¬ä¸‰æ­¥-ç¼–å†™ä»£ç ç”Ÿæˆå™¨ä»£ç "><a href="#ç¬¬ä¸‰æ­¥-ç¼–å†™ä»£ç ç”Ÿæˆå™¨ä»£ç " class="headerlink" title="ç¬¬ä¸‰æ­¥ ç¼–å†™ä»£ç ç”Ÿæˆå™¨ä»£ç "></a>ç¬¬ä¸‰æ­¥ ç¼–å†™ä»£ç ç”Ÿæˆå™¨ä»£ç </h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.horsen.myproject;<br><br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.generator.FastAutoGenerator;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;<br><br><span class="hljs-keyword">import</span> java.nio.file.Paths;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CodeGenerator</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">tables</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;users,roles,xxx,xxx&quot;</span>;<br>        FastAutoGenerator.create(<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/yourDatabaseName&quot;</span>,<span class="hljs-string">&quot;username&quot;</span>,<span class="hljs-string">&quot;password&quot;</span>)<br>                .globalConfig(builder -&gt; builder<br>                        .author(<span class="hljs-string">&quot;horsen&quot;</span>)<br>                        .outputDir(Paths.get(System.getProperty(<span class="hljs-string">&quot;user.dir&quot;</span>))+<span class="hljs-string">&quot;/src/main/java&quot;</span>)<br>                        .commentDate(<span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>)<br>                )<br>                .packageConfig(builder -&gt; builder<br>                        .parent(<span class="hljs-string">&quot;com.airomance.easytravelroute&quot;</span>)<br>                        .entity(<span class="hljs-string">&quot;entity&quot;</span>)<br>                        .mapper(<span class="hljs-string">&quot;mapper&quot;</span>)<br>                        .service(<span class="hljs-string">&quot;service&quot;</span>)<br>                        .serviceImpl(<span class="hljs-string">&quot;service.impl&quot;</span>)<br>                        .xml(<span class="hljs-string">&quot;mapper.xml&quot;</span>)<br>                )<br>                .strategyConfig(builder -&gt; builder<br>                        .addInclude(tables.split(<span class="hljs-string">&quot;,&quot;</span>))<br>                        .entityBuilder()<br>                        .enableLombok()<br>                        .enableFileOverride()<br>                        .controllerBuilder()<br>                        .enableRestStyle()<br>                )<br>                .templateEngine(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FreemarkerTemplateEngine</span>())<br>                .execute();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¯·å°†æ•°æ®åº“æ¶‰åŠçš„æ•°æ®åº“åç§°ï¼Œç”¨æˆ·åï¼Œå¯†ç æ¢æˆè‡ªå·±çš„ã€‚è¿˜æœ‰åŒ…åã€‚</p>
<h3 id="ç¬¬å››æ­¥-è¿è¡Œä»£ç ç”Ÿæˆå™¨-ä¹Ÿå¯ä»¥ç›´æ¥ç”¨MyBatis-Xæ’ä»¶ç”Ÿæˆ"><a href="#ç¬¬å››æ­¥-è¿è¡Œä»£ç ç”Ÿæˆå™¨-ä¹Ÿå¯ä»¥ç›´æ¥ç”¨MyBatis-Xæ’ä»¶ç”Ÿæˆ" class="headerlink" title="ç¬¬å››æ­¥ è¿è¡Œä»£ç ç”Ÿæˆå™¨(ä¹Ÿå¯ä»¥ç›´æ¥ç”¨MyBatis-Xæ’ä»¶ç”Ÿæˆ)"></a>ç¬¬å››æ­¥ è¿è¡Œä»£ç ç”Ÿæˆå™¨(ä¹Ÿå¯ä»¥ç›´æ¥ç”¨MyBatis-Xæ’ä»¶ç”Ÿæˆ)</h3><p>è¿è¡Œä»£ç ååº”è¯¥ä¼šè‡ªåŠ¨åˆ›å»ºå‡º<code>entity</code>,<code>mapper</code>,<code>service</code>ï¼Œ<code>controller</code>å±‚ç­‰æ–‡ä»¶ã€‚è¿™æ—¶éœ€è¦æŠŠmapperæ–‡ä»¶å¤¹ä¸‹çš„xmlæ–‡ä»¶å¤¹ç§»åŠ¨åˆ°é¡¹ç›®çš„<code>resources</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œè¿™æ ·æ–¹ä¾¿é…ç½®ä¹Ÿæ˜¯ä¸€èˆ¬çš„ä½¿ç”¨ä¹ æƒ¯ã€‚</p>
<p>æ³¨æ„ï¼Œè¿™é‡Œxmlå¿…é¡»ç§»åŠ¨ï¼ŒåŸå› åœ¨ç¬¬äºŒæ­¥å·²ç»è®¾ç½®äº†xmlæ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œå°±æ˜¯è¿™å¥é…ç½®ï¼š</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><code class="hljs gradle">mybatis-<span class="hljs-keyword">plus</span>.mapper-locations=<span class="hljs-keyword">classpath</span>:xml<span class="hljs-comment">/*.xml</span><br></code></pre></td></tr></table></figure>

<h3 id="ç¬¬äº”æ­¥-è®¾ç½®mapperè·¯å¾„"><a href="#ç¬¬äº”æ­¥-è®¾ç½®mapperè·¯å¾„" class="headerlink" title="ç¬¬äº”æ­¥ è®¾ç½®mapperè·¯å¾„"></a>ç¬¬äº”æ­¥ è®¾ç½®mapperè·¯å¾„</h3><p>æˆ‘ä»¬éœ€è¦å°†mapperæ–‡ä»¶å¤¹çš„è·¯å¾„å‘Šè¯‰Spring bootï¼Œåœ¨å¯åŠ¨é¡¹ç›®çš„<code>application</code>æ–‡ä»¶ä¸‹æ·»åŠ ä¸€ä¸ªæ³¨è§£ã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@MapperScan(<span class="hljs-string">&quot;com.horsen.myproject.mapper&quot;</span>)</span><br></code></pre></td></tr></table></figure>

<p>æ·»åŠ åè¿™ä¸ªæ–‡ä»¶ä»£ç åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.horsen.myproject;<br><br><span class="hljs-keyword">import</span> org.mybatis.spring.annotation.MapperScan;<br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@MapperScan(&quot;com.horsen.myproject.mapper&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Application</span> &#123;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		SpringApplication.run(Application.class, args);<br>	&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="ç»“æŸ"><a href="#ç»“æŸ" class="headerlink" title="ç»“æŸ"></a>ç»“æŸ</h2><p>è‡³æ­¤åº”è¯¥èƒ½å¤Ÿæ­£å¸¸è¿è¡Œé¡¹ç›®ï¼Œç„¶åè¿›è¡Œæ¥å£çš„è¯¦ç»†ç¼–å†™äº†ã€‚</p>
]]></content>
      <categories>
        <category>MyBatis</category>
      </categories>
  </entry>
  <entry>
    <title>ä½¿ç”¨Nginxéƒ¨ç½²é™æ€ç½‘ç«™</title>
    <url>/2024/07/26/Nginx%E9%83%A8%E7%BD%B2%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99/</url>
    <content><![CDATA[<p>æŒ‰ç…§ç½‘ä¸Šæ•™ç¨‹å®‰è£…Dockerï¼Œå¹¶ä½¿ç”¨Dockerå®¹å™¨éƒ¨ç½²é™æ€ç½‘ç«™ï¼Œç½‘ä¸Šå‚è€ƒæ•™ç¨‹å¦‚ä¸‹ï¼š</p>
<p>1ã€<a href="https://yeasy.gitbook.io/docker_practice/install">https://yeasy.gitbook.io/docker_practice/install</a></p>
<p>2ã€<a href="https://xie.infoq.cn/article/56b71146e70c590e220c468eb">https://xie.infoq.cn/article/56b71146e70c590e220c468eb</a></p>
<p>1.å®‰è£…docker </p>
<p>ï¼ˆ1ï¼‰ä¸‹è½½åŸºæœ¬çš„åŒ…</p>
<p>sudo yum install -y yum-utils  </p>
<p>ï¼ˆ2ï¼‰ç»™è™šæ‹Ÿæœºè”ç½‘</p>
<p>â€‹     a.åˆ é™¤etc&#x2F;sysconfig&#x2F;network-scriptsé‡Œé¢å¤šä½™çš„æ–‡ä»¶å¹¶æŸ¥çœ‹  </p>
<p>rm-rf ifcfg-enp0s3</p>
<p>   <img src="/img/articles/Linux/a.png"> </p>
<p>â€‹     b.é‡å¯è™šæ‹Ÿæœºå’Œè™šæ‹Ÿæœºç½‘ç»œå¹¶æ£€æŸ¥</p>
<p>systemctl restart network</p>
<p>   <img src="/img/articles/Linux/b.png"> </p>
<p>ï¼ˆ4ï¼‰é…ç½®é˜¿é‡Œäº‘é•œåƒï¼ŒåŠ å¿«ä¸‹è½½é€Ÿåº¦</p>
<p>sudo yum-config-manager \</p>
<p>â€‹      â€“add-repo \</p>
<p>â€‹      <a href="https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo">https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</a></p>
<p>ï¼ˆ5ï¼‰å®‰è£…Dockerå¼•æ“</p>
<p>â€‹    sudo yum install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</p>
<p>ï¼ˆ6ï¼‰æ£€éªŒå®‰è£…ç»“æœ</p>
<p>   <img src="/img/articles/Linux/1.png"> </p>
<p>2.å°†æˆ‘ç”µè„‘æœ¬åœ°çš„é™æ€ç½‘ç«™ä»£ç å‹ç¼©åŒ…ç§»åˆ°åˆ°è™šæ‹Ÿæœºé‡Œå†è§£å‹</p>
<p>   <img src="/img/articles/Linux/2.png"> </p>
<p> 3.å› ç›®å‰Docker Hubå›½å†…æ— æ³•è®¿é—®ï¼Œå› æ­¤è¦é…ç½®å›½å†…å¯ç”¨é•œåƒæ‰èƒ½ä½¿ç”¨dockeræ‹‰å–é•œåƒè¿›è¡Œéƒ¨ç½²ï¼Œä¿®æ”¹dockeré…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<p>   <img src="/img/articles/Linux/3.png"> </p>
<p>4.Linuxé˜²ç«å¢™å¼€æ”¾ç«¯å£å¹¶é‡å¯é˜²ç«å¢™</p>
<p>   <img src="/img/articles/Linux/4.png"> </p>
<p>5.å¼€å¯docker</p>
<p>   <img src="/img/articles/Linux/5.png">  </p>
<p>6.è¿›å…¥ä»£ç æ‰€åœ¨ç›®å½•è¿›è¡ŒNginxé•œåƒæ‹‰å–å’Œè¿è¡Œdockeré•œåƒå¹¶ç»‘å®šç«¯å£</p>
<p>  <img src="/img/articles/Linux/6.png">  </p>
<p>7.æŸ¥çœ‹dockerå®¹å™¨è¿è¡Œæƒ…å†µ</p>
<p>  <img src="/img/articles/Linux/7.png"> </p>
<p>8.è®¿é—®demoç½‘ç«™ï¼ˆåœ¨Windowsç”µè„‘æœ¬åœ°æµè§ˆå™¨è®¿é—®è™šæ‹Ÿæœºçš„IPåœ°å€ï¼‰</p>
<p>  <img src="/img/articles/Linux/8.png"> </p>
]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
  </entry>
  <entry>
    <title>Redis åŸºç¡€å®æˆ˜</title>
    <url>/2024/12/20/Redis-Redis%20%E5%9F%BA%E7%A1%80%E5%AE%9E%E6%88%98/</url>
    <content><![CDATA[<h1 id="ä¸€-Redis-å…¥é—¨"><a href="#ä¸€-Redis-å…¥é—¨" class="headerlink" title="ä¸€.Redis å…¥é—¨"></a>ä¸€.Redis å…¥é—¨</h1><h1 id="1-åˆè¯†-Redis"><a href="#1-åˆè¯†-Redis" class="headerlink" title="1. åˆè¯† Redis"></a>1. åˆè¯† Redis</h1><p>Redis æ˜¯ä¸€ç§<strong>é”®å€¼å‹</strong>çš„ <strong>NoSql</strong> æ•°æ®åº“ã€‚</p>
<blockquote>
<p><strong>é”®å€¼å‹</strong>ï¼šæ˜¯æŒ‡ Redis ä¸­å­˜å‚¨çš„æ•°æ®éƒ½æ˜¯<strong>ä»¥ keyã€value å¯¹çš„å½¢å¼å­˜å‚¨</strong>ï¼Œè€Œ value çš„å½¢å¼å¤šç§å¤šæ ·ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•°å€¼ã€ç”šè‡³ json</p>
</blockquote>
<h2 id="1-1-è®¤è¯†-NoSQL"><a href="#1-1-è®¤è¯†-NoSQL" class="headerlink" title="1.1 è®¤è¯† NoSQL"></a>1.1 è®¤è¯† NoSQL</h2><h3 id="1-1-1-ä»€ä¹ˆæ˜¯-NoSQL"><a href="#1-1-1-ä»€ä¹ˆæ˜¯-NoSQL" class="headerlink" title="1.1.1 ä»€ä¹ˆæ˜¯ NoSQL"></a>1.1.1 ä»€ä¹ˆæ˜¯ NoSQL</h3><hr>
<ul>
<li>NoSQL æœ€å¸¸è§çš„è§£é‡Šæ˜¯â€<code>non-relational</code>â€œï¼Œ å¾ˆå¤šäººä¹Ÿè¯´å®ƒæ˜¯â€***Not Only SQL***â€œ</li>
<li>NoSQL ä»…ä»…æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œæ³›æŒ‡<strong>éå…³ç³»å‹çš„æ•°æ®åº“</strong></li>
<li>åŒºåˆ«äºå…³ç³»æ•°æ®åº“ï¼Œå®ƒä»¬ä¸ä¿è¯å…³ç³»æ•°æ®çš„ ACID ç‰¹æ€§</li>
<li>NoSQL æ˜¯ä¸€é¡¹å…¨æ–°çš„æ•°æ®åº“é©å‘½æ€§è¿åŠ¨ï¼Œæå€¡è¿ç”¨éå…³ç³»å‹çš„æ•°æ®å­˜å‚¨ï¼Œç›¸å¯¹äºé“ºå¤©ç›–åœ°çš„å…³ç³»å‹æ•°æ®åº“è¿ç”¨ï¼Œè¿™ä¸€æ¦‚å¿µæ— ç–‘æ˜¯ä¸€ç§å…¨æ–°çš„æ€ç»´çš„æ³¨å…¥</li>
<li>å¸¸è§çš„ NoSQL æ•°æ®åº“æœ‰ï¼š<code>Redis</code>ã€<code>MemCache</code>ã€<code>MongoDB</code> ç­‰</li>
</ul>
<h3 id="1-1-2-NoSQL-ä¸-SQL-çš„å·®å¼‚"><a href="#1-1-2-NoSQL-ä¸-SQL-çš„å·®å¼‚" class="headerlink" title="1.1.2 NoSQL ä¸ SQL çš„å·®å¼‚"></a>1.1.2 NoSQL ä¸ SQL çš„å·®å¼‚</h3><hr>
<p>| | SQL | NoSQL |<br>| â€”â€”â€“ | â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€” |<br>| æ•°æ®ç»“æ„ | ç»“æ„åŒ– | éç»“æ„åŒ– |<br>| æ•°æ®å…³è” | å…³è”çš„ | æ— å…³è”çš„ |<br>| æŸ¥è¯¢æ–¹å¼ | SQL æŸ¥è¯¢ | é SQL |<br>| äº‹åŠ¡ç‰¹æ€§ | ACID | BASE |<br>| å­˜å‚¨æ–¹å¼ | ç£ç›˜ | å†…å­˜ |<br>| æ‰©å±•æ€§ | å‚ç›´ | æ°´å¹³ |<br>| ä½¿ç”¨åœºæ™¯ | 1ï¼‰æ•°æ®ç»“æ„å›ºå®š | 1ï¼‰æ•°æ®ç»“æ„ä¸å›ºå®š |<br>| | | 2ï¼‰ç›¸å…³ä¸šåŠ¡å¯¹æ•°æ®å®‰å…¨æ€§ã€ä¸€è‡´æ€§è¦æ±‚è¾ƒé«˜ | 2ï¼‰å¯¹ä¸€è‡´æ€§ã€å®‰å…¨æ€§è¦æ±‚ä¸é«˜ |<br>| | | 3ï¼‰å¯¹æ€§èƒ½è¦æ±‚ |</p>
<h1 id="2-Redis-å¸¸è§å‘½ä»¤"><a href="#2-Redis-å¸¸è§å‘½ä»¤" class="headerlink" title="2.Redis å¸¸è§å‘½ä»¤"></a>2.Redis å¸¸è§å‘½ä»¤</h1><blockquote>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ Redis çš„ä¸­æ–‡æ–‡æ¡£ï¼š<a href="http://www.redis.cn/commands.html%EF%BC%8C%E6%9D%A5%E5%AD%A6%E4%B9%A0%E5%90%84%E7%A7%8D%E5%91%BD%E4%BB%A4%E3%80%82">http://www.redis.cn/commands.htmlï¼Œæ¥å­¦ä¹ å„ç§å‘½ä»¤ã€‚</a></p>
<p>ä¹Ÿå¯ä»¥é€šè¿‡èœé¸Ÿæ•™ç¨‹å®˜ç½‘æ¥å­¦ä¹ ï¼š<a href="https://www.runoob.com/redis/redis-keys.html">https://www.runoob.com/redis/redis-keys.html</a></p>
</blockquote>
<h2 id="2-1-Redis-æ•°æ®ç±»å‹"><a href="#2-1-Redis-æ•°æ®ç±»å‹" class="headerlink" title="2.1 Redis æ•°æ®ç±»å‹"></a>2.1 Redis æ•°æ®ç±»å‹</h2><blockquote>
<p>Redis æ˜¯ä¸€ç§ key-value æ•°æ®åº“ï¼Œä¸€èˆ¬ key éƒ½æ˜¯ Stringï¼Œvalue çš„ç±»å‹äº”èŠ±å…«é—¨ã€‚</p>
</blockquote>
<h2 id="2-2-Redis-åŸºæœ¬å‘½ä»¤"><a href="#2-2-Redis-åŸºæœ¬å‘½ä»¤" class="headerlink" title="2.2 Redis åŸºæœ¬å‘½ä»¤"></a>2.2 Redis åŸºæœ¬å‘½ä»¤</h2><blockquote>
<p>é€šç”¨æŒ‡ä»¤æ˜¯éƒ¨åˆ†æ•°æ®ç±»å‹çš„ï¼Œéƒ½å¯ä»¥ä½¿ç”¨çš„æŒ‡ä»¤</p>
</blockquote>
<table>
<thead>
<tr>
<th>æŒ‡ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>KEYS</td>
<td>æŸ¥çœ‹ç¬¦åˆæ¨¡æ¿çš„æ‰€æœ‰ key</td>
</tr>
<tr>
<td>DEL</td>
<td>åˆ é™¤ä¸€ä¸ªæŒ‡å®šçš„ key</td>
</tr>
<tr>
<td>EXISTS</td>
<td>åˆ¤æ–­ key æ˜¯å¦å­˜åœ¨</td>
</tr>
<tr>
<td>EXPIRE</td>
<td>ç»™ä¸€ä¸ª key è®¾ç½®æœ‰æ•ˆæœŸï¼Œæœ‰æ•ˆæœŸåˆ°æœŸæ—¶è¯¥ key ä¼šè¢«è‡ªåŠ¨åˆ é™¤</td>
</tr>
<tr>
<td>TTL</td>
<td>æŸ¥çœ‹ä¸€ä¸ª KEY çš„å‰©ä½™æœ‰æ•ˆæœŸ</td>
</tr>
</tbody></table>
<p><strong>é€šè¿‡ help [command] å¯ä»¥æŸ¥çœ‹ä¸€ä¸ªå‘½ä»¤çš„å…·ä½“ç”¨æ³•</strong></p>
<h2 id="2-3-String-ç±»å‹"><a href="#2-3-String-ç±»å‹" class="headerlink" title="2.3 String ç±»å‹"></a>2.3 String ç±»å‹</h2><p>å­—ç¬¦ä¸²ç±»å‹ï¼ŒRedis ä¸­æœ€ç®€å•çš„å­˜å‚¨ç±»å‹ã€‚</p>
<p>å…¶ value æ˜¯å­—ç¬¦ä¸²ï¼Œä½†æ˜¯æ ¹æ®å­—ç¬¦ä¸²çš„æ ¼å¼ä¸åŒï¼Œå¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<ul>
<li>stringï¼šæ™®é€šå­—ç¬¦ä¸²</li>
<li>intï¼šæ•´æ•°ç±»å‹ï¼Œå¯ä»¥åšè‡ªå¢ã€è‡ªå‡æ“ä½œã€‚</li>
<li>floatï¼šæµ®ç‚¹ç±»å‹ï¼Œå¯ä»¥åšè‡ªå¢ã€è‡ªå‡æ“ä½œã€‚</li>
</ul>
<p>ä¸ç®¡æ˜¯å“ªç§æ ¼å¼ï¼Œåº•å±‚éƒ½æ˜¯å­—èŠ‚æ•°ç»„å½¢å¼å­˜å‚¨ï¼Œåªä¸è¿‡æ˜¯ç¼–ç æ–¹å¼ä¸åŒã€‚å­—ç¬¦ä¸²ç±»å‹çš„æœ€å¤§ç©ºé—´ä¸èƒ½è¶…è¿‡ 512m.</p>
<h3 id="2-3-1-String-ç±»å‹å¸¸ç”¨å‘½ä»¤"><a href="#2-3-1-String-ç±»å‹å¸¸ç”¨å‘½ä»¤" class="headerlink" title="2.3.1 String ç±»å‹å¸¸ç”¨å‘½ä»¤"></a>2.3.1 String ç±»å‹å¸¸ç”¨å‘½ä»¤</h3><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>SET</td>
<td>æ·»åŠ æˆ–è€…ä¿®æ”¹å·²ç»å­˜åœ¨çš„ä¸€ä¸ª String ç±»å‹çš„é”®å€¼å¯¹</td>
</tr>
<tr>
<td>GET</td>
<td>æ ¹æ® key è·å– String ç±»å‹çš„ value</td>
</tr>
<tr>
<td>MSET</td>
<td>æ‰¹é‡æ·»åŠ å¤šä¸ª String ç±»å‹çš„é”®å€¼å¯¹</td>
</tr>
<tr>
<td>MGET</td>
<td>æ ¹æ®å¤šä¸ª key è·å–å¤šä¸ª String ç±»å‹çš„ value</td>
</tr>
<tr>
<td>INCR</td>
<td>è®©ä¸€ä¸ªæ•´å‹çš„ key è‡ªå¢ 1</td>
</tr>
<tr>
<td>INCRBY</td>
<td>è®©ä¸€ä¸ªæ•´å‹çš„ key è‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿ï¼Œä¾‹å¦‚ï¼šincrby num 2 è®© num å€¼è‡ªå¢ 2</td>
</tr>
<tr>
<td>INCRBYFLOAT</td>
<td>è®©ä¸€ä¸ªæµ®ç‚¹ç±»å‹çš„æ•°å­—è‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿</td>
</tr>
<tr>
<td><strong>SETNX</strong></td>
<td>æ·»åŠ ä¸€ä¸ª String ç±»å‹çš„é”®å€¼å¯¹ï¼Œå‰ææ˜¯è¿™ä¸ª key ä¸å­˜åœ¨ï¼Œå¦åˆ™ä¸æ‰§è¡Œ</td>
</tr>
<tr>
<td>SETEX</td>
<td>æ·»åŠ ä¸€ä¸ª String ç±»å‹çš„é”®å€¼å¯¹ï¼Œå¹¶ä¸”æŒ‡å®šæœ‰æ•ˆæœŸ</td>
</tr>
</tbody></table>
<h2 id="2-4-Hash-ç±»å‹"><a href="#2-4-Hash-ç±»å‹" class="headerlink" title="2.4 Hash ç±»å‹"></a>2.4 Hash ç±»å‹</h2><blockquote>
<p><strong>Hash ç±»å‹ï¼Œä¹Ÿå«æ•£åˆ—ï¼Œå…¶ value æ˜¯ä¸€ä¸ªæ— åºå­—å…¸ï¼Œç±»ä¼¼äº Java ä¸­çš„</strong><code>**HashMap**</code><strong>ç»“æ„ã€‚</strong></p>
</blockquote>
<ul>
<li><p><strong>Hash ç»“æ„å¯ä»¥å°†å¯¹è±¡ä¸­çš„æ¯ä¸ªå­—æ®µç‹¬ç«‹å­˜å‚¨ï¼Œå¯ä»¥é’ˆå¯¹å•ä¸ªå­—æ®µåš CRUD</strong></p>
</li>
<li><p>Hash çš„å¸¸è§å‘½ä»¤æœ‰ï¼š</p>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>HSET key field value</td>
<td>æ·»åŠ æˆ–è€…ä¿®æ”¹ hash ç±»å‹ key çš„ field çš„å€¼</td>
</tr>
<tr>
<td>HGET key field</td>
<td>è·å–ä¸€ä¸ª hash ç±»å‹ key çš„ field çš„å€¼</td>
</tr>
<tr>
<td>HMSET</td>
<td>hmset å’Œ hset æ•ˆæœç›¸åŒ ï¼Œ4.0 ä¹‹å hmset å¯ä»¥å¼ƒç”¨äº†</td>
</tr>
<tr>
<td>HMGET</td>
<td>æ‰¹é‡è·å–å¤šä¸ª hash ç±»å‹ key çš„ field çš„å€¼</td>
</tr>
<tr>
<td>HGETALL</td>
<td>è·å–ä¸€ä¸ª hash ç±»å‹çš„ key ä¸­çš„æ‰€æœ‰çš„ field å’Œ value</td>
</tr>
<tr>
<td>HKEYS</td>
<td>è·å–ä¸€ä¸ª hash ç±»å‹çš„ key ä¸­çš„æ‰€æœ‰çš„ field</td>
</tr>
<tr>
<td>HVALS</td>
<td>è·å–ä¸€ä¸ª hash ç±»å‹çš„ key ä¸­çš„æ‰€æœ‰çš„ value</td>
</tr>
<tr>
<td>HINCRBY</td>
<td>è®©ä¸€ä¸ª hash ç±»å‹ key çš„å­—æ®µå€¼è‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿</td>
</tr>
<tr>
<td>HSETNX</td>
<td>æ·»åŠ ä¸€ä¸ª hash ç±»å‹çš„ key çš„ field å€¼ï¼Œå‰ææ˜¯è¿™ä¸ª field ä¸å­˜åœ¨ï¼Œå¦åˆ™ä¸æ‰§è¡Œ</td>
</tr>
</tbody></table>
</li>
</ul>
<h2 id="2-5-List-ç±»å‹"><a href="#2-5-List-ç±»å‹" class="headerlink" title="2.5 List ç±»å‹"></a>2.5 List ç±»å‹</h2><blockquote>
<p><strong>Redis ä¸­çš„ List ç±»å‹ä¸ Java ä¸­çš„ LinkedList ç±»ä¼¼ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ç»“æ„ã€‚æ—¢å¯ä»¥æ”¯æŒæ­£å‘æ£€ç´¢å’Œä¹Ÿå¯ä»¥æ”¯æŒåå‘æ£€ç´¢ã€‚</strong></p>
</blockquote>
<p><strong>ç‰¹å¾ä¹Ÿä¸</strong><code>**LinkedList**</code><strong>ç±»ä¼¼ï¼š</strong></p>
<ul>
<li>æœ‰åº</li>
<li>å…ƒç´ å¯ä»¥é‡å¤</li>
<li>æ’å…¥å’Œåˆ é™¤å¿«</li>
<li>æŸ¥è¯¢é€Ÿåº¦ä¸€èˆ¬</li>
</ul>
<p>å¸¸ç”¨æ¥å­˜å‚¨ä¸€ä¸ªæœ‰åºæ•°æ®ï¼Œä¾‹å¦‚ï¼šæœ‹å‹åœˆç‚¹èµåˆ—è¡¨ï¼Œè¯„è®ºåˆ—è¡¨ç­‰.</p>
<blockquote>
<p><strong>List çš„å¸¸è§å‘½ä»¤æœ‰</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>LPUSH key  element â€¦</td>
<td>å‘åˆ—è¡¨å·¦ä¾§æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>LPOP key</td>
<td>ç§»é™¤å¹¶è¿”å›åˆ—è¡¨å·¦ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ²¡æœ‰åˆ™è¿”å› nil</td>
</tr>
<tr>
<td><strong>RPUSH key  element â€¦</strong></td>
<td>å‘åˆ—è¡¨å³ä¾§æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>RPOP key</td>
<td>ç§»é™¤å¹¶è¿”å›åˆ—è¡¨å³ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>LRANGE key star end</td>
<td>è¿”å›ä¸€æ®µè§’æ ‡èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ </td>
</tr>
<tr>
<td>BLPOP å’Œ BRPOP</td>
<td>ä¸ LPOP å’Œ RPOP ç±»ä¼¼ï¼Œåªä¸è¿‡åœ¨æ²¡æœ‰å…ƒç´ æ—¶ç­‰å¾…æŒ‡å®šæ—¶é—´ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å› nil</td>
</tr>
</tbody></table>
<h2 id="2-6-Set-ç±»å‹"><a href="#2-6-Set-ç±»å‹" class="headerlink" title="2.6 Set ç±»å‹"></a>2.6 Set ç±»å‹</h2><blockquote>
<p><strong>Redis çš„ Set ç»“æ„ä¸ Java ä¸­çš„ HashSet ç±»ä¼¼ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ª value ä¸º null çš„ HashMapã€‚å› ä¸ºä¹Ÿæ˜¯ä¸€ä¸ª hash è¡¨ï¼Œå› æ­¤å…·å¤‡ä¸ HashSet ç±»ä¼¼çš„ç‰¹å¾</strong></p>
</blockquote>
<ul>
<li>æ— åº</li>
<li>å…ƒç´ ä¸å¯é‡å¤</li>
<li>æŸ¥æ‰¾å¿«</li>
<li>æ”¯æŒäº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰åŠŸèƒ½</li>
</ul>
<blockquote>
<p><strong>Set çš„å¸¸è§å‘½ä»¤æœ‰</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>SADD key member â€¦</td>
<td>å‘ set ä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>SREM key member â€¦</td>
<td>ç§»é™¤ set ä¸­çš„æŒ‡å®šå…ƒç´ </td>
</tr>
<tr>
<td>SCARD key</td>
<td>è¿”å› set ä¸­å…ƒç´ çš„ä¸ªæ•°</td>
</tr>
<tr>
<td>SISMEMBER key member</td>
<td>åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äº set ä¸­</td>
</tr>
<tr>
<td>SMEMBERS</td>
<td>è·å– set ä¸­çš„æ‰€æœ‰å…ƒç´ </td>
</tr>
<tr>
<td>SINTER key1 key2 â€¦</td>
<td>æ±‚ key1 ä¸ key2 çš„äº¤é›†</td>
</tr>
<tr>
<td>SDIFF key1 key2 â€¦</td>
<td>æ±‚ key1 ä¸ key2 çš„å·®é›†</td>
</tr>
<tr>
<td>SUNION key1 key2 ..</td>
<td>æ±‚ key1 å’Œ key2 çš„å¹¶é›†</td>
</tr>
</tbody></table>
<h2 id="2-7-SortedSet-zset-ç±»å‹"><a href="#2-7-SortedSet-zset-ç±»å‹" class="headerlink" title="2.7 SortedSet (zset) ç±»å‹"></a>2.7 SortedSet (zset) ç±»å‹</h2><blockquote>
<p><strong>Redis çš„ SortedSet æ˜¯ä¸€ä¸ªå¯æ’åºçš„ set é›†åˆï¼Œä¸ Java ä¸­çš„ TreeSet æœ‰äº›ç±»ä¼¼ï¼Œä½†åº•å±‚æ•°æ®ç»“æ„å´å·®åˆ«å¾ˆå¤§ã€‚SortedSet ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½å¸¦æœ‰ä¸€ä¸ª score å±æ€§ï¼Œå¯ä»¥åŸºäº score å±æ€§å¯¹å…ƒç´ æ’åºï¼Œåº•å±‚çš„å®ç°æ˜¯ä¸€ä¸ªè·³è¡¨ï¼ˆSkipListï¼‰åŠ  hash è¡¨ã€‚</strong></p>
</blockquote>
<p><strong>SortedSet å…·å¤‡ä¸‹åˆ—ç‰¹æ€§ï¼š</strong></p>
<ul>
<li>å¯æ’åº</li>
<li>å…ƒç´ ä¸é‡å¤</li>
<li>æŸ¥è¯¢é€Ÿåº¦å¿«</li>
</ul>
<p>å› ä¸º SortedSet çš„å¯æ’åºç‰¹æ€§ï¼Œç»å¸¸è¢«ç”¨æ¥å®ç°æ’è¡Œæ¦œè¿™æ ·çš„åŠŸèƒ½ã€‚</p>
<blockquote>
<p><strong>SortedSet çš„å¸¸è§å‘½ä»¤æœ‰</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>ZADD key score member</td>
<td>æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ åˆ° sorted set ï¼Œå¦‚æœå·²ç»å­˜åœ¨åˆ™æ›´æ–°å…¶ score å€¼</td>
</tr>
<tr>
<td>ZREM key member</td>
<td>åˆ é™¤ sorted set ä¸­çš„ä¸€ä¸ªæŒ‡å®šå…ƒç´ </td>
</tr>
<tr>
<td>ZSCORE key member</td>
<td>è·å– sorted set ä¸­çš„æŒ‡å®šå…ƒç´ çš„ score å€¼</td>
</tr>
<tr>
<td>ZRANK key member</td>
<td>è·å– sorted set ä¸­çš„æŒ‡å®šå…ƒç´ çš„æ’å</td>
</tr>
<tr>
<td>ZCARD key</td>
<td>è·å– sorted set ä¸­çš„å…ƒç´ ä¸ªæ•°</td>
</tr>
<tr>
<td>ZCOUNT key min max</td>
<td>ç»Ÿè®¡ score å€¼åœ¨ç»™å®šèŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ çš„ä¸ªæ•°</td>
</tr>
<tr>
<td>ZINCRBY key increment member</td>
<td>è®© sorted set ä¸­çš„æŒ‡å®šå…ƒç´ è‡ªå¢ï¼Œæ­¥é•¿ä¸ºæŒ‡å®šçš„ increment å€¼</td>
</tr>
<tr>
<td>ZRANGE key min max</td>
<td>æŒ‰ç…§ score æ’åºåï¼Œè·å–æŒ‡å®šæ’åèŒƒå›´å†…çš„å…ƒç´ </td>
</tr>
<tr>
<td>ZRANGEBYSCORE key min max</td>
<td>æŒ‰ç…§ score æ’åºåï¼Œè·å–æŒ‡å®š score èŒƒå›´å†…çš„å…ƒç´ </td>
</tr>
<tr>
<td>ZDIFFã€ZINTERã€ZUNION</td>
<td>æ±‚å·®é›†ã€äº¤é›†ã€å¹¶é›†</td>
</tr>
</tbody></table>
<p><strong>æ³¨æ„ï¼šæ‰€æœ‰çš„æ’åé»˜è®¤éƒ½æ˜¯å‡åºï¼Œå¦‚æœè¦é™åºåˆ™åœ¨å‘½ä»¤çš„ Z åé¢æ·»åŠ </strong><code>**REV**</code><strong>å³å¯</strong></p>
<blockquote>
<p><strong>è·³è·ƒè¡¨</strong></p>
<p>ä»ç¬¬ 2 å±‚å¼€å§‹ï¼Œ1 èŠ‚ç‚¹æ¯” 51 èŠ‚ç‚¹å°ï¼Œå‘åæ¯”è¾ƒã€‚</p>
<p>21 èŠ‚ç‚¹æ¯” 51 èŠ‚ç‚¹å°ï¼Œç»§ç»­å‘åæ¯”è¾ƒï¼Œåé¢å°±æ˜¯ NULL äº†ï¼Œæ‰€ä»¥ä» 21 èŠ‚ç‚¹å‘ä¸‹åˆ°ç¬¬ 1 å±‚</p>
<p>åœ¨ç¬¬ 1 å±‚ï¼Œ41 èŠ‚ç‚¹æ¯” 51 èŠ‚ç‚¹å°ï¼Œç»§ç»­å‘åï¼Œ61 èŠ‚ç‚¹æ¯” 51 èŠ‚ç‚¹å¤§ï¼Œæ‰€ä»¥ä» 41 å‘ä¸‹</p>
<p>åœ¨ç¬¬ 0 å±‚ï¼Œ51 èŠ‚ç‚¹ä¸ºè¦æŸ¥æ‰¾çš„èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹è¢«æ‰¾åˆ°ï¼Œå…±æŸ¥æ‰¾ 4 æ¬¡ã€‚</p>
<p>ä»æ­¤å¯ä»¥çœ‹å‡ºè·³è·ƒè¡¨æ¯”æœ‰åºé“¾è¡¨æ•ˆç‡è¦é«˜</p>
</blockquote>
<h1 id="3-Redis-å®¢æˆ·ç«¯"><a href="#3-Redis-å®¢æˆ·ç«¯" class="headerlink" title="3.Redis å®¢æˆ·ç«¯"></a>3.Redis å®¢æˆ·ç«¯</h1><h2 id="3-Java-å®¢æˆ·ç«¯"><a href="#3-Java-å®¢æˆ·ç«¯" class="headerlink" title="3.Java å®¢æˆ·ç«¯"></a>3.Java å®¢æˆ·ç«¯</h2><h3 id="3-1-Jedis-å¿«é€Ÿå…¥é—¨"><a href="#3-1-Jedis-å¿«é€Ÿå…¥é—¨" class="headerlink" title="3.1 Jedis å¿«é€Ÿå…¥é—¨"></a>3.1 Jedis å¿«é€Ÿå…¥é—¨</h3><hr>
<blockquote>
<p>è¯¥éƒ¨åˆ†å‚è€ƒï¼š<a href="https://www.oz6.cn/articles/58">https://www.oz6.cn/articles/58</a><br>Jedis çš„å®˜ç½‘åœ°å€ï¼š <a href="https://github.com/redis/jedis%EF%BC%8C%E6%88%91%E4%BB%AC%E5%85%88%E6%9D%A5%E4%B8%AA%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%EF%BC%9A">https://github.com/redis/jedisï¼Œæˆ‘ä»¬å…ˆæ¥ä¸ªå¿«é€Ÿå…¥é—¨ï¼š</a></p>
</blockquote>
<ul>
<li><strong>æ–°å»ºä¸€ä¸ª Maven å·¥ç¨‹å¹¶å¼•å…¥ä»¥ä¸‹ä¾èµ–</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¼•å…¥Jedisä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>redis.clients<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jedis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.2.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--å¼•å…¥å•å…ƒæµ‹è¯•ä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.junit.jupiter<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit-jupiter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.8.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><strong>ç¼–å†™æµ‹è¯•ç±»å¹¶ä¸ Redis å»ºç«‹è¿æ¥</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> Jedis jedis;<br><br><span class="hljs-meta">@BeforeEach</span> <span class="hljs-comment">//è¢«è¯¥æ³¨è§£ä¿®é¥°çš„æ–¹æ³•æ¯æ¬¡æ‰§è¡Œå…¶ä»–æ–¹æ³•å‰è‡ªåŠ¨æ‰§è¡Œ</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">setUp</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// 1. è·å–è¿æ¥</span><br>    jedis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">&quot;192.168.230.88&quot;</span>,<span class="hljs-number">6379</span>);<br>    <span class="hljs-comment">// 2. è®¾ç½®å¯†ç </span><br>    jedis.auth(<span class="hljs-string">&quot;132537&quot;</span>);<br>    <span class="hljs-comment">// 3. é€‰æ‹©åº“ï¼ˆé»˜è®¤æ˜¯ä¸‹æ ‡ä¸º0çš„åº“ï¼‰</span><br>    jedis.select(<span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>ç¼–å†™ä¸€ä¸ªæ“ä½œæ•°æ®çš„æ–¹æ³•ï¼ˆè¿™é‡Œä»¥æ“ä½œ String ç±»å‹ä¸ºä¾‹ï¼‰</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testString</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// 1.å¾€redisä¸­å­˜æ”¾ä¸€æ¡Stringç±»å‹çš„æ•°æ®å¹¶è·å–è¿”å›ç»“æœ</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> jedis.set(<span class="hljs-string">&quot;url&quot;</span>, <span class="hljs-string">&quot;www.oz6.cn&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;result = &quot;</span> + result);<br><br>    <span class="hljs-comment">// 2.ä»redisä¸­è·å–ä¸€æ¡æ•°æ®</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> jedis.get(<span class="hljs-string">&quot;url&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;url = &quot;</span> + url);<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>æœ€åä¸è¦å¿˜è®°ç¼–å†™ä¸€ä¸ªé‡Šæ”¾èµ„æºçš„æ–¹æ³•</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@AfterEach</span> <span class="hljs-comment">//è¢«è¯¥æ³¨è§£ä¿®é¥°çš„æ–¹æ³•ä¼šåœ¨æ¯æ¬¡æ‰§è¡Œå…¶ä»–æ–¹æ³•åæ‰§è¡Œ</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">tearDown</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// 1.é‡Šæ”¾èµ„æº</span><br>    <span class="hljs-keyword">if</span> (jedis != <span class="hljs-literal">null</span>)&#123;<br>        jedis.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="3-2-Jedis-è¿æ¥æ± "><a href="#3-2-Jedis-è¿æ¥æ± " class="headerlink" title="3.2 Jedis è¿æ¥æ± "></a>3.2 Jedis è¿æ¥æ± </h3><hr>
<blockquote>
<p><strong>Jedis æœ¬èº«æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯è¿æ¥ä¼šæœ‰æ€§èƒ½æŸè€—ï¼Œå› æ­¤æˆ‘ä»¬æ¨èå¤§å®¶ä½¿ç”¨ Jedis è¿æ¥æ± ä»£æ›¿ Jedis çš„ç›´è¿æ–¹å¼</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JedisConnectionFactory</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> JedisPool jedisPool;<br><br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-comment">//é…ç½®è¿æ¥æ± </span><br>        <span class="hljs-type">JedisPoolConfig</span> <span class="hljs-variable">jedisPoolConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPoolConfig</span>();<br>        jedisPoolConfig.setMaxTotal(<span class="hljs-number">8</span>);<br>        jedisPoolConfig.setMaxIdle(<span class="hljs-number">8</span>);<br>        jedisPoolConfig.setMinIdle(<span class="hljs-number">0</span>);<br>        jedisPoolConfig.setMaxWaitMillis(<span class="hljs-number">200</span>);<br>        <span class="hljs-comment">//åˆ›å»ºè¿æ¥æ± å¯¹è±¡</span><br>        jedisPool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPool</span>(jedisPoolConfig,<span class="hljs-string">&quot;192.168.230.88&quot;</span>,<span class="hljs-number">6379</span>,<span class="hljs-number">1000</span>,<span class="hljs-string">&quot;132537&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Jedis <span class="hljs-title function_">getJedis</span><span class="hljs-params">()</span>&#123;<br>       <span class="hljs-keyword">return</span> jedisPool.getResource();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="3-3-SpringDataRedis-ä»‹ç»"><a href="#3-3-SpringDataRedis-ä»‹ç»" class="headerlink" title="3.3 SpringDataRedis ä»‹ç»"></a>3.3 SpringDataRedis ä»‹ç»</h3><hr>
<blockquote>
<p><strong>SpringData æ˜¯ Spring ä¸­æ•°æ®æ“ä½œçš„æ¨¡å—ï¼ŒåŒ…å«å¯¹å„ç§æ•°æ®åº“çš„é›†æˆï¼Œå…¶ä¸­å¯¹ Redis çš„é›†æˆæ¨¡å—å°±å«åš</strong><code>**SpringDataRedis**</code></p>
<p><strong>å®˜ç½‘åœ°å€</strong>ï¼š<a href="https://spring.io/projects/spring-data-redis">https://spring.io/projects/spring-data-redis</a></p>
</blockquote>
<ul>
<li>æä¾›äº†å¯¹ä¸åŒ Redis å®¢æˆ·ç«¯çš„æ•´åˆï¼ˆ<code>Lettuce</code> å’Œ <code>Jedis</code>ï¼‰</li>
<li>æä¾›äº† <code>RedisTemplate</code> ç»Ÿä¸€ API æ¥æ“ä½œ Redis</li>
<li>æ”¯æŒ Redis çš„å‘å¸ƒè®¢é˜…æ¨¡å‹</li>
<li>æ”¯æŒ Redis å“¨å…µå’Œ Redis é›†ç¾¤</li>
<li>æ”¯æŒåŸºäº Lettuce çš„å“åº”å¼ç¼–ç¨‹</li>
<li>æ”¯æŒåŸºäº JDKã€JSONã€å­—ç¬¦ä¸²ã€Spring å¯¹è±¡çš„æ•°æ®åºåˆ—åŒ–åŠååºåˆ—åŒ–</li>
<li>æ”¯æŒåŸºäº Redis çš„ JDKCollection å®ç°</li>
</ul>
<blockquote>
<p><strong>SpringDataRedis ä¸­æä¾›äº† RedisTemplate å·¥å…·ç±»ï¼Œå…¶ä¸­å°è£…äº†å„ç§å¯¹ Redis çš„æ“ä½œã€‚å¹¶ä¸”å°†ä¸åŒæ•°æ®ç±»å‹çš„æ“ä½œ API å°è£…åˆ°äº†ä¸åŒçš„ç±»å‹ä¸­ï¼š</strong></p>
</blockquote>
<h3 id="3-4-SpringDataRedis-å¿«é€Ÿå…¥é—¨"><a href="#3-4-SpringDataRedis-å¿«é€Ÿå…¥é—¨" class="headerlink" title="3.4 SpringDataRedis å¿«é€Ÿå…¥é—¨"></a>3.4 SpringDataRedis å¿«é€Ÿå…¥é—¨</h3><hr>
<blockquote>
<p><code>**SpringBoot**</code><strong>å·²ç»æä¾›äº†å¯¹</strong><code>**SpringDataRedis**</code><strong>çš„æ”¯æŒï¼Œä½¿ç”¨éå¸¸ç®€å•</strong></p>
</blockquote>
<ul>
<li><strong>é¦–å…ˆæ–°å»ºä¸€ä¸ª Spring Boot å·¥ç¨‹</strong></li>
<li><strong>ç„¶åå¼•å…¥è¿æ¥æ± ä¾èµ–</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--è¿æ¥æ± ä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.commons<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-pool2<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><strong>ç¼–å†™é…ç½®æ–‡ä»¶</strong><code>**application.yml**</code><strong>ï¼ˆè¿æ¥æ± çš„é…ç½®åœ¨å®é™…å¼€å‘ä¸­æ˜¯æ ¹æ®éœ€æ±‚æ¥çš„ï¼‰</strong></li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">redis:</span><br>    <span class="hljs-attr">host:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.230</span><span class="hljs-number">.88</span> <span class="hljs-comment">#æŒ‡å®šredisæ‰€åœ¨çš„host</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span> <span class="hljs-comment">#æŒ‡å®šredisçš„ç«¯å£</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-number">132537</span> <span class="hljs-comment">#è®¾ç½®rediså¯†ç </span><br>    <span class="hljs-attr">lettuce:</span><br>      <span class="hljs-attr">pool:</span><br>        <span class="hljs-attr">max-active:</span> <span class="hljs-number">8</span> <span class="hljs-comment">#æœ€å¤§è¿æ¥æ•°</span><br>        <span class="hljs-attr">max-idle:</span> <span class="hljs-number">8</span> <span class="hljs-comment">#æœ€å¤§ç©ºé—²æ•°</span><br>        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">0</span> <span class="hljs-comment">#æœ€å°ç©ºé—²æ•°</span><br>        <span class="hljs-attr">max-wait:</span> <span class="hljs-string">100ms</span> <span class="hljs-comment">#è¿æ¥ç­‰å¾…æ—¶é—´</span><br></code></pre></td></tr></table></figure>

<ul>
<li><strong>ç¼–å†™æµ‹è¯•ç±»æ‰§è¡Œæµ‹è¯•æ–¹æ³•</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisDemoApplicationTests</span> &#123;<br><br>	<span class="hljs-meta">@Resource</span><br>	<span class="hljs-keyword">private</span> RedisTemplate redisTemplate;<br><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">testString</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// 1.é€šè¿‡RedisTemplateè·å–æ“ä½œStringç±»å‹çš„ValueOperationså¯¹è±¡</span><br>		<span class="hljs-type">ValueOperations</span> <span class="hljs-variable">ops</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue();<br>		<span class="hljs-comment">// 2.æ’å…¥ä¸€æ¡æ•°æ®</span><br>		ops.set(<span class="hljs-string">&quot;blogName&quot;</span>,<span class="hljs-string">&quot;Vz-Blog&quot;</span>);<br><br>		<span class="hljs-comment">// 3.è·å–æ•°æ®</span><br>		<span class="hljs-type">String</span> <span class="hljs-variable">blogName</span> <span class="hljs-operator">=</span> (String) ops.get(<span class="hljs-string">&quot;blogName&quot;</span>);<br>		System.out.println(<span class="hljs-string">&quot;blogName = &quot;</span> + blogName);<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="3-5-RedisSerializer-é…ç½®"><a href="#3-5-RedisSerializer-é…ç½®" class="headerlink" title="3.5 RedisSerializer é…ç½®"></a>3.5 RedisSerializer é…ç½®</h3><hr>
<blockquote>
<p><strong>RedisTemplate å¯ä»¥æ¥æ”¶ä»»æ„ Object ä½œä¸ºå€¼å†™å…¥ Redisï¼Œåªä¸è¿‡å†™å…¥å‰ä¼šæŠŠ Object åºåˆ—åŒ–ä¸ºå­—èŠ‚å½¢å¼ï¼Œ</strong><code>**é»˜è®¤æ˜¯é‡‡ç”¨JDKåºåˆ—åŒ–**</code>**</p>
</blockquote>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>å¯è¯»æ€§å·®</li>
<li>å†…å­˜å ç”¨è¾ƒå¤§</li>
</ul>
<blockquote>
<p><strong>é‚£ä¹ˆå¦‚ä½•è§£å†³ä»¥ä¸Šçš„é—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ RedisTemplate åºåˆ—åŒ–çš„æ–¹å¼æ¥è§£å†³ã€‚</strong></p>
</blockquote>
<ul>
<li><strong>ç¼–å†™ä¸€ä¸ªé…ç½®ç±»</strong><code>**RedisConfig**</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisConfig</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> RedisTemplate&lt;String,Object&gt; <span class="hljs-title function_">redisTemplate</span><span class="hljs-params">(RedisConnectionFactory factory)</span>&#123;<br>        <span class="hljs-comment">// 1.åˆ›å»ºRedisTemplateå¯¹è±¡</span><br>        RedisTemplate&lt;String ,Object&gt; redisTemplate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisTemplate</span>&lt;&gt;();<br>        <span class="hljs-comment">// 2.è®¾ç½®è¿æ¥å·¥å‚</span><br>        redisTemplate.setConnectionFactory(factory);<br><br>        <span class="hljs-comment">// 3.åˆ›å»ºåºåˆ—åŒ–å¯¹è±¡</span><br>        <span class="hljs-type">StringRedisSerializer</span> <span class="hljs-variable">stringRedisSerializer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>();<br>        <span class="hljs-type">GenericJackson2JsonRedisSerializer</span> <span class="hljs-variable">genericJackson2JsonRedisSerializer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericJackson2JsonRedisSerializer</span>();<br><br>        <span class="hljs-comment">// 4.è®¾ç½®keyå’ŒhashKeyé‡‡ç”¨Stringçš„åºåˆ—åŒ–æ–¹å¼</span><br>        redisTemplate.setKeySerializer(stringRedisSerializer);<br>        redisTemplate.setHashKeySerializer(stringRedisSerializer);<br><br>        <span class="hljs-comment">// 5.è®¾ç½®valueå’ŒhashValueé‡‡ç”¨jsonçš„åºåˆ—åŒ–æ–¹å¼</span><br>        redisTemplate.setValueSerializer(genericJackson2JsonRedisSerializer);<br>        redisTemplate.setHashValueSerializer(genericJackson2JsonRedisSerializer);<br><br>        <span class="hljs-keyword">return</span> redisTemplate;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>æ­¤æ—¶æˆ‘ä»¬å·²ç»å°† RedisTemplate çš„ key è®¾ç½®ä¸º</strong><code>**Stringåºåˆ—åŒ–**</code><strong>ï¼Œvalue è®¾ç½®ä¸º</strong><code>**Jsonåºåˆ—åŒ–**</code><strong>çš„æ–¹å¼ï¼Œå†æ¥æ‰§è¡Œæ–¹æ³•æµ‹è¯•</strong></li>
<li><strong>ç”±äºæˆ‘ä»¬è®¾ç½®çš„ value åºåˆ—åŒ–æ–¹å¼æ˜¯ Json çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥å‘ redis ä¸­æ’å…¥ä¸€ä¸ªå¯¹è±¡</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testSaveUser</span><span class="hljs-params">()</span> &#123;<br>    redisTemplate.opsForValue().set(<span class="hljs-string">&quot;user:100&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;Vz&quot;</span>, <span class="hljs-number">21</span>));<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> (User) redisTemplate.opsForValue().get(<span class="hljs-string">&quot;user:100&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;User = &quot;</span> + user);<br>&#125;<br>å°½ç®¡ Json åºåˆ—åŒ–å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½†æ˜¯ä¾æ—§å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚<br>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸ºäº†åœ¨ååºåˆ—åŒ–æ—¶çŸ¥é“å¯¹è±¡çš„ç±»å‹ï¼ŒJSON åºåˆ—åŒ–å™¨ä¼šå°†ç±»çš„ class ç±»å‹å†™å…¥ json ç»“æœä¸­ï¼Œå­˜å…¥ Redisï¼Œä¼šå¸¦æ¥é¢å¤–çš„å†…å­˜å¼€é”€ã€‚<br>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹æ–‡çš„ `StringRedisTemplate` æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<br></code></pre></td></tr></table></figure>

<h3 id="3-6-StringRedisTemplate"><a href="#3-6-StringRedisTemplate" class="headerlink" title="3.6 StringRedisTemplate"></a>3.6 StringRedisTemplate</h3><hr>
<blockquote>
<p><strong>ä¸ºäº†èŠ‚çœå†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬å¹¶ä¸ä¼šä½¿ç”¨ JSON åºåˆ—åŒ–å™¨æ¥å¤„ç† valueï¼Œè€Œæ˜¯ç»Ÿä¸€ä½¿ç”¨ String åºåˆ—åŒ–å™¨ï¼Œè¦æ±‚åªèƒ½å­˜å‚¨ String ç±»å‹çš„ key å’Œ valueã€‚å½“éœ€è¦å­˜å‚¨ Java å¯¹è±¡æ—¶ï¼Œæ‰‹åŠ¨å®Œæˆå¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</strong></p>
</blockquote>
<blockquote>
<p><strong>Spring é»˜è®¤æä¾›äº†ä¸€ä¸ª StringRedisTemplate ç±»ï¼Œå®ƒçš„ key å’Œ value çš„åºåˆ—åŒ–æ–¹å¼é»˜è®¤å°±æ˜¯ String æ–¹å¼ã€‚çœå»äº†æˆ‘ä»¬è‡ªå®šä¹‰ RedisTemplate çš„è¿‡ç¨‹</strong></p>
</blockquote>
<ul>
<li><strong>æˆ‘ä»¬å¯ä»¥ç›´æ¥ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç±»ä½¿ç”¨ StringRedisTemplate æ¥æ‰§è¡Œä»¥ä¸‹æ–¹æ³•</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisStringTemplateTest</span> &#123;<br><br>	<span class="hljs-meta">@Resource</span><br>	<span class="hljs-keyword">private</span> StringRedisTemplate stringRedisTemplate;<br><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">testSaveUser</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JsonProcessingException &#123;<br>		<span class="hljs-comment">// 1.åˆ›å»ºä¸€ä¸ªJsonåºåˆ—åŒ–å¯¹è±¡</span><br>		<span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">objectMapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();<br>		<span class="hljs-comment">// 2.å°†è¦å­˜å…¥çš„å¯¹è±¡é€šè¿‡Jsonåºåˆ—åŒ–å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span><br>		<span class="hljs-type">String</span> <span class="hljs-variable">userJson1</span> <span class="hljs-operator">=</span> objectMapper.writeValueAsString(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;Vz&quot;</span>, <span class="hljs-number">21</span>));<br>		<span class="hljs-comment">// 3.é€šè¿‡StringRedisTemplateå°†æ•°æ®å­˜å…¥redis</span><br>		stringRedisTemplate.opsForValue().set(<span class="hljs-string">&quot;user:100&quot;</span>,userJson1);<br>		<span class="hljs-comment">// 4.é€šè¿‡keyå–å‡ºvalue</span><br>		<span class="hljs-type">String</span> <span class="hljs-variable">userJson2</span> <span class="hljs-operator">=</span> stringRedisTemplate.opsForValue().get(<span class="hljs-string">&quot;user:100&quot;</span>);<br>		<span class="hljs-comment">// 5.ç”±äºå–å‡ºçš„å€¼æ˜¯Stringç±»å‹çš„Jsonå­—ç¬¦ä¸²ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡Jsonåºåˆ—åŒ–å¯¹è±¡æ¥è½¬æ¢ä¸ºjavaå¯¹è±¡</span><br>		<span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> objectMapper.readValue(userJson2, User.class);<br>		<span class="hljs-comment">// 6.æ‰“å°ç»“æœ</span><br>		System.out.println(<span class="hljs-string">&quot;user = &quot;</span> + user);<br>	&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>æ‰§è¡Œå®Œæ¯•å›åˆ° Redis çš„å›¾å½¢åŒ–å®¢æˆ·ç«¯æŸ¥çœ‹ç»“æœ</strong></li>
</ul>
<hr>
<blockquote>
<p>RedisTemplate çš„ä¸¤ç§åºåˆ—åŒ–å®è·µæ–¹æ¡ˆï¼Œä¸¤ç§æ–¹æ¡ˆå„æœ‰å„çš„ä¼˜ç¼ºç‚¹ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ä½¿ç”¨ã€‚</p>
</blockquote>
<p>æ–¹æ¡ˆä¸€ï¼š</p>
<ol>
<li>è‡ªå®šä¹‰ RedisTemplate</li>
<li>ä¿®æ”¹ RedisTemplate çš„åºåˆ—åŒ–å™¨ä¸º GenericJackson2JsonRedisSerializer</li>
</ol>
<p>æ–¹æ¡ˆäºŒï¼š</p>
<ol>
<li>ä½¿ç”¨ StringRedisTemplate</li>
<li>å†™å…¥ Redis æ—¶ï¼Œæ‰‹åŠ¨æŠŠå¯¹è±¡åºåˆ—åŒ–ä¸º JSON</li>
<li>è¯»å– Redis æ—¶ï¼Œæ‰‹åŠ¨æŠŠè¯»å–åˆ°çš„ JSON ååºåˆ—åŒ–ä¸ºå¯¹è±¡</li>
</ol>
<h1 id="äºŒ-Redis-å®æˆ˜"><a href="#äºŒ-Redis-å®æˆ˜" class="headerlink" title="äºŒ.Redis å®æˆ˜"></a>äºŒ.Redis å®æˆ˜</h1><h1 id="1-ç¼“å­˜"><a href="#1-ç¼“å­˜" class="headerlink" title="1. ç¼“å­˜"></a>1. ç¼“å­˜</h1><h2 id="1-1-ä¸ºä»€ä¹ˆç”¨ç¼“å­˜"><a href="#1-1-ä¸ºä»€ä¹ˆç”¨ç¼“å­˜" class="headerlink" title="1.1 ä¸ºä»€ä¹ˆç”¨ç¼“å­˜"></a>1.1 ä¸ºä»€ä¹ˆç”¨ç¼“å­˜</h2><p><strong>é€Ÿåº¦å¿«ï¼Œå¥½ç”¨</strong></p>
<p>ç¼“å­˜æ•°æ®å­˜å‚¨äºä»£ç ä¸­ï¼Œè€Œä»£ç è¿è¡Œåœ¨å†…å­˜ä¸­ï¼Œ<strong>å†…å­˜çš„è¯»å†™æ€§èƒ½è¿œé«˜äºç£ç›˜</strong> , ç¼“å­˜å¯ä»¥å¤§å¤§é™ä½<strong>ç”¨æˆ·è®¿é—®å¹¶å‘é‡å¸¦æ¥çš„</strong>æœåŠ¡å™¨è¯»å†™å‹åŠ›</p>
<h2 id="1-2-ç¼“å­˜æ¨¡å‹ä¸æ€è·¯"><a href="#1-2-ç¼“å­˜æ¨¡å‹ä¸æ€è·¯" class="headerlink" title="1.2 ç¼“å­˜æ¨¡å‹ä¸æ€è·¯"></a>1.2 ç¼“å­˜æ¨¡å‹ä¸æ€è·¯</h2><p>æ ‡å‡†çš„æ“ä½œæ–¹å¼å°±æ˜¯<strong>æŸ¥è¯¢æ•°æ®åº“ä¹‹å‰å…ˆæŸ¥è¯¢ç¼“å­˜</strong>ï¼Œå¦‚æœç¼“å­˜æ•°æ®å­˜åœ¨ï¼Œåˆ™ç›´æ¥ä»ç¼“å­˜ä¸­è¿”å›ï¼Œå¦‚æœç¼“å­˜æ•°æ®ä¸å­˜åœ¨ï¼Œå†æŸ¥è¯¢æ•°æ®åº“ï¼Œç„¶åå°†æ•°æ®å­˜å…¥ redis</p>
<h2 id="1-3-ç¼“å­˜æ›´æ–°ç­–ç•¥"><a href="#1-3-ç¼“å­˜æ›´æ–°ç­–ç•¥" class="headerlink" title="1.3 ç¼“å­˜æ›´æ–°ç­–ç•¥"></a>1.3 ç¼“å­˜æ›´æ–°ç­–ç•¥</h2><p>ç¼“å­˜æ›´æ–°æ˜¯ redis ä¸ºäº†èŠ‚çº¦å†…å­˜è€Œè®¾è®¡å‡ºæ¥çš„ä¸€ä¸ªä¸œè¥¿ï¼Œä¸»è¦æ˜¯å› ä¸ºå†…å­˜æ•°æ®å®è´µï¼Œå½“æˆ‘ä»¬å‘ redis æ’å…¥å¤ªå¤šæ•°æ®ï¼Œæ­¤æ—¶å°±å¯èƒ½ä¼šå¯¼è‡´ç¼“å­˜ä¸­çš„æ•°æ®è¿‡å¤šï¼Œæ‰€ä»¥ redis ä¼šå¯¹éƒ¨åˆ†æ•°æ®è¿›è¡Œæ›´æ–°ï¼Œæˆ–è€…æŠŠä»–å«ä¸ºæ·˜æ±°æ›´åˆé€‚ã€‚</p>
<ul>
<li><strong>å†…å­˜æ·˜æ±°</strong>ï¼šå½“ redis å†…å­˜è¾¾åˆ°æˆ‘ä»¬è®¾ç½®çš„é˜ˆå€¼ï¼ˆmax-memeryï¼‰æ—¶ï¼Œè‡ªåŠ¨è§¦å‘æ·˜æ±°æœºåˆ¶ã€‚</li>
<li><strong>è¶…æ—¶å‰”é™¤</strong>ï¼šç»™æ•°æ®æ·»åŠ  TTL æ—¶é—´ï¼Œåˆ°æ—¶é—´è‡ªåŠ¨å‰”é™¤ã€‚</li>
<li><strong>ä¸»åŠ¨æ›´æ–°</strong>ï¼šæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è°ƒç”¨æ–¹æ³•æŠŠç¼“å­˜åˆ æ‰ï¼Œ<strong>é€šå¸¸ç”¨äºè§£å†³ç¼“å­˜å’Œæ•°æ®åº“ä¸ä¸€è‡´é—®é¢˜</strong></li>
</ul>
<h3 id="1-3-1-ç¼“å­˜ä¸æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´è§£å†³æ–¹æ¡ˆåŠé€‰æ‹©"><a href="#1-3-1-ç¼“å­˜ä¸æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´è§£å†³æ–¹æ¡ˆåŠé€‰æ‹©" class="headerlink" title="1.3.1 ç¼“å­˜ä¸æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´è§£å†³æ–¹æ¡ˆåŠé€‰æ‹©"></a>1.3.1 ç¼“å­˜ä¸æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´è§£å†³æ–¹æ¡ˆåŠé€‰æ‹©</h3><p><strong>ç¼“å­˜ä¸­çš„æ•°æ®æ˜¯æ¥è‡ªäºæ•°æ®åº“</strong>çš„ï¼Œä½†æ˜¯<strong>æ•°æ®åº“çš„æ•°æ®æ˜¯ä¼šæ”¹å˜</strong>çš„ï¼Œå¦‚æœ<strong>æ•°æ®åº“æ•°æ®æ”¹å˜ï¼Œç¼“å­˜çš„æ•°æ®æ²¡æœ‰æ”¹å˜</strong>ï¼Œå°±ä¼š<strong>å¯¼è‡´ä¸€è‡´æ€§é—®é¢˜</strong>ï¼Œå°±ä¼šå¯¼è‡´ç”¨æˆ·ä½¿ç”¨çš„æ˜¯è¿‡æ—¶çš„æ•°æ®ï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼Œæœ‰å¦‚ä¸‹ä¸‰ç§è§£å†³æ–¹æ¡ˆï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>Cache Aside Pattern âœ”</td>
<td>äººå·¥ç¼–ç æ–¹å¼ï¼šç¼“å­˜è°ƒç”¨è€…åœ¨æ›´æ–°å®Œæ•°æ®åº“åå†å»æ›´æ–°ç¼“å­˜ï¼Œä¹Ÿç§°ä¹‹ä¸º<strong>åŒå†™æ–¹æ¡ˆ</strong></td>
</tr>
<tr>
<td>Read&#x2F;Write Through Pattern</td>
<td>ç”±ç³»ç»Ÿæœ¬èº«å®Œæˆï¼Œæ•°æ®åº“ä¸ç¼“å­˜çš„é—®é¢˜äº¤ç”±ç³»ç»Ÿæœ¬èº«å»å¤„ç†</td>
</tr>
<tr>
<td>Write Behind Caching Pattern</td>
<td>è°ƒç”¨è€…åªæ“ä½œç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹å»å¼‚æ­¥å¤„ç†æ•°æ®åº“ï¼Œå®ç°æœ€ç»ˆä¸€è‡´</td>
</tr>
</tbody></table>
<p>è¿™é‡Œç»¼åˆè€ƒè™‘æˆ‘ä»¬é€‰æ‹©<strong>æ–¹æ¡ˆä¸€ï¼</strong>âœ”</p>
<p>æ“ä½œç¼“å­˜å’Œæ•°æ®åº“æ—¶æœ‰ä¸‰ä¸ªé—®é¢˜éœ€è¦è€ƒè™‘ï¼š</p>
<p>å¦‚æœé‡‡ç”¨ç¬¬ä¸€ä¸ªæ–¹æ¡ˆï¼Œé‚£ä¹ˆå‡è®¾æˆ‘ä»¬æ¯æ¬¡æ“ä½œæ•°æ®åº“åï¼Œéƒ½æ“ä½œç¼“å­˜ï¼Œä½†æ˜¯ä¸­é—´å¦‚æœæ²¡æœ‰äººæŸ¥è¯¢ï¼Œé‚£ä¹ˆè¿™ä¸ªæ›´æ–°åŠ¨ä½œå®é™…ä¸Šåªæœ‰æœ€åä¸€æ¬¡ç”Ÿæ•ˆï¼Œä¸­é—´çš„æ›´æ–°åŠ¨ä½œæ„ä¹‰å¹¶ä¸å¤§ï¼Œæˆ‘ä»¬å¯ä»¥<strong>æŠŠç¼“å­˜åˆ é™¤ï¼Œç­‰å¾…å†æ¬¡æŸ¥è¯¢æ—¶ï¼Œå°†ç¼“å­˜ä¸­çš„æ•°æ®åŠ è½½å‡ºæ¥</strong></p>
<ul>
<li>åˆ é™¤ç¼“å­˜è¿˜æ˜¯æ›´æ–°ç¼“å­˜ï¼Ÿ<ul>
<li>æ›´æ–°ç¼“å­˜ï¼šæ¯æ¬¡æ›´æ–°æ•°æ®åº“éƒ½æ›´æ–°ç¼“å­˜ï¼Œæ— æ•ˆå†™æ“ä½œè¾ƒå¤š</li>
<li>åˆ é™¤ç¼“å­˜ï¼šæ›´æ–°æ•°æ®åº“æ—¶è®©ç¼“å­˜å¤±æ•ˆï¼ŒæŸ¥è¯¢æ—¶å†æ›´æ–°ç¼“å­˜ âœ”</li>
</ul>
</li>
<li>å¦‚ä½•ä¿è¯ç¼“å­˜ä¸æ•°æ®åº“çš„æ“ä½œçš„åŒæ—¶æˆåŠŸæˆ–å¤±è´¥ï¼Ÿ<ul>
<li>å•ä½“ç³»ç»Ÿï¼Œå°†ç¼“å­˜ä¸æ•°æ®åº“æ“ä½œæ”¾åœ¨ä¸€ä¸ªäº‹åŠ¡</li>
<li>åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œåˆ©ç”¨ TCC ç­‰åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆ</li>
</ul>
</li>
</ul>
<p>åº”è¯¥å…·ä½“æ“ä½œç¼“å­˜è¿˜æ˜¯æ“ä½œæ•°æ®åº“ï¼Œæˆ‘ä»¬åº”å½“æ˜¯<strong>å…ˆæ“ä½œæ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜</strong>ï¼ŒåŸå› åœ¨äºï¼Œå¦‚æœä½ é€‰æ‹©ç¬¬ä¸€ç§æ–¹æ¡ˆï¼Œåœ¨ä¸¤ä¸ªçº¿ç¨‹å¹¶å‘æ¥è®¿é—®æ—¶ï¼Œå‡è®¾çº¿ç¨‹ 1 å…ˆæ¥ï¼Œä»–å…ˆæŠŠç¼“å­˜åˆ äº†ï¼Œæ­¤æ—¶çº¿ç¨‹ 2 è¿‡æ¥ï¼Œä»–æŸ¥è¯¢ç¼“å­˜æ•°æ®å¹¶ä¸å­˜åœ¨ï¼Œæ­¤æ—¶ä»–å†™å…¥ç¼“å­˜ï¼Œå½“ä»–å†™å…¥ç¼“å­˜åï¼Œçº¿ç¨‹ 1 å†æ‰§è¡Œæ›´æ–°åŠ¨ä½œæ—¶ï¼Œå®é™…ä¸Šå†™å…¥çš„å°±æ˜¯æ—§çš„æ•°æ®ï¼Œæ–°çš„æ•°æ®è¢«æ—§æ•°æ®è¦†ç›–äº†ã€‚</p>
<ul>
<li>å…ˆæ“ä½œç¼“å­˜è¿˜æ˜¯å…ˆæ“ä½œæ•°æ®åº“ï¼Ÿ<ul>
<li>å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ“ä½œæ•°æ®åº“</li>
<li>å…ˆæ“ä½œæ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ âœ”</li>
</ul>
</li>
</ul>
<h2 id="1-4-ç¼“å­˜ç©¿é€"><a href="#1-4-ç¼“å­˜ç©¿é€" class="headerlink" title="1.4 ç¼“å­˜ç©¿é€"></a>1.4 ç¼“å­˜ç©¿é€</h2><p>ç¼“å­˜ç©¿é€ ï¼šç¼“å­˜ç©¿é€æ˜¯æŒ‡å®¢æˆ·ç«¯è¯·æ±‚çš„<strong>æ•°æ®åœ¨ç¼“å­˜ä¸­å’Œæ•°æ®åº“ä¸­éƒ½ä¸å­˜åœ¨</strong>ï¼Œè¿™æ ·ç¼“å­˜æ°¸è¿œä¸ä¼šç”Ÿæ•ˆï¼Œè¿™äº›è¯·æ±‚éƒ½ä¼šæ‰“åˆ°æ•°æ®åº“ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>ç¼“å­˜ç©ºå¯¹è±¡<ul>
<li>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œç»´æŠ¤æ–¹ä¾¿</li>
<li>ç¼ºç‚¹ï¼š<ul>
<li>é¢å¤–çš„å†…å­˜æ¶ˆè€—</li>
<li>å¯èƒ½é€ æˆçŸ­æœŸçš„ä¸ä¸€è‡´</li>
</ul>
</li>
</ul>
</li>
<li>å¸ƒéš†è¿‡æ»¤<ul>
<li>ä¼˜ç‚¹ï¼šå†…å­˜å ç”¨è¾ƒå°‘ï¼Œæ²¡æœ‰å¤šä½™ key</li>
<li>ç¼ºç‚¹ï¼š<ul>
<li>å®ç°å¤æ‚</li>
<li>å­˜åœ¨è¯¯åˆ¤å¯èƒ½ï¼ˆå¸ƒéš†è¿‡æ»¤å™¨èµ°çš„æ˜¯å“ˆå¸Œæ€æƒ³ï¼Œåªè¦å“ˆå¸Œæ€æƒ³ï¼Œå°±å¯èƒ½å­˜åœ¨å“ˆå¸Œå†²çªï¼‰</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>å°æ€»ç»“ï¼š</strong></p>
<p><strong>ç¼“å­˜ç©¿é€äº§ç”Ÿçš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>ç”¨æˆ·è¯·æ±‚çš„æ•°æ®åœ¨ç¼“å­˜ä¸­å’Œæ•°æ®åº“ä¸­éƒ½ä¸å­˜åœ¨ï¼Œä¸æ–­å‘èµ·è¿™æ ·çš„è¯·æ±‚ï¼Œç»™æ•°æ®åº“å¸¦æ¥å·¨å¤§å‹åŠ›</li>
</ul>
<p><strong>ç¼“å­˜ç©¿é€çš„è§£å†³æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ</strong></p>
<ul>
<li>ç¼“å­˜ null å€¼</li>
<li>å¸ƒéš†è¿‡æ»¤</li>
<li>å¢å¼º id çš„å¤æ‚åº¦ï¼Œé¿å…è¢«çŒœæµ‹ id è§„å¾‹</li>
<li>åšå¥½æ•°æ®çš„åŸºç¡€æ ¼å¼æ ¡éªŒ</li>
<li>åŠ å¼ºç”¨æˆ·æƒé™æ ¡éªŒ</li>
<li>åšå¥½çƒ­ç‚¹å‚æ•°çš„é™æµ</li>
<li>è¿›è¡Œå®æ—¶ç›‘æ§ï¼šå½“å‘ç° Redis çš„å‘½ä¸­ç‡å¼€å§‹æ€¥é€Ÿé™ä½ï¼Œéœ€è¦æ’æŸ¥è®¿é—®å¯¹è±¡å’Œè®¿é—®çš„æ•°æ®ï¼Œå’Œè¿ç»´äººå‘˜é…åˆï¼Œå¯ä»¥è®¾ç½®é»‘åå•é™åˆ¶æœåŠ¡</li>
<li>è®¾ç½®å¯è®¿é—®çš„åå•ï¼ˆç™½åå•ï¼‰ï¼šä½¿ç”¨ bitmaps ç±»å‹å®šä¹‰ä¸€ä¸ªå¯ä»¥è®¿é—®çš„åå•ï¼Œåå• id ä½œä¸º bitmaps çš„åç§»é‡ï¼Œæ¯æ¬¡è®¿é—®å’Œ bitmap é‡Œé¢çš„ id è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœè®¿é—® id ä¸åœ¨ bitmaps é‡Œé¢ï¼Œè¿›è¡Œæ‹¦æˆªï¼Œä¸å…è®¸è®¿é—®ã€‚</li>
</ul>
<h2 id="1-5-ç¼“å­˜å‡»ç©¿"><a href="#1-5-ç¼“å­˜å‡»ç©¿" class="headerlink" title="1.5 ç¼“å­˜å‡»ç©¿"></a>1.5 ç¼“å­˜å‡»ç©¿</h2><p>ç¼“å­˜å‡»ç©¿é—®é¢˜ä¹Ÿå«<strong>çƒ­ç‚¹ Key é—®é¢˜</strong>ï¼Œå°±æ˜¯<strong>ä¸€ä¸ª</strong>è¢«é«˜å¹¶å‘è®¿é—®å¹¶ä¸”ç¼“å­˜é‡å»ºä¸šåŠ¡è¾ƒå¤æ‚çš„ <strong>key çªç„¶å¤±æ•ˆäº†</strong>ï¼Œæ— æ•°çš„è¯·æ±‚è®¿é—®ä¼šåœ¨ç¬é—´ç»™æ•°æ®åº“å¸¦æ¥å·¨å¤§çš„å†²å‡»ã€‚</p>
<p>å¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š</p>
<ul>
<li><strong>é¢„å…ˆè®¾ç½®çƒ­é—¨æ•°æ®ï¼š</strong>æŠŠä¸€äº›çƒ­é—¨æ•°æ®æå‰å­˜å…¥åˆ° redis é‡Œé¢ï¼ŒåŠ å¤§è¿™äº›çƒ­é—¨æ•°æ® key çš„æ—¶é•¿</li>
<li><strong>äº’æ–¥é”</strong></li>
<li><strong>é€»è¾‘è¿‡æœŸ</strong></li>
</ul>
<p>é€»è¾‘åˆ†æï¼šå½“å¤šä¸ªçº¿ç¨‹è¿‡æ¥æŸ¥è¯¢ç¼“å­˜ï¼Œå‘ç°éƒ½æ²¡æœ‰å‘½ä¸­ï¼Œäºæ˜¯ä¹éƒ½å»æŸ¥æ•°æ®åº“ï¼Œç„¶åæ•°æ®åº“å°±å‹åŠ›å±±å¤§ï¼Œç›´æ¥çˆ†ç‚¸ã€‚</p>
<h3 id="1-5-1-äº’æ–¥é”è§£å†³ç¼“å­˜å‡»ç©¿"><a href="#1-5-1-äº’æ–¥é”è§£å†³ç¼“å­˜å‡»ç©¿" class="headerlink" title="1.5.1 äº’æ–¥é”è§£å†³ç¼“å­˜å‡»ç©¿"></a>1.5.1 äº’æ–¥é”è§£å†³ç¼“å­˜å‡»ç©¿</h3><p>å¯ä»¥åˆ©ç”¨é”æ¥é˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶å»æŸ¥è¯¢æ•°æ®åº“ï¼Œå†™ç¼“å­˜ï¼Œ<strong>åªæœ‰æ‹¿åˆ°äº’æ–¥é”çš„çº¿ç¨‹æ‰èƒ½å»æŸ¥è¯¢æ•°æ®åº“å†™ç¼“å­˜æ“ä½œ</strong>ï¼Œå…¶ä»–çº¿ç¨‹æ‹¿ä¸åˆ°äº’æ–¥é”å°±ä¼‘çœ é‡è¯•ï¼Œç­‰ç¼“å­˜ä¸­å†™å…¥äº†ä¹‹åï¼Œè‡ªç„¶å°±èƒ½æ‹¿åˆ°æ•°æ®ã€‚</p>
<p>åŠ é”ä¼šå½±å“æŸ¥è¯¢çš„æ€§èƒ½ï¼Œå› ä¸ºæ­¤æ—¶ä¼šè®©æŸ¥è¯¢çš„æ€§èƒ½ä»å¹¶è¡Œå˜æˆäº†ä¸²è¡Œï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ tryLock æ–¹æ³• + double check æ¥è§£å†³è¿™æ ·çš„é—®é¢˜ã€‚</p>
<p>è¿™é‡Œçš„äº’æ–¥é”<strong>é€šè¿‡ setnx çš„ç‰¹æ€§å¯ä»¥å®ç°</strong>ï¼Œsetnx åªæœ‰åœ¨ä¸å­˜åœ¨æ•°æ®æ—¶æ‰èƒ½æ·»åŠ ï¼Œæœ‰æ•°æ®æ—¶æ·»åŠ å¤±è´¥ã€‚</p>
<h3 id="1-5-2-é€»è¾‘è¿‡æœŸè§£å†³ç¼“å­˜å‡»ç©¿"><a href="#1-5-2-é€»è¾‘è¿‡æœŸè§£å†³ç¼“å­˜å‡»ç©¿" class="headerlink" title="1.5.2 é€»è¾‘è¿‡æœŸè§£å†³ç¼“å­˜å‡»ç©¿"></a>1.5.2 é€»è¾‘è¿‡æœŸè§£å†³ç¼“å­˜å‡»ç©¿</h3><p>ä¹‹æ‰€ä»¥ä¼šå‘ç”Ÿç¼“å­˜å‡»ç©¿ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬è®¾ç½®çš„ key æœ‰è¿‡æœŸæ—¶é—´ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä¸ç»™ key è®¾ç½®è¿‡æœŸæ—¶é—´å•Šï¼Œé‚£è¿™å°±æœ‰äººä¼šé—®ï¼Œè¿™ä¸æ˜¯ä¼šä¸€ç›´å ç”¨å†…å­˜å—ï¼Ÿï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡‡ç”¨é€»è¾‘è¿‡æœŸæ—¶é—´ï¼Œ<strong>æŠŠè¿‡æœŸæ—¶é—´å†™å…¥ value ä¸­</strong>ï¼Œç”¨ä»£ç é€»è¾‘æ¥åˆ¤æ–­è¯¥ key æ˜¯å¦è¿‡æœŸã€‚</p>
<p>è¿™ç§æ–¹æ¡ˆå·§å¦™åœ¨äºï¼Œ<strong>å¼‚æ­¥çš„æ„å»ºç¼“å­˜</strong>ï¼Œç¼ºç‚¹åœ¨äºåœ¨æ„å»ºå®Œç¼“å­˜ä¹‹å‰ï¼Œè¿”å›çš„éƒ½æ˜¯è„æ•°æ®ã€‚</p>
<h3 id="1-5-3-ä¸¤ç§æ–¹æ¡ˆçš„å¯¹æ¯”"><a href="#1-5-3-ä¸¤ç§æ–¹æ¡ˆçš„å¯¹æ¯”" class="headerlink" title="1.5.3 ä¸¤ç§æ–¹æ¡ˆçš„å¯¹æ¯”"></a>1.5.3 ä¸¤ç§æ–¹æ¡ˆçš„å¯¹æ¯”</h3><p><strong>äº’æ–¥é”æ–¹æ¡ˆï¼š</strong>ç”±äºä¿è¯äº†äº’æ–¥æ€§ï¼Œæ‰€ä»¥æ•°æ®ä¸€è‡´ï¼Œä¸”å®ç°ç®€å•ï¼Œå› ä¸ºä»…ä»…åªéœ€è¦åŠ ä¸€æŠŠé”è€Œå·²ï¼Œä¹Ÿæ²¡å…¶ä»–çš„äº‹æƒ…éœ€è¦æ“å¿ƒï¼Œæ‰€ä»¥æ²¡æœ‰é¢å¤–çš„å†…å­˜æ¶ˆè€—ï¼Œç¼ºç‚¹åœ¨äºæœ‰é”å°±æœ‰æ­»é”é—®é¢˜çš„å‘ç”Ÿï¼Œä¸”åªèƒ½ä¸²è¡Œæ‰§è¡Œæ€§èƒ½è‚¯å®šå—åˆ°å½±å“</p>
<p><strong>é€»è¾‘è¿‡æœŸæ–¹æ¡ˆï¼š</strong> çº¿ç¨‹è¯»å–è¿‡ç¨‹ä¸­ä¸éœ€è¦ç­‰å¾…ï¼Œæ€§èƒ½å¥½ï¼Œæœ‰ä¸€ä¸ªé¢å¤–çš„çº¿ç¨‹æŒæœ‰é”å»è¿›è¡Œé‡æ„æ•°æ®ï¼Œä½†æ˜¯åœ¨é‡æ„æ•°æ®å®Œæˆå‰ï¼Œå…¶ä»–çš„çº¿ç¨‹åªèƒ½è¿”å›ä¹‹å‰çš„æ•°æ®ï¼Œä¸”å®ç°èµ·æ¥éº»çƒ¦</p>
<h2 id="1-6-ç¼“å­˜é›ªå´©"><a href="#1-6-ç¼“å­˜é›ªå´©" class="headerlink" title="1.6 ç¼“å­˜é›ªå´©"></a>1.6 ç¼“å­˜é›ªå´©</h2><p>ç¼“å­˜é›ªå´©æ˜¯æŒ‡åœ¨åŒä¸€æ—¶æ®µ<strong>å¤§é‡çš„ç¼“å­˜ key åŒæ—¶å¤±æ•ˆ</strong>æˆ–è€… Redis æœåŠ¡å®•æœºï¼Œå¯¼è‡´å¤§é‡è¯·æ±‚åˆ°è¾¾æ•°æ®åº“ï¼Œå¸¦æ¥å·¨å¤§å‹åŠ›ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>ç»™ä¸åŒçš„ Key çš„ TTL æ·»åŠ éšæœºå€¼</li>
<li>åˆ©ç”¨ Redis é›†ç¾¤æé«˜æœåŠ¡çš„å¯ç”¨æ€§</li>
<li>ç»™ç¼“å­˜ä¸šåŠ¡æ·»åŠ é™çº§é™æµç­–ç•¥</li>
<li>ç»™ä¸šåŠ¡æ·»åŠ å¤šçº§ç¼“å­˜ï¼šnginx ç¼“å­˜ + redis ç¼“å­˜ + å…¶ä»–ç¼“å­˜ï¼ˆehcache ç­‰ï¼‰</li>
</ul>
<h1 id="2-åˆ†å¸ƒå¼é”"><a href="#2-åˆ†å¸ƒå¼é”" class="headerlink" title="2. åˆ†å¸ƒå¼é”"></a>2. åˆ†å¸ƒå¼é”</h1><h2 id="2-1-åŸºæœ¬åŸç†å’Œå®ç°æ–¹å¼å¯¹æ¯”"><a href="#2-1-åŸºæœ¬åŸç†å’Œå®ç°æ–¹å¼å¯¹æ¯”" class="headerlink" title="2.1 åŸºæœ¬åŸç†å’Œå®ç°æ–¹å¼å¯¹æ¯”"></a>2.1 åŸºæœ¬åŸç†å’Œå®ç°æ–¹å¼å¯¹æ¯”</h2><p>åˆ†å¸ƒå¼é”ï¼šæ»¡è¶³åˆ†å¸ƒå¼ç³»ç»Ÿæˆ–é›†ç¾¤æ¨¡å¼ä¸‹<strong>å¤šè¿›ç¨‹å¯è§</strong>å¹¶ä¸”äº’æ–¥çš„é”ã€‚</p>
<p>åˆ†å¸ƒå¼é”å¿…é¡»æ»¡è¶³çš„æ¡ä»¶ï¼š</p>
<ul>
<li>å¯è§æ€§ï¼š<strong>å¤šä¸ªçº¿ç¨‹éƒ½èƒ½çœ‹åˆ°ç›¸åŒçš„ç»“æœï¼Œ</strong>æ³¨æ„ï¼šè¿™ä¸ªåœ°æ–¹è¯´çš„å¯è§æ€§å¹¶ä¸æ˜¯å¹¶å‘ç¼–ç¨‹ä¸­æŒ‡çš„å†…å­˜å¯è§æ€§ï¼Œåªæ˜¯è¯´å¤šä¸ªè¿›ç¨‹ä¹‹é—´éƒ½èƒ½æ„ŸçŸ¥åˆ°å˜åŒ–çš„æ„æ€</li>
<li><strong>äº’æ–¥ï¼šäº’æ–¥æ˜¯åˆ†å¸ƒå¼é”çš„æœ€åŸºæœ¬çš„æ¡ä»¶ï¼Œä½¿å¾—ç¨‹åºä¸²è¡Œæ‰§è¡Œ</strong></li>
<li>é«˜å¯ç”¨ï¼šç¨‹åºä¸æ˜“å´©æºƒï¼Œæ—¶æ—¶åˆ»åˆ»éƒ½ä¿è¯è¾ƒé«˜çš„å¯ç”¨æ€§</li>
<li>é«˜æ€§èƒ½ï¼šç”±äºåŠ é”æœ¬èº«å°±è®©æ€§èƒ½é™ä½ï¼Œæ‰€æœ‰å¯¹äºåˆ†å¸ƒå¼é”æœ¬èº«éœ€è¦ä»–å°±è¾ƒé«˜çš„åŠ é”æ€§èƒ½å’Œé‡Šæ”¾é”æ€§èƒ½</li>
<li>å®‰å…¨æ€§ï¼šå®‰å…¨ä¹Ÿæ˜¯ç¨‹åºä¸­å¿…ä¸å¯å°‘çš„ä¸€ç¯</li>
</ul>
<h2 id="2-2-Redis-å®ç°åˆ†å¸ƒå¼é”"><a href="#2-2-Redis-å®ç°åˆ†å¸ƒå¼é”" class="headerlink" title="2.2 Redis å®ç°åˆ†å¸ƒå¼é”"></a>2.2 Redis å®ç°åˆ†å¸ƒå¼é”</h2><p>å®ç°åˆ†å¸ƒå¼é”æ—¶éœ€è¦å®ç°çš„ä¸¤ä¸ªåŸºæœ¬æ–¹æ³•ï¼š</p>
<ul>
<li>è·å–é”ï¼š<ul>
<li>äº’æ–¥ï¼šç¡®ä¿åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è·å–é”</li>
<li>éé˜»å¡ï¼šå°è¯•ä¸€æ¬¡ï¼ŒæˆåŠŸè¿”å› trueï¼Œå¤±è´¥è¿”å› false</li>
</ul>
</li>
<li>é‡Šæ”¾é”ï¼š<ul>
<li>æ‰‹åŠ¨é‡Šæ”¾ï¼ˆdel keyï¼‰</li>
<li><strong>è¶…æ—¶é‡Šæ”¾ï¼šè·å–é”æ—¶æ·»åŠ ä¸€ä¸ªè¶…æ—¶æ—¶é—´</strong></li>
</ul>
</li>
</ul>
<h3 id="2-2-1-æ ¸å¿ƒæ€è·¯"><a href="#2-2-1-æ ¸å¿ƒæ€è·¯" class="headerlink" title="2.2.1 æ ¸å¿ƒæ€è·¯"></a>2.2.1 æ ¸å¿ƒæ€è·¯</h3><p>åˆ©ç”¨ setnx çš„ç‰¹æ€§ï¼šåªæœ‰å½“ key ä¸å­˜åœ¨æ—¶æ‰å¯ä»¥è®¾ç½®æˆåŠŸï¼Œæ¥å®ç°åˆ†å¸ƒå¼é”çš„äº’æ–¥æ€§ï¼Œé‡Šæ”¾é”å³æŠŠè¿™ä¸ª key åˆ é™¤å³å¯ã€‚</p>
<h3 id="2-2-2-å®ç°åˆ†å¸ƒå¼é”ç‰ˆæœ¬ä¸€"><a href="#2-2-2-å®ç°åˆ†å¸ƒå¼é”ç‰ˆæœ¬ä¸€" class="headerlink" title="2.2.2 å®ç°åˆ†å¸ƒå¼é”ç‰ˆæœ¬ä¸€"></a>2.2.2 å®ç°åˆ†å¸ƒå¼é”ç‰ˆæœ¬ä¸€</h3><p>Ilock æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ILock</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å°è¯•è·å–é”</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> timeoutSec é”æŒæœ‰çš„è¶…æ—¶æ—¶é—´ï¼Œè¿‡æœŸåè‡ªåŠ¨é‡Šæ”¾</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> trueä»£è¡¨è·å–é”æˆåŠŸ; falseä»£è¡¨è·å–é”å¤±è´¥</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">(<span class="hljs-type">long</span> timeoutSec)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é‡Šæ”¾é”</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlock</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å®ç°ç±» <strong>SimpleRedisLock</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String KEY_PREFIX=<span class="hljs-string">&quot;lock:&quot;</span><br><span class="hljs-comment">//è·å–é”é€»è¾‘</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">(<span class="hljs-type">long</span> timeoutSec)</span> &#123;<br>    <span class="hljs-comment">// è·å–çº¿ç¨‹æ ‡ç¤º</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">threadId</span> <span class="hljs-operator">=</span> Thread.currentThread().getId()<br>    <span class="hljs-comment">// è·å–é”</span><br>    <span class="hljs-type">Boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> stringRedisTemplate.opsForValue()<br>            .setIfAbsent(KEY_PREFIX + name, threadId + <span class="hljs-string">&quot;&quot;</span>, timeoutSec, TimeUnit.SECONDS);<br>    <span class="hljs-keyword">return</span> Boolean.TRUE.equals(success);<br>&#125;<br><br><span class="hljs-comment">//é‡Šæ”¾é”é€»è¾‘</span><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlock</span><span class="hljs-params">()</span> &#123;    <br>     <span class="hljs-comment">//é€šè¿‡delåˆ é™¤é”    </span><br>     stringRedisTemplate.delete(KEY_PREFIX + name);<br> &#125;<br></code></pre></td></tr></table></figure>

<h3 id="2-2-3-å®ç°åˆ†å¸ƒå¼é”ç‰ˆæœ¬äºŒ"><a href="#2-2-3-å®ç°åˆ†å¸ƒå¼é”ç‰ˆæœ¬äºŒ" class="headerlink" title="2.2.3 å®ç°åˆ†å¸ƒå¼é”ç‰ˆæœ¬äºŒ"></a>2.2.3 å®ç°åˆ†å¸ƒå¼é”ç‰ˆæœ¬äºŒ</h3><p>ç‰ˆæœ¬ä¸€é¢ä¸´çš„é—®é¢˜ï¼šå› ä¸º<strong>çº¿ç¨‹å¯èƒ½é˜»å¡å¯¼è‡´é”è¶…æ—¶è‡ªåŠ¨é‡Šæ”¾</strong>ï¼Œåœ¨é‡Šæ”¾é”æ—¶æœ‰å¯èƒ½<strong>é‡Šæ”¾çš„æ˜¯åˆ«äººçš„é”</strong></p>
<p>è§£å†³æ–¹æ¡ˆï¼šåœ¨é‡Šæ”¾é”çš„æ—¶å€™å…ˆåˆ¤æ–­è¯¥é”æ˜¯ä¸æ˜¯è‡ªå·±çš„é”ï¼Œæ˜¯è‡ªå·±çš„é”æ‰é‡Šæ”¾ï¼Œä¸æ˜¯è‡ªå·±çš„é”ä¸é‡Šæ”¾ã€‚</p>
<p>æ ¸å¿ƒé€»è¾‘ï¼šåœ¨å­˜å…¥é”æ—¶ï¼Œ<strong>æ”¾å…¥è‡ªå·±çº¿ç¨‹çš„æ ‡è¯†ï¼ˆUUIDï¼‰</strong>ï¼Œåœ¨åˆ é™¤é”æ—¶ï¼Œ<strong>åˆ¤æ–­å½“å‰è¿™æŠŠé”çš„æ ‡è¯†æ˜¯ä¸æ˜¯è‡ªå·±å­˜å…¥çš„</strong>ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿›è¡Œåˆ é™¤ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ä¸è¿›è¡Œåˆ é™¤ã€‚</p>
<p>å…·ä½“ä»£ç ä¿®æ”¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//åœ¨valueä¸Šæ‹¼æ¥UUIDä½œä¸ºå”¯ä¸€æ ‡è¯†</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ID_PREFIX</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString(<span class="hljs-literal">true</span>) + <span class="hljs-string">&quot;-&quot;</span>;<br><span class="hljs-comment">//åŠ é”é€»è¾‘</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">(<span class="hljs-type">long</span> timeoutSec)</span> &#123;<br>   <span class="hljs-comment">// è·å–çº¿ç¨‹æ ‡ç¤º</span><br>   <span class="hljs-type">String</span> <span class="hljs-variable">threadId</span> <span class="hljs-operator">=</span> ID_PREFIX + Thread.currentThread().getId();<br>   <span class="hljs-comment">// è·å–é”</span><br>   <span class="hljs-type">Boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> stringRedisTemplate.opsForValue()<br>                .setIfAbsent(KEY_PREFIX + name, threadId, timeoutSec, TimeUnit.SECONDS);<br>   <span class="hljs-keyword">return</span> Boolean.TRUE.equals(success);<br>&#125;<br><br><span class="hljs-comment">//é‡Šæ”¾é”é€»è¾‘</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlock</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// è·å–çº¿ç¨‹æ ‡ç¤º</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">threadId</span> <span class="hljs-operator">=</span> ID_PREFIX + Thread.currentThread().getId();<br>    <span class="hljs-comment">// è·å–é”ä¸­çš„æ ‡ç¤º</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> stringRedisTemplate.opsForValue().get(KEY_PREFIX + name);<br>    <span class="hljs-comment">// åˆ¤æ–­æ ‡ç¤ºæ˜¯å¦ä¸€è‡´</span><br>    <span class="hljs-keyword">if</span>(threadId.equals(id)) &#123;<br>        <span class="hljs-comment">// é‡Šæ”¾é”</span><br>        stringRedisTemplate.delete(KEY_PREFIX + name);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>æœ‰å…³ä»£ç å®æ“è¯´æ˜ï¼š</strong></p>
<p>åœ¨æˆ‘ä»¬ä¿®æ”¹å®Œæ­¤å¤„ä»£ç åï¼Œæˆ‘ä»¬é‡å¯å·¥ç¨‹ï¼Œç„¶åå¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”åï¼Œæ‰‹åŠ¨é‡Šæ”¾é”ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹ æ­¤æ—¶è¿›å…¥åˆ°é”å†…éƒ¨ï¼Œå†æ”¾è¡Œç¬¬ä¸€ä¸ªçº¿ç¨‹ï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªçº¿ç¨‹ç”±äºé”çš„ value å€¼å¹¶éæ˜¯è‡ªå·±ï¼Œæ‰€ä»¥ä¸èƒ½é‡Šæ”¾é”ï¼Œä¹Ÿå°±æ— æ³•åˆ é™¤åˆ«äººçš„é”ï¼Œæ­¤æ—¶ç¬¬äºŒä¸ªçº¿ç¨‹èƒ½å¤Ÿæ­£ç¡®é‡Šæ”¾é”ï¼Œé€šè¿‡è¿™ä¸ªæ¡ˆä¾‹åˆæ­¥è¯´æ˜æˆ‘ä»¬è§£å†³äº†é”è¯¯åˆ çš„é—®é¢˜ã€‚</p>
<h3 id="2-2-4-å®ç°åˆ†å¸ƒå¼é”ç‰ˆæœ¬ä¸‰"><a href="#2-2-4-å®ç°åˆ†å¸ƒå¼é”ç‰ˆæœ¬ä¸‰" class="headerlink" title="2.2.4 å®ç°åˆ†å¸ƒå¼é”ç‰ˆæœ¬ä¸‰"></a>2.2.4 å®ç°åˆ†å¸ƒå¼é”ç‰ˆæœ¬ä¸‰</h3><p>è€ƒè™‘æ›´åŠ æç«¯çš„æƒ…å†µï¼šåœ¨åˆ é™¤é”çš„æ—¶å€™ï¼Œå·²ç»åˆ¤æ–­æˆåŠŸå”¯ä¸€æ ‡è¯†ä¸€è‡´å‡†å¤‡é‡Šæ”¾é”ï¼Œåœ¨è¿™ä¹‹é—´è¿›è¡Œäº†é˜»å¡ï¼ˆJVM Full GCï¼‰ï¼Œé‚£ä¹ˆä»ç„¶ä¼šå¯¼è‡´è¯¯åˆ çš„æƒ…å†µã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šè®©<strong>åˆ¤æ–­æ ‡å¿—å’Œé‡Šæ”¾é”ä¸¤ä¸ªåŠ¨ä½œå…·æœ‰åŸå­æ€§</strong>ï¼Œä¿è¯ä¸€èµ·è¿›è¡Œä¸­é—´ä¸èƒ½åœã€‚</p>
<p>åˆ©ç”¨ lua è„šæœ¬æ¥è§£å†³å¤šæ¡å‘½ä»¤çš„åŸå­æ€§é—®é¢˜ï¼šè¿™é‡Œä¸åšè®¨è®ºï¼Œæˆ‘ä¸ä¼š</p>
<p><strong>unlock.lua</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java">lua<br>-- æ¯”è¾ƒçº¿ç¨‹æ ‡ç¤ºä¸é”ä¸­çš„æ ‡ç¤ºæ˜¯å¦ä¸€è‡´<br><span class="hljs-keyword">if</span>(redis.call(<span class="hljs-string">&#x27;get&#x27;</span>, KEYS[<span class="hljs-number">1</span>]) ==  ARGV[<span class="hljs-number">1</span>]) then<br>    -- é‡Šæ”¾é” del key<br>    <span class="hljs-keyword">return</span> redis.call(<span class="hljs-string">&#x27;del&#x27;</span>, KEYS[<span class="hljs-number">1</span>])<br>end<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> DefaultRedisScript&lt;Long&gt; UNLOCK_SCRIPT;<br>    <span class="hljs-keyword">static</span> &#123;<br>        UNLOCK_SCRIPT = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultRedisScript</span>&lt;&gt;();<br>        UNLOCK_SCRIPT.setLocation(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathResource</span>(<span class="hljs-string">&quot;unlock.lua&quot;</span>));<br>        UNLOCK_SCRIPT.setResultType(Long.class);<br>    &#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlock</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// è°ƒç”¨luaè„šæœ¬</span><br>    stringRedisTemplate.execute(<br>            UNLOCK_SCRIPT,<br>            Collections.singletonList(KEY_PREFIX + name),<br>            ID_PREFIX + Thread.currentThread().getId());<br>&#125;<br><span class="hljs-comment">//ç»è¿‡ä»¥ä¸Šä»£ç æ”¹é€ åï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿå®ç° æ‹¿é”æ¯”é”åˆ é”çš„åŸå­æ€§åŠ¨ä½œäº†~</span><br></code></pre></td></tr></table></figure>

<h3 id="2-2-5-å°æ€»ç»“"><a href="#2-2-5-å°æ€»ç»“" class="headerlink" title="2.2.5 å°æ€»ç»“"></a>2.2.5 å°æ€»ç»“</h3><p>åŸºäº Redis çš„åˆ†å¸ƒå¼é”å®ç°æ€è·¯ï¼š</p>
<ul>
<li>åˆ©ç”¨ set nx ex è·å–é”ï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œä¿å­˜çº¿ç¨‹æ ‡ç¤º</li>
<li>é‡Šæ”¾é”æ—¶å…ˆåˆ¤æ–­çº¿ç¨‹æ ‡ç¤ºæ˜¯å¦ä¸è‡ªå·±ä¸€è‡´ï¼Œä¸€è‡´åˆ™åˆ é™¤é”<ul>
<li>ç‰¹æ€§ï¼š<ul>
<li>åˆ©ç”¨ set nx æ»¡è¶³äº’æ–¥æ€§</li>
<li>åˆ©ç”¨ set ex ä¿è¯æ•…éšœæ—¶é”ä¾ç„¶èƒ½é‡Šæ”¾ï¼Œé¿å…æ­»é”ï¼Œæé«˜å®‰å…¨æ€§</li>
<li>åˆ©ç”¨ Redis é›†ç¾¤ä¿è¯é«˜å¯ç”¨å’Œé«˜å¹¶å‘ç‰¹æ€§</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>æˆ‘ä»¬ä¸€è·¯èµ°æ¥ï¼Œåˆ©ç”¨<strong>æ·»åŠ è¿‡æœŸæ—¶é—´ï¼Œé˜²æ­¢æ­»é”é—®é¢˜çš„å‘ç”Ÿ</strong>ï¼Œä½†æ˜¯æœ‰äº†è¿‡æœŸæ—¶é—´ä¹‹åï¼Œå¯èƒ½<strong>å‡ºç°è¯¯åˆ åˆ«äººé”çš„é—®é¢˜</strong>ï¼Œè¿™ä¸ªé—®é¢˜æˆ‘ä»¬å¼€å§‹æ˜¯åˆ©ç”¨åˆ ä¹‹å‰ é€šè¿‡æ‹¿é”ï¼Œæ¯”é”ï¼Œåˆ é”è¿™ä¸ªé€»è¾‘æ¥è§£å†³çš„ï¼Œä¹Ÿå°±æ˜¯<strong>åˆ ä¹‹å‰åˆ¤æ–­ä¸€ä¸‹å½“å‰è¿™æŠŠé”æ˜¯å¦æ˜¯å±äºè‡ªå·±çš„</strong>ï¼Œä½†æ˜¯ç°åœ¨è¿˜æœ‰<strong>åŸå­æ€§é—®é¢˜</strong>ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ²¡æ³•ä¿è¯æ‹¿é”æ¯”é”åˆ é”æ˜¯ä¸€ä¸ªåŸå­æ€§çš„åŠ¨ä½œï¼Œæœ€å<strong>é€šè¿‡ lua è¡¨è¾¾å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜</strong></p>
<p>ä½†æ˜¯ç›®å‰è¿˜å‰©ä¸‹ä¸€ä¸ªé—®é¢˜ï¼Œé”ä¸ä½ï¼Œä»€ä¹ˆæ˜¯é”ä¸ä½å‘¢ï¼Œä½ æƒ³ä¸€æƒ³ï¼Œå¦‚æœå½“è¿‡æœŸæ—¶é—´åˆ°äº†ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä»–ç»­æœŸä¸€ä¸‹ï¼Œæ¯”å¦‚ç»­ä¸ª 30sï¼Œå°±å¥½åƒæ˜¯ç½‘å§ä¸Šç½‘ï¼Œ ç½‘è´¹åˆ°äº†ä¹‹åï¼Œç„¶åè¯´ï¼Œæ¥ï¼Œç½‘ç®¡ï¼Œå†ç»™æˆ‘æ¥ 10 å—çš„ï¼Œæ˜¯ä¸æ˜¯åè¾¹çš„é—®é¢˜éƒ½ä¸ä¼šå‘ç”Ÿäº†ï¼Œé‚£ä¹ˆ<strong>ç»­æœŸé—®é¢˜</strong>æ€ä¹ˆè§£å†³å‘¢ï¼Œå¯ä»¥ä¾èµ–äºæˆ‘ä»¬æ¥ä¸‹æ¥è¦å­¦ä¹  redission å•¦</p>
<h2 id="2-3-Redission"><a href="#2-3-Redission" class="headerlink" title="2.3 Redission"></a>2.3 Redission</h2><p><a href="https://dogbin.vip/coderbin/3e609eef.html#">Redission çš„ github</a><br><a href="https://redisson.org/">Redisson å®˜ç½‘</a></p>
<h3 id="2-3-1-setnx-å®ç°çš„åˆ†å¸ƒå¼é”çš„é—®é¢˜"><a href="#2-3-1-setnx-å®ç°çš„åˆ†å¸ƒå¼é”çš„é—®é¢˜" class="headerlink" title="2.3.1 setnx å®ç°çš„åˆ†å¸ƒå¼é”çš„é—®é¢˜"></a>2.3.1 setnx å®ç°çš„åˆ†å¸ƒå¼é”çš„é—®é¢˜</h3><ul>
<li><strong>é‡å…¥é—®é¢˜</strong>ï¼šé‡å…¥é—®é¢˜æ˜¯æŒ‡ <strong>è·å¾—é”çš„çº¿ç¨‹å¯ä»¥å†æ¬¡è¿›å…¥åˆ°ç›¸åŒçš„é”çš„ä»£ç å—ä¸­</strong>ï¼Œå¯é‡å…¥é”çš„æ„ä¹‰åœ¨äº<strong>é˜²æ­¢æ­»é”</strong>ï¼Œæ¯”å¦‚ HashTable è¿™æ ·çš„ä»£ç ä¸­ï¼Œä»–çš„æ–¹æ³•éƒ½æ˜¯ä½¿ç”¨ synchronized ä¿®é¥°çš„ï¼Œå‡å¦‚ä»–åœ¨ä¸€ä¸ªæ–¹æ³•å†…ï¼Œè°ƒç”¨å¦ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆæ­¤æ—¶å¦‚æœæ˜¯ä¸å¯é‡å…¥çš„ï¼Œä¸å°±æ­»é”äº†å—ï¼Ÿæ‰€ä»¥å¯é‡å…¥é”ä»–çš„ä¸»è¦æ„ä¹‰æ˜¯é˜²æ­¢æ­»é”ï¼Œæˆ‘ä»¬çš„ synchronized å’Œ Lock é”éƒ½æ˜¯å¯é‡å…¥çš„ã€‚</li>
<li><strong>ä¸å¯é‡è¯•</strong>ï¼šæ˜¯æŒ‡ç›®å‰çš„åˆ†å¸ƒå¼åªèƒ½å°è¯•ä¸€æ¬¡ï¼Œæˆ‘ä»¬è®¤ä¸ºåˆç†çš„æƒ…å†µæ˜¯ï¼š<strong>å½“çº¿ç¨‹åœ¨è·å¾—é”å¤±è´¥åï¼Œä»–åº”è¯¥èƒ½å†æ¬¡å°è¯•è·å¾—é”ã€‚</strong></li>
<li><strong>è¶…æ—¶é‡Šæ”¾ï¼š</strong>æˆ‘ä»¬åœ¨åŠ é”æ—¶å¢åŠ äº†è¿‡æœŸæ—¶é—´ï¼Œè¿™æ ·çš„æˆ‘ä»¬å¯ä»¥é˜²æ­¢æ­»é”ï¼Œä½†æ˜¯å¦‚æœå¡é¡¿çš„æ—¶é—´è¶…é•¿ï¼Œè™½ç„¶æˆ‘ä»¬é‡‡ç”¨äº† lua è¡¨è¾¾å¼é˜²æ­¢åˆ é”çš„æ—¶å€™ï¼Œè¯¯åˆ åˆ«äººçš„é”ï¼Œä½†æ˜¯æ¯•ç«Ÿæ²¡æœ‰é”ä½ï¼Œæœ‰å®‰å…¨éšæ‚£</li>
<li><strong>ä¸»ä»ä¸€è‡´æ€§ï¼š</strong> å¦‚æœ Redis æä¾›äº†ä¸»ä»é›†ç¾¤ï¼Œå½“æˆ‘ä»¬å‘é›†ç¾¤å†™æ•°æ®æ—¶ï¼Œä¸»æœºéœ€è¦å¼‚æ­¥çš„å°†æ•°æ®åŒæ­¥ç»™ä»æœºï¼Œè€Œä¸‡ä¸€åœ¨åŒæ­¥è¿‡å»ä¹‹å‰ï¼Œä¸»æœºå®•æœºäº†ï¼Œå°±ä¼šå‡ºç°æ­»é”é—®é¢˜ã€‚</li>
</ul>
<h3 id="2-3-2-Redission-æ˜¯ä»€ä¹ˆ"><a href="#2-3-2-Redission-æ˜¯ä»€ä¹ˆ" class="headerlink" title="2.3.2 Redission æ˜¯ä»€ä¹ˆ"></a>2.3.2 Redission æ˜¯ä»€ä¹ˆ</h3><p>Redisson æ˜¯ä¸€ä¸ªåœ¨ Redis çš„åŸºç¡€ä¸Šå®ç°çš„ Java é©»å†…å­˜æ•°æ®ç½‘æ ¼ï¼ˆIn-Memory Data Gridï¼‰ã€‚å®ƒä¸ä»…æä¾›äº†ä¸€ç³»åˆ—çš„åˆ†å¸ƒå¼çš„ Java å¸¸ç”¨å¯¹è±¡ï¼Œè¿˜æä¾›äº†è®¸å¤šåˆ†å¸ƒå¼æœåŠ¡ï¼Œå…¶ä¸­å°±åŒ…å«äº†å„ç§åˆ†å¸ƒå¼é”çš„å®ç°ã€‚</p>
<h3 id="2-3-3-Redission-å¯é‡å…¥é”åŸç†"><a href="#2-3-3-Redission-å¯é‡å…¥é”åŸç†" class="headerlink" title="2.3.3 Redission å¯é‡å…¥é”åŸç†"></a>2.3.3 Redission å¯é‡å…¥é”åŸç†</h3><p>å°±æ˜¯å°†åŸæœ¬ string ç±»å‹çš„ value è½¬æ¢æˆäº† hash ç±»å‹ï¼Œhash å¯¹åº”çš„ field æ˜¯çº¿ç¨‹åï¼Œvalue åˆ™æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œ<strong>å½“å‰çº¿ç¨‹æ¯è·å–ä¸€æ¬¡é”ï¼Œåˆ™ value åŠ ä¸€ï¼Œåˆ é™¤é” value å‡ä¸€</strong>ï¼Œè‹¥ value ç­‰äºé›¶åˆ™ del é”ã€‚åˆ©ç”¨ lua è„šæœ¬å®ç°ã€‚</p>
<h3 id="2-3-4-Redission-é”é‡è¯•å’Œ-WatchDog-æœºåˆ¶"><a href="#2-3-4-Redission-é”é‡è¯•å’Œ-WatchDog-æœºåˆ¶" class="headerlink" title="2.3.4 Redission é”é‡è¯•å’Œ WatchDog æœºåˆ¶"></a>2.3.4 Redission é”é‡è¯•å’Œ WatchDog æœºåˆ¶</h3><p><a href="https://www.bilibili.com/video/BV1cr4y1671t?p=67&vd_source=665476c062292b64fa2949e9c935b109">å®æˆ˜ç¯‡ - 20. åˆ†å¸ƒå¼é” - Redisson çš„é”é‡è¯•å’Œ WatchDog æœºåˆ¶å“”å“©å“”å“© bilibili</a></p>
<h3 id="2-3-5-Redission-é”çš„-MutiLock-åŸç†"><a href="#2-3-5-Redission-é”çš„-MutiLock-åŸç†" class="headerlink" title="2.3.5 Redission é”çš„ MutiLock åŸç†"></a>2.3.5 Redission é”çš„ MutiLock åŸç†</h3><p><a href="https://www.bilibili.com/video/BV1cr4y1671t?p=68&vd_source=665476c062292b64fa2949e9c935b109">å®æˆ˜ç¯‡ - 21. åˆ†å¸ƒå¼é” - Redisson çš„ multiLock åŸç†å“”å“©å“”å“© bilibili</a></p>
]]></content>
      <categories>
        <category>Redis</category>
      </categories>
  </entry>
  <entry>
    <title>Redis çš„ Java å®¢æˆ·ç«¯</title>
    <url>/2024/12/26/Redis-Redis%20%E7%9A%84%20Java%20%E5%AE%A2%E6%88%B7%E7%AB%AF/</url>
    <content><![CDATA[<p>ç›®å‰æˆ‘äº†è§£åˆ°çš„æœ‰ä»¥ä¸‹ 4 ç§ã€‚</p>
<ul>
<li>Spring-Data-Redisï¼š<a href="https://spring.io/projects/spring-data-redis">https://spring.io/projects/spring-data-redis</a></li>
<li>Jedisï¼š<a href="https://github.com/redis/jedis/wiki">https://github.com/redis/jedis/wiki</a></li>
<li>Lettuceï¼š<a href="https://lettuce.io/">https://lettuce.io/</a> ï¼Œè¿™é‡Œä¸åšä»‹ç»ï¼Œå¤ªé«˜çº§äº†ï¼Œä¼°è®¡ hold ä¸ä½ã€‚</li>
<li>Redisson ï¼š<a href="https://github.com/redisson/redisson/wiki">https://github.com/redisson/redisson/wiki</a></li>
</ul>
<h1 id="Spring-Data-Redis"><a href="#Spring-Data-Redis" class="headerlink" title="Spring Data Redis"></a>Spring Data Redis</h1><h2 id="1-ä»‹ç»"><a href="#1-ä»‹ç»" class="headerlink" title="1. ä»‹ç»"></a>1. ä»‹ç»</h2><p>SpringData æ˜¯ Spring ä¸­æ•°æ®æ“ä½œçš„æ¨¡å—ï¼ŒåŒ…å«å¯¹å„ç§æ•°æ®åº“çš„é›†æˆï¼Œç›¸å½“äºå®šä¹‰äº†ä¸€äº›å¦‚å¢åˆ æ”¹æŸ¥çš„æŠ½è±¡æ¥å£ï¼Œç»§è€Œæœ‰å¯¹åº”ä¸åŒæ•°æ®åº“çš„å®ç°ã€‚</p>
<ul>
<li><a href="https://spring.io/projects/spring-data-jdbc">Spring Data JDBC</a></li>
<li><a href="https://spring.io/projects/spring-data-jpa">Spring Data JPA</a></li>
<li><a href="https://spring.io/projects/spring-data-mongodb">Spring Data MongoDB</a></li>
<li><a href="https://spring.io/projects/spring-data-redis">Spring Data Redis</a></li>
<li>ã€‚ã€‚ã€‚</li>
</ul>
<p>å…¶ä¸­å¯¹ redis é›†æˆæ¨¡å—å°±å«åš Spring Data Redisã€‚</p>
<ul>
<li>æä¾›äº†å¯¹ä¸åŒ Redis å®¢æˆ·ç«¯çš„æ•´åˆï¼ˆLettuce å’Œ Jedisï¼‰</li>
<li>æä¾›äº† RedisTemplate ç»Ÿä¸€ API æ¥æ“ä½œ Redis</li>
<li>æ”¯æŒ Redis çš„å‘å¸ƒè®¢é˜…æ¨¡å‹</li>
<li>æ”¯æŒ Redis å“¨å…µå’Œ Redis é›†ç¾¤</li>
<li>æ”¯æŒåŸºäº Lettuce çš„å“åº”å¼ç¼–ç¨‹</li>
<li>æ”¯æŒåŸºäº JDK.JSON. å­—ç¬¦ä¸².Spring å¯¹è±¡çš„æ•°æ®åºåˆ—åŒ–åŠååºåˆ—åŒ–</li>
<li>æ”¯æŒåŸºäº Redis çš„ JDKCollection å®ç°</li>
</ul>
<p>SpringDataRedis ä¸­æä¾›äº† RedisTemplate å·¥å…·ç±»ï¼Œå…¶ä¸­å°è£…äº†å„ç§å¯¹ Redis çš„æ“ä½œã€‚å¹¶ä¸”å°†ä¸åŒæ•°æ®ç±»å‹çš„æ“ä½œ API å°è£…åˆ°äº†ä¸åŒçš„ç±»å‹ä¸­ï¼š</p>
<h2 id="2-ä½¿ç”¨"><a href="#2-ä½¿ç”¨" class="headerlink" title="2. ä½¿ç”¨"></a>2. ä½¿ç”¨</h2><h3 id="2-1-å¼•å…¥ä¾èµ–"><a href="#2-1-å¼•å…¥ä¾èµ–" class="headerlink" title="2.1 å¼•å…¥ä¾èµ–"></a>2.1 å¼•å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml">      <span class="hljs-comment">&lt;!--è¿æ¥æ± ä¾èµ–--&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.commons<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-pool2<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--Jacksonä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="2-2-ç¼–å†™é…ç½®æ–‡ä»¶"><a href="#2-2-ç¼–å†™é…ç½®æ–‡ä»¶" class="headerlink" title="2.2 ç¼–å†™é…ç½®æ–‡ä»¶"></a>2.2 ç¼–å†™é…ç½®æ–‡ä»¶</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">redis:</span><br>    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">yourPassword</span><br>    <span class="hljs-attr">lettuce:</span><br>      <span class="hljs-attr">pool:</span><br>        <span class="hljs-attr">max-active:</span> <span class="hljs-number">8</span> <span class="hljs-comment">#æœ€å¤§è¿æ¥</span><br>        <span class="hljs-attr">max-idle:</span> <span class="hljs-number">8</span> <span class="hljs-comment">#æœ€å¤§ç©ºé—²è¿æ¥</span><br>        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">0</span> <span class="hljs-comment">#æœ€å°ç©ºé—²è¿æ¥</span><br>        <span class="hljs-attr">max-wait:</span> <span class="hljs-string">100ms</span> <span class="hljs-comment">#è¿æ¥ç­‰å¾…æ—¶é—´</span><br></code></pre></td></tr></table></figure>

<h3 id="2-3-æµ‹è¯•ä¸é—®é¢˜"><a href="#2-3-æµ‹è¯•ä¸é—®é¢˜" class="headerlink" title="2.3 æµ‹è¯•ä¸é—®é¢˜"></a>2.3 æµ‹è¯•ä¸é—®é¢˜</h3><p>å¯ä»¥çœ‹åˆ°æ˜¯å¯ä»¥æ­£å¸¸å†™å…¥å’Œè·å–çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹æ•°æ®åº“ã€‚</p>
<p>å‘ç°é—®é¢˜ï¼š</p>
<ol>
<li>æ’å…¥è¿›æ¥çš„æ€ä¹ˆä¸æ˜¯ â€œcoderbinâ€ï¼Œå¤šäº†å‰é¢ä¸€å¨ä¸œè¥¿å‘¢ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆæŸ¥ä¸åˆ°å€¼å‘¢ï¼Ÿ</li>
</ol>
<p>è¿½æº¯é—®é¢˜ï¼š</p>
<p><strong>RedisTemplate å¯ä»¥æ¥æ”¶ä»»æ„ Object ä½œä¸ºå€¼å†™å…¥ Redisï¼Œåªä¸è¿‡å†™å…¥å‰ä¼šæŠŠ Object åºåˆ—åŒ–ä¸ºå­—èŠ‚å½¢å¼ï¼Œ<code>é»˜è®¤æ˜¯é‡‡ç”¨JDKåºåˆ—åŒ–</code>ï¼Œå¾—åˆ°çš„ç»“æœå°±æ˜¯ä¸Šå›¾æ‰€ç¤º</strong></p>
<p>ç®€å•æ–¹æ³•ï¼šç›´æ¥ä¸ç”¨ RedisTemplateï¼Œæˆ‘ä»¬ç”¨ <strong>StringRedisTemplate.</strong></p>
<p>æ­£å¸¸è¾“å‡ºï¼Œå†å»çœ‹æ•°æ®åº“ã€‚</p>
<p>é”®å€¼çš„æ•°æ®ä¹Ÿæ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯ï¼è¿™é‡Œåˆæœ‰é—®é¢˜ã€‚</p>
<p>stringRedisTemplate çš„ set æ–¹æ³•è¦æ±‚é”®å€¼éƒ½ä¸º string ç±»å‹ï¼Œè¿™å°±æ— æ³•æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p>
<p><strong>é‚£ä¹ˆæˆ‘ä»¬å°±è¦è‡ªå®šä¹‰ RedisTemplate çš„åºåˆ—åŒ–æ–¹å¼å•¦ï¼</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisConfig</span> &#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="hljs-title function_">redisTemplate</span><span class="hljs-params">(RedisConnectionFactory connectionFactory)</span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºRedisTemplateå¯¹è±¡</span><br>        RedisTemplate&lt;String, Object&gt; template = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisTemplate</span>&lt;&gt;();<br>        <span class="hljs-comment">// è®¾ç½®è¿æ¥å·¥å‚</span><br>        template.setConnectionFactory(connectionFactory);<br>        <span class="hljs-comment">// åˆ›å»ºJSONåºåˆ—åŒ–å·¥å…·</span><br>        <span class="hljs-type">GenericJackson2JsonRedisSerializer</span> <span class="hljs-variable">jsonRedisSerializer</span> <span class="hljs-operator">=</span><br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericJackson2JsonRedisSerializer</span>();<br>        <span class="hljs-comment">// è®¾ç½®Keyçš„åºåˆ—åŒ–</span><br>        template.setKeySerializer(RedisSerializer.string());<br>        template.setHashKeySerializer(RedisSerializer.string());<br>        <span class="hljs-comment">// è®¾ç½®Valueçš„åºåˆ—åŒ–</span><br>        template.setValueSerializer(jsonRedisSerializer);<br>        template.setHashValueSerializer(jsonRedisSerializer);<br>        <span class="hljs-comment">// è¿”å›</span><br>        <span class="hljs-keyword">return</span> template;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°å·²ç»å¤§åŠŸå‘Šæˆäº†ã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼š</p>
<p>RedisTemplate çš„ä¸¤ç§åºåˆ—åŒ–å®è·µæ–¹æ¡ˆï¼š</p>
<ul>
<li>æ–¹æ¡ˆä¸€ï¼š<ul>
<li>è‡ªå®šä¹‰ RedisTemplate</li>
<li>ä¿®æ”¹ RedisTemplate çš„åºåˆ—åŒ–å™¨ä¸º GenericJackson2JsonRedisSerializer</li>
</ul>
</li>
<li>æ–¹æ¡ˆäºŒï¼š<ul>
<li>ä½¿ç”¨ StringRedisTemplate</li>
<li>å†™å…¥ Redis æ—¶ï¼Œæ‰‹åŠ¨æŠŠå¯¹è±¡åºåˆ—åŒ–ä¸º JSON</li>
<li>è¯»å– Redis æ—¶ï¼Œæ‰‹åŠ¨æŠŠè¯»å–åˆ°çš„ JSON ååºåˆ—åŒ–ä¸ºå¯¹è±¡</li>
</ul>
</li>
</ul>
<h1 id="Jedis"><a href="#Jedis" class="headerlink" title="Jedis"></a>Jedis</h1><p><a href="https://blog.csdn.net/zhangguanghui002/article/details/78770071">(25 æ¡æ¶ˆæ¯) Jedis å¸¸ç”¨æ–¹æ³• API_é›ç‹—å¤§å¸ˆçš„åšå®¢ - CSDN åšå®¢_jedis æ–¹æ³•</a></p>
<p>ä½¿ç”¨<strong>é˜»å¡çš„ I&#x2F;Oï¼Œä¸”å…¶æ–¹æ³•è°ƒç”¨éƒ½æ˜¯åŒæ­¥çš„ï¼ˆæ…¢ï¼ï¼‰</strong>ï¼Œç¨‹åºæµéœ€è¦ç­‰åˆ° sockets å¤„ç†å®Œ I&#x2F;O æ‰èƒ½æ‰§è¡Œï¼Œä¸æ”¯æŒå¼‚æ­¥ã€‚Jedis å®¢æˆ·ç«¯å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡è¿æ¥æ± æ¥ä½¿ç”¨ Jedisã€‚</p>
<h2 id="1-å¿«é€Ÿå…¥é—¨"><a href="#1-å¿«é€Ÿå…¥é—¨" class="headerlink" title="1. å¿«é€Ÿå…¥é—¨"></a>1. å¿«é€Ÿå…¥é—¨</h2><h3 id="1-1-å¼•å…¥ä¾èµ–"><a href="#1-1-å¼•å…¥ä¾èµ–" class="headerlink" title="1.1 å¼•å…¥ä¾èµ–"></a>1.1 å¼•å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--jedis--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>redis.clients<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jedis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.7.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="1-2-åˆ›å»ºè¿æ¥æ± "><a href="#1-2-åˆ›å»ºè¿æ¥æ± " class="headerlink" title="1.2 åˆ›å»ºè¿æ¥æ± "></a>1.2 åˆ›å»ºè¿æ¥æ± </h3><blockquote>
<p>Jedis æœ¬èº«æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯è¿æ¥ä¼šæœ‰æ€§èƒ½æŸè€—ï¼Œå› æ­¤æˆ‘ä»¬æ¨èå¤§å®¶ä½¿ç”¨ Jedis è¿æ¥æ± ä»£æ›¿ Jedis çš„ç›´è¿æ–¹å¼</p>
<p>æœ‰å…³æ± åŒ–æ€æƒ³ï¼Œå¹¶ä¸ä»…ä»…æ˜¯è¿™é‡Œä¼šä½¿ç”¨ï¼Œå¾ˆå¤šåœ°æ–¹éƒ½æœ‰ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬çš„æ•°æ®åº“è¿æ¥æ± ï¼Œæ¯”å¦‚æˆ‘ä»¬ tomcat ä¸­çš„çº¿ç¨‹æ± ï¼Œè¿™äº›éƒ½æ˜¯æ± åŒ–æ€æƒ³çš„ä½“ç°ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JedisConnectionFacotry</span> &#123;<br>     <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> JedisPool jedisPool;<br><br>     <span class="hljs-keyword">static</span> &#123;<br>         <span class="hljs-comment">//é…ç½®è¿æ¥æ± </span><br>         <span class="hljs-type">JedisPoolConfig</span> <span class="hljs-variable">poolConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPoolConfig</span>();<br>         poolConfig.setMaxTotal(<span class="hljs-number">8</span>);<br>         poolConfig.setMaxIdle(<span class="hljs-number">8</span>);<br>         poolConfig.setMinIdle(<span class="hljs-number">0</span>);<br>         poolConfig.setMaxWaitMillis(<span class="hljs-number">1000</span>);<br>         <span class="hljs-comment">//åˆ›å»ºè¿æ¥æ± å¯¹è±¡</span><br>         jedisPool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPool</span>(poolConfig,<br>                 <span class="hljs-string">&quot;localhost&quot;</span>,<span class="hljs-number">6379</span>,<span class="hljs-number">1000</span>);<br>     &#125;<br><br>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Jedis <span class="hljs-title function_">getJedis</span><span class="hljs-params">()</span>&#123;<br>          <span class="hljs-keyword">return</span> jedisPool.getResource();<br>     &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="1-3-æµ‹è¯•"><a href="#1-3-æµ‹è¯•" class="headerlink" title="1.3 æµ‹è¯•"></a>1.3 æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@BeforeEach</span><br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUp</span><span class="hljs-params">()</span>&#123;<br>      <span class="hljs-comment">//å»ºç«‹è¿æ¥</span><br>      <span class="hljs-comment">/*jedis = new Jedis(&quot;127.0.0.1&quot;,6379);*/</span><br>      jedis = JedisConnectionFacotry.getJedis();<br>       <span class="hljs-comment">//é€‰æ‹©åº“</span><br>      jedis.select(<span class="hljs-number">0</span>);<br>  &#125;<br>  <span class="hljs-meta">@Test</span><br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">testHash</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// æ’å…¥hashæ•°æ®</span><br>      jedis.hset(<span class="hljs-string">&quot;user:1&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;Jack&quot;</span>);<br>      jedis.hset(<span class="hljs-string">&quot;user:1&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-string">&quot;21&quot;</span>);<br><br>      <span class="hljs-comment">// è·å–</span><br>      Map&lt;String, String&gt; map = jedis.hgetAll(<span class="hljs-string">&quot;user:1&quot;</span>);<br>      System.out.println(map);<br>  &#125;<br> <span class="hljs-meta">@AfterEach</span><br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">tearDown</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">if</span> (jedis != <span class="hljs-literal">null</span>) &#123;<br>          jedis.close();<br>      &#125;<br>  &#125;<br></code></pre></td></tr></table></figure>

<p>æµ‹è¯•æˆåŠŸï¼</p>
<h1 id="Redisson"><a href="#Redisson" class="headerlink" title="Redisson"></a>Redisson</h1><p>Redisson æ˜¯ä¸€ä¸ªåœ¨ Redis çš„åŸºç¡€ä¸Šå®ç°çš„ Java é©»å†…å­˜æ•°æ®ç½‘æ ¼ï¼ˆIn-Memory Data Gridï¼‰ã€‚å®ƒä¸ä»…æä¾›äº†ä¸€ç³»åˆ—çš„åˆ†å¸ƒå¼çš„ Java å¸¸ç”¨å¯¹è±¡ï¼Œè¿˜æä¾›äº†è®¸å¤š<strong>åˆ†å¸ƒå¼æœåŠ¡</strong>ã€‚Redisson çš„å®—æ—¨æ˜¯<strong>ä¿ƒè¿›ä½¿ç”¨è€…å¯¹ Redis çš„å…³æ³¨åˆ†ç¦»</strong>ï¼ˆSeparation of Concernï¼‰ï¼Œä»è€Œè®©ä½¿ç”¨è€…èƒ½å¤Ÿå°†ç²¾åŠ›æ›´é›†ä¸­åœ°æ”¾åœ¨å¤„ç†ä¸šåŠ¡é€»è¾‘ä¸Šã€‚</p>
<h2 id="1-å¿«é€Ÿå…¥é—¨-1"><a href="#1-å¿«é€Ÿå…¥é—¨-1" class="headerlink" title="1. å¿«é€Ÿå…¥é—¨"></a>1. å¿«é€Ÿå…¥é—¨</h2><h3 id="1-1-å¼•å…¥ä¾èµ–-1"><a href="#1-1-å¼•å…¥ä¾èµ–-1" class="headerlink" title="1.1 å¼•å…¥ä¾èµ–"></a>1.1 å¼•å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.redisson<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>redisson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.13.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="1-2-é…ç½®-Redisson-å®¢æˆ·ç«¯"><a href="#1-2-é…ç½®-Redisson-å®¢æˆ·ç«¯" class="headerlink" title="1.2 é…ç½® Redisson å®¢æˆ·ç«¯"></a>1.2 é…ç½® Redisson å®¢æˆ·ç«¯</h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedissonConfig</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> RedissonClient <span class="hljs-title function_">redissonClient</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">// é…ç½®</span><br>        <span class="hljs-type">Config</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Config</span>();<br>        config.useSingleServer().setAddress(<span class="hljs-string">&quot;redis://192.168.150.101:6379&quot;</span>)<br>            .setPassword(<span class="hljs-string">&quot;123321&quot;</span>);<br>        <span class="hljs-comment">// åˆ›å»ºRedissonClientå¯¹è±¡</span><br>        <span class="hljs-keyword">return</span> Redisson.create(config);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="1-3-ä½¿ç”¨-Redission-çš„åˆ†å¸ƒå¼é”"><a href="#1-3-ä½¿ç”¨-Redission-çš„åˆ†å¸ƒå¼é”" class="headerlink" title="1.3 ä½¿ç”¨ Redission çš„åˆ†å¸ƒå¼é”"></a>1.3 ä½¿ç”¨ Redission çš„åˆ†å¸ƒå¼é”</h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Resource</span><br><span class="hljs-keyword">private</span> RedissionClient redissonClient;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testRedisson</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>    <span class="hljs-comment">//è·å–é”(å¯é‡å…¥)ï¼ŒæŒ‡å®šé”çš„åç§°</span><br>    <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(<span class="hljs-string">&quot;anyLock&quot;</span>);<br>    <span class="hljs-comment">//å°è¯•è·å–é”ï¼Œå‚æ•°åˆ†åˆ«æ˜¯ï¼šè·å–é”çš„æœ€å¤§ç­‰å¾…æ—¶é—´(æœŸé—´ä¼šé‡è¯•)ï¼Œé”è‡ªåŠ¨é‡Šæ”¾æ—¶é—´ï¼Œæ—¶é—´å•ä½</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">isLock</span> <span class="hljs-operator">=</span> lock.tryLock(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>,TimeUnit.SECONDS);<br>    <span class="hljs-comment">//åˆ¤æ–­è·å–é”æˆåŠŸ</span><br>    <span class="hljs-keyword">if</span>(isLock)&#123;<br>        <span class="hljs-keyword">try</span>&#123;<br>            System.out.println(<span class="hljs-string">&quot;æ‰§è¡Œä¸šåŠ¡&quot;</span>);<br>        &#125;<span class="hljs-keyword">finally</span>&#123;<br>            <span class="hljs-comment">//é‡Šæ”¾é”</span><br>            lock.unlock();<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Redisson æœ‰éå¸¸å¤šçš„åˆ†å¸ƒå¼æœåŠ¡ï¼š</p>
<p>å…·ä½“çš„å„ä¸ªç”¨æ³•éœ€è¦ç»“åˆå®˜ç½‘å’Œä½ çš„å…·ä½“ä¸šåŠ¡å®ç°ã€‚</p>
<h1 id="Java-å®¢æˆ·ç«¯æ€»ç»“"><a href="#Java-å®¢æˆ·ç«¯æ€»ç»“" class="headerlink" title="Java å®¢æˆ·ç«¯æ€»ç»“"></a>Java å®¢æˆ·ç«¯æ€»ç»“</h1><ul>
<li>å¦‚æœ<strong>ä½¿ç”¨äº† Spring</strong>ï¼Œå¹¶ä¸”æ²¡æœ‰è¿‡å¤šçš„å®šåˆ¶åŒ–è¦æ±‚ï¼Œé‚£ä¹ˆå¤§å¯ä»¥<strong>é€‰æ‹© Spring Data Redis</strong></li>
<li>å¦‚æœ<strong>æ²¡æœ‰ä½¿ç”¨ Spring</strong>ï¼Œåªéœ€è¦å®ç°ç®€å•çš„ä¸šåŠ¡ï¼Œä¹Ÿ <strong>æ²¡æœ‰è¿‡é«˜çš„æ€§èƒ½è¦æ±‚</strong>ï¼Œé‚£ä¹ˆå¯ä»¥<strong>é€‰æ‹© Jedis</strong></li>
<li>å¦‚æœ<strong>æ²¡æœ‰ä½¿ç”¨ Spring</strong>ï¼Œå¹¶ä¸” <strong>è¿½æ±‚é«˜æ€§èƒ½ã€é«˜å®šåˆ¶åŒ–</strong>ï¼Œå¯ä»¥<strong>ç”¨ Lettuce</strong>ï¼Œæ”¯æŒå¼‚æ­¥ã€è¿æ¥æ± </li>
<li>å¦‚æœé¡¹ç›®æ˜¯<strong>åˆ†å¸ƒå¼æ¶æ„</strong>ï¼Œ<strong>éœ€è¦ä¸€äº›åˆ†å¸ƒå¼æœåŠ¡</strong>ï¼ˆåˆ†å¸ƒå¼é”ï¼Œåˆ†å¸ƒå¼é›†åˆç­‰ç­‰ï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥<strong>é€‰æ‹© Redisson</strong></li>
</ul>
]]></content>
      <categories>
        <category>Redis</category>
      </categories>
  </entry>
  <entry>
    <title>Redis å®ç° Session å…±äº«</title>
    <url>/2024/12/18/Redis-%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8Fsession/</url>
    <content><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯Session"><a href="#ä»€ä¹ˆæ˜¯Session" class="headerlink" title="ä»€ä¹ˆæ˜¯Session"></a>ä»€ä¹ˆæ˜¯Session</h1><ul>
<li>session æ˜¯ä¸€ç§æœåŠ¡ç«¯çš„ä¼šè¯æœºåˆ¶</li>
<li>session å±äºåŸŸå¯¹è±¡ï¼Œä½œç”¨èŒƒå›´æ˜¯ä¸€æ¬¡ä¼šè¯</li>
</ul>
<p>æœåŠ¡å™¨ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºä¸€ä¸ªä¼šè¯ï¼Œå­˜å‚¨ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯ï¼Œä»¥ä¾¿å¤šæ¬¡è¯·æ±‚èƒ½å¤Ÿå®šä½åˆ°åŒä¸€ä¸ªä¸Šä¸‹æ–‡ã€‚å½“ç”¨æˆ·åœ¨åº”ç”¨ç¨‹åºçš„ Web é¡µä¹‹é—´è·³è½¬æ—¶ï¼Œå­˜å‚¨åœ¨ Session å¯¹è±¡ä¸­çš„å˜é‡å°†ä¸ä¼šä¸¢å¤±ï¼Œè€Œæ˜¯åœ¨æ•´ä¸ªç”¨æˆ·ä¼šè¯ä¸­ä¸€ç›´å­˜åœ¨ä¸‹å»ã€‚å½“ç”¨æˆ·è¯·æ±‚æ¥è‡ªåº”ç”¨ç¨‹åºçš„ Web é¡µæ—¶ï¼Œå¦‚æœè¯¥ç”¨æˆ·è¿˜æ²¡æœ‰ä¼šè¯ï¼Œåˆ™ Web æœåŠ¡å™¨å°†è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª Session å¯¹è±¡ã€‚å½“ä¼šè¯è¿‡æœŸæˆ–è¢«æ”¾å¼ƒåï¼ŒæœåŠ¡å™¨å°†ç»ˆæ­¢è¯¥ä¼šè¯ã€‚</p>
<h1 id="Session-ä¸€è‡´æ€§é—®é¢˜"><a href="#Session-ä¸€è‡´æ€§é—®é¢˜" class="headerlink" title="Session ä¸€è‡´æ€§é—®é¢˜"></a>Session ä¸€è‡´æ€§é—®é¢˜</h1><p>å½“ç¬¬ä¸€æ¬¡è¯·æ±‚æ¥æ—¶ï¼ŒæœåŠ¡å™¨ç«¯ä¼šæ¥å—åˆ°å®¢æˆ·ç«¯è¯·æ±‚ï¼Œä¼šåˆ›å»ºä¸€ä¸ª sessionï¼Œä½¿ç”¨å“åº”å¤´è¿”å› sessionid ç»™å®¢æˆ·ç«¯ã€‚æµè§ˆå™¨è·å–åˆ° sessionid åä¼šä¿å­˜åˆ°æœ¬åœ° cookie ä¸­</p>
<p>å½“ç¬¬äºŒæ¬¡è¯·æ±‚æ¥æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè¯»å–æœ¬åœ°çš„ sessionidï¼Œå­˜æ”¾åœ¨è¯·æ±‚å¤´ä¸­ï¼ŒæœåŠ¡ç«¯åœ¨è¯·æ±‚å¤´ä¸­è·å–å¯¹è±¡çš„ sessionid åœ¨æœ¬åœ° session å†…å­˜ä¸­æŸ¥è¯¢</p>
<p>session å±äºä¼šè¯æœºåˆ¶ï¼Œå½“å‰ä¼šè¯ç»“æŸæ—¶ï¼Œsession å°±ä¼šè¢«é”€æ¯ï¼Œå¹¶ä¸” web ç¨‹åºä¼šä¸ºæ¯ä¸€æ¬¡ä¸åŒçš„ä¼šè¯åˆ›å»ºä¸åŒçš„ sessionï¼Œæ‰€ä»¥åœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹ï¼Œå³ä½¿æ˜¯è°ƒç”¨åŒä¸€ä¸ªæ–¹æ³•æ‰§è¡ŒåŒæ ·çš„ä»£ç ï¼Œä½†æ˜¯ä»–ä»¬çš„æœåŠ¡å™¨ä¸åŒï¼Œè‡ªç„¶ web ç¨‹åºä¸åŒï¼Œæ•´ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä¹Ÿä¸åŒï¼Œç†æ‰€å½“ç„¶ session ä¹Ÿæ˜¯ä¸åŒçš„ã€‚</p>
<h1 id="Spring-Session"><a href="#Spring-Session" class="headerlink" title="Spring Session"></a>Spring Session</h1><h2 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h2><p>å½“ Web æœåŠ¡å™¨æ¥æ”¶åˆ° http è¯·æ±‚åï¼Œè¯·æ±‚è¿›å…¥å¯¹åº”çš„ Filter è¿›è¡Œè¿‡æ»¤ï¼Œå°†åŸæœ¬éœ€è¦ç”± web æœåŠ¡å™¨åˆ›å»ºä¼šè¯çš„è¿‡ç¨‹è½¬äº¤ç»™ Spring-Session è¿›è¡Œåˆ›å»ºï¼Œæœ¬æ¥åˆ›å»ºçš„ä¼šè¯ä¿å­˜åœ¨ Web æœåŠ¡å™¨å†…å­˜ä¸­ï¼Œé€šè¿‡ Spring-Session åˆ›å»ºçš„ä¼šè¯ä¿¡æ¯å¯ä»¥ä¿å­˜åœ¨ç¬¬ä¸‰æ–¹çš„æœåŠ¡ä¸­ï¼Œå¦‚ï¼šRedisï¼ŒMySQL ç­‰ã€‚Web æœåŠ¡å™¨ä¹‹é—´é€šè¿‡è¿æ¥ç¬¬ä¸‰æ–¹æœåŠ¡æ¥å…±äº«æ•°æ®ï¼Œå®ç° Session å…±äº«ï¼</p>
<h2 id="å®ç°è¿‡ç¨‹"><a href="#å®ç°è¿‡ç¨‹" class="headerlink" title="å®ç°è¿‡ç¨‹"></a>å®ç°è¿‡ç¨‹</h2><ul>
<li>æ·»åŠ ä¾èµ–</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br> <br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.session<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-session-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>ä¿®æ”¹ application.yml æ·»åŠ é…ç½®</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">redis:</span><br>    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">yourpassword</span> <span class="hljs-comment"># å¦‚æœè®¾ç½®äº†å¯†ç çš„è¯</span><br>    <span class="hljs-attr">database:</span> <span class="hljs-number">0</span> <span class="hljs-comment"># Redis æ•°æ®åº“ç´¢å¼•</span><br>    <span class="hljs-attr">timeout:</span> <span class="hljs-number">5000</span> <span class="hljs-comment"># è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span><br>  <span class="hljs-attr">session:</span><br>    <span class="hljs-attr">store-type:</span> <span class="hljs-string">redis</span> <span class="hljs-comment"># é»˜è®¤æ˜¯ noneï¼Œè¡¨ç¤ºå­˜å‚¨åœ¨å•å°æœåŠ¡å™¨ï¼Œredis è¡¨ç¤ºä» redis è¯»å†™ session</span><br></code></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Redis</category>
      </categories>
  </entry>
  <entry>
    <title>ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</title>
    <url>/2024/06/20/%E5%BE%AE%E6%9C%8D%E5%8A%A1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%BE%AE%E6%9C%8D%E5%8A%A1/</url>
    <content><![CDATA[<h2 id="å•ä½“æ¶æ„ï¼š"><a href="#å•ä½“æ¶æ„ï¼š" class="headerlink" title="å•ä½“æ¶æ„ï¼š"></a>å•ä½“æ¶æ„ï¼š</h2><ul>
<li>å°†ä¸šåŠ¡çš„æ‰€æœ‰åŠŸèƒ½é›†ä¸­åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å¼€å‘ï¼Œæ‰“æˆä¸€ä¸ªåŒ…éƒ¨ç½²ã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šæ¶æ„ç®€å•ï¼Œéƒ¨ç½²æˆæœ¬ä½ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šè€¦åˆåº¦é«˜ã€‚</li>
</ul>
<hr>
<h2 id="åˆ†å¸ƒå¼æ¶æ„ï¼š"><a href="#åˆ†å¸ƒå¼æ¶æ„ï¼š" class="headerlink" title="åˆ†å¸ƒå¼æ¶æ„ï¼š"></a>åˆ†å¸ƒå¼æ¶æ„ï¼š</h2><ul>
<li>æ ¹æ®ä¸šåŠ¡åŠŸèƒ½å¯¹ç³»ç»Ÿè¿›è¡Œæ‹†åˆ†ï¼Œæ¯ä¸ªä¸šåŠ¡æ¨¡å—ä½œä¸ºç‹¬ç«‹é¡¹ç›®å¼€å‘ï¼Œæˆä¸ºä¸€ä¸ªæœåŠ¡</li>
<li>ä¼˜ç‚¹ï¼šé™ä½æœåŠ¡è€¦åˆï¼Œæœ‰åˆ©äºæœåŠ¡å‡çº§æ‹“å±•</li>
</ul>
<hr>
<h2 id="å¾®æœåŠ¡ï¼š"><a href="#å¾®æœåŠ¡ï¼š" class="headerlink" title="å¾®æœåŠ¡ï¼š"></a>å¾®æœåŠ¡ï¼š</h2><ul>
<li>å¾®æœåŠ¡æ˜¯ä¸€ç§ç»è¿‡è‰¯å¥½ç»“æ„è®¾è®¡çš„åˆ†å¸ƒå¼æ¶æ„æ–¹æ¡ˆï¼Œå¾®æœåŠ¡æ¶æ„ç‰¹å¾ï¼š</li>
<li><strong>å•ä¸€èŒè´£</strong>ï¼šå¾®æœåŠ¡æ‹†åˆ†åŠ›åº¦æ›´å°ï¼Œæ¯ä¸€æœåŠ¡éƒ½å¯¹åº”å”¯ä¸€çš„ä¸šåŠ¡èƒ½åŠ›ï¼Œåšåˆ°å•ä¸€èŒè´£ï¼Œé¿å…é‡å¤ä¸šåŠ¡å¼€å‘</li>
<li><strong>é¢å‘æœåŠ¡</strong>ï¼šå¾®æœåŠ¡å¯¹å¤–æš´éœ²ä¸šåŠ¡æ¥å£</li>
<li><strong>è‡ªæ²»</strong>ï¼šå›¢é˜Ÿç‹¬ç«‹ã€æŠ€æœ¯ç‹¬ç«‹ã€æ•°æ®ç‹¬ç«‹ã€éƒ¨ç½²ç‹¬ç«‹</li>
<li><strong>éš”ç¦»æ€§å¼º</strong>ï¼šæœåŠ¡è°ƒç”¨åšå¥½éš”ç¦»ã€å®¹é”™ã€é™çº§ï¼Œé¿å…å‡ºç°çº§è”é—®é¢˜</li>
</ul>
<h5 id="å¾®æœåŠ¡ç»“æ„ï¼š"><a href="#å¾®æœåŠ¡ç»“æ„ï¼š" class="headerlink" title="å¾®æœåŠ¡ç»“æ„ï¼š"></a>å¾®æœåŠ¡ç»“æ„ï¼š</h5><p>å¾®æœåŠ¡è¿™ç§æ–¹æ¡ˆéœ€è¦æŠ€æœ¯æ¡†æ¶æ¥è½åœ°ï¼Œå…¨çƒçš„äº’è”ç½‘å…¬å¸éƒ½åœ¨ç§¯æå°è¯•è‡ªå·±çš„å¾®æœåŠ¡è½åœ°æŠ€æœ¯ã€‚åœ¨å›½å†…æœ€çŸ¥åçš„å°±æ˜¯ SpringCloud å’Œé˜¿é‡Œå·´å·´çš„ Dubboã€‚</p>
<h6 id="Dubboï¼š"><a href="#Dubboï¼š" class="headerlink" title="Dubboï¼š"></a>Dubboï¼š</h6><ol>
<li>æ³¨å†Œä¸­å¿ƒï¼šzookeeperã€Redis</li>
<li>æœåŠ¡è¿œç¨‹è°ƒç”¨ï¼šDubbo åè®®</li>
<li>é…ç½®ä¸­å¿ƒï¼šæ— </li>
<li>æœåŠ¡ç½‘å…³ï¼šæ— </li>
<li>æœåŠ¡ç›‘æ§å’Œä¿æŠ¤ï¼šdubbo-adminï¼ŒåŠŸèƒ½å¼±</li>
</ol>
<h6 id="SpringCloudï¼š"><a href="#SpringCloudï¼š" class="headerlink" title="SpringCloudï¼š"></a>SpringCloudï¼š</h6><ol>
<li>æ³¨å†Œä¸­å¿ƒï¼šEurekaã€Consul</li>
<li>æœåŠ¡è¿œç¨‹è°ƒç”¨ï¼šFeign (http åè®®)</li>
<li>é…ç½®ä¸­å¿ƒï¼šSpringCloudConfig</li>
<li>æœåŠ¡ç½‘å…³ï¼šSpringCloudGatewayã€Zuul</li>
<li>æœåŠ¡ç›‘æ§å’Œä¿æŠ¤ï¼šHystrix</li>
</ol>
<h6 id="SpringCloudAlibabaï¼š"><a href="#SpringCloudAlibabaï¼š" class="headerlink" title="SpringCloudAlibabaï¼š"></a>SpringCloudAlibabaï¼š</h6><ol>
<li>æ³¨å†Œä¸­å¿ƒï¼šNacosã€Eureka</li>
<li>æœåŠ¡è¿œç¨‹è°ƒç”¨ï¼šDubboã€Feign</li>
<li>é…ç½®ä¸­å¿ƒï¼šSpringCloudConfigã€Nacos</li>
<li>æœåŠ¡ç½‘å…³ï¼šSpringCloudGatewayã€Zuul</li>
<li>æœåŠ¡ç›‘æ§å’Œä¿æŠ¤ï¼šSentinel</li>
</ol>
<hr>
<h2 id="SpringCloudï¼š-1"><a href="#SpringCloudï¼š-1" class="headerlink" title="SpringCloudï¼š"></a>SpringCloudï¼š</h2><p>æ˜¯ç›®å‰å›½å†…ä½¿ç”¨æœ€å¹¿æ³›çš„å¾®æœåŠ¡æ¡†æ¶ã€‚å®˜ç½‘åœ°å€ï¼š<a href="https://spring.io/projects/spring-cloud">https://spring.io/projects/spring-cloud</a><br>SpringCloud ç»§æ‰¿äº†å„ç§å¾®æœåŠ¡åŠŸèƒ½ç»„ä»¶ï¼Œå¹¶åŸºäº SpringBoot å®ç°äº†è¿™äº›ç»„ä»¶çš„è‡ªåŠ¨è£…é…ï¼Œä»è€Œæä¾›äº†è‰¯å¥½çš„å¼€ç®±å³ç”¨ä½“éªŒï¼š<br>â€“ æœåŠ¡æ³¨å†Œå‘ç°ï¼šEurekaã€Nacosã€Consul<br>â€“ æœåŠ¡è¿œç¨‹è°ƒç”¨ï¼šOpenFeignã€Dubbo<br>â€“ æœåŠ¡é“¾è·¯ç›‘æ§ï¼šZipkinã€Sleuth<br>â€“ ç»Ÿä¸€é…ç½®ç®¡ç†ï¼šSpringCloudConfigã€Nacos<br>â€“ ç»Ÿä¸€ç½‘å…³è·¯ç”±ï¼šSpringCloudGatewayã€Zuul<br>â€“ æµæ§ã€é™çº§ã€ä¿æŠ¤ï¼šHystixã€Sentinel</p>
<h5 id="SpringCloud-ä¸-SpringBoot-çš„ç‰ˆæœ¬å…¼å®¹å…³ç³»å¦‚ä¸‹ï¼š"><a href="#SpringCloud-ä¸-SpringBoot-çš„ç‰ˆæœ¬å…¼å®¹å…³ç³»å¦‚ä¸‹ï¼š" class="headerlink" title="SpringCloud ä¸ SpringBoot çš„ç‰ˆæœ¬å…¼å®¹å…³ç³»å¦‚ä¸‹ï¼š"></a>SpringCloud ä¸ SpringBoot çš„ç‰ˆæœ¬å…¼å®¹å…³ç³»å¦‚ä¸‹ï¼š</h5><table>
<thead>
<tr>
<th><strong>ReleaseTrain</strong></th>
<th><strong>BootVersion</strong></th>
</tr>
</thead>
<tbody><tr>
<td>2020.0.x aka ilford</td>
<td>2.4.x</td>
</tr>
<tr>
<td>Hoxton</td>
<td>2.2.x,2.3.x (Starting with SR3.5ï¼›SR5 ç”¨ 2.2.xã€SR5 ä»¥ä¸Šç”¨ 2.3.x)</td>
</tr>
<tr>
<td>Greenwich</td>
<td>2.1.x</td>
</tr>
<tr>
<td>Finchley</td>
<td>2.0.x</td>
</tr>
<tr>
<td>Edgware</td>
<td>1.5.x</td>
</tr>
<tr>
<td>Dalston</td>
<td>1.5.x</td>
</tr>
</tbody></table>
<h5 id="æœåŠ¡æ‹†åˆ†æ³¨æ„äº‹é¡¹ï¼š"><a href="#æœåŠ¡æ‹†åˆ†æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="æœåŠ¡æ‹†åˆ†æ³¨æ„äº‹é¡¹ï¼š"></a>æœåŠ¡æ‹†åˆ†æ³¨æ„äº‹é¡¹ï¼š</h5><ol>
<li>ä¸åŒå¾®æœåŠ¡ï¼Œä¸è¦é‡å¤å¼€å‘ç›¸åŒä¸šåŠ¡</li>
<li>å¾®æœåŠ¡æ•°æ®ç‹¬ç«‹ï¼Œä¸è¦è®¿é—®å…¶å®ƒå¾®æœåŠ¡çš„æ•°æ®åº“</li>
<li>å¾®æœåŠ¡å¯ä»¥å°†è‡ªå·±çš„ä¸šåŠ¡æš´éœ²ä¸ºæ¥å£ï¼Œä¾›å…¶å®ƒå¾®æœåŠ¡è°ƒç”¨</li>
</ol>
<h5 id="å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨ï¼š"><a href="#å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨ï¼š" class="headerlink" title="å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨ï¼š"></a>å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨ï¼š</h5><ul>
<li>åŸºäº RestTemplate å‘èµ·çš„ http è¯·æ±‚å®ç°è¿œç¨‹è°ƒç”¨</li>
<li>http è¯·æ±‚äº¤ä½œè¿œç¨‹è°ƒç”¨æ˜¯ä¸è¯­è¨€æ— å…³çš„è°ƒç”¨ï¼Œåªè¦æŒ‡å¯¼å¯¹æ–¹çš„ ipã€ç«¯å£ã€æ¥å£è·¯å¾„ã€è¯·æ±‚å‚æ•°å³å¯</li>
</ul>
<h6 id="1-æ³¨å†Œ-RestTemplate"><a href="#1-æ³¨å†Œ-RestTemplate" class="headerlink" title="1. æ³¨å†Œ RestTemplate"></a>1. æ³¨å†Œ RestTemplate</h6><p>åœ¨ order-service çš„ OrderApplication ä¸­æ³¨å†Œ RestTemplate</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@MapperScan(&quot;cn.itcast.order.mapper&quot;)</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderApplication</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(OrderApplication.class, args);<br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ›å»ºRestTemplateå¹¶æ³¨å…¥Springå®¹å™¨</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title function_">restTemplate</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h6 id="2-æœåŠ¡è¿œç¨‹è°ƒç”¨-RestTemplate"><a href="#2-æœåŠ¡è¿œç¨‹è°ƒç”¨-RestTemplate" class="headerlink" title="2. æœåŠ¡è¿œç¨‹è°ƒç”¨ RestTemplate"></a>2. æœåŠ¡è¿œç¨‹è°ƒç”¨ RestTemplate</h6><p>ä¿®æ”¹ order-service ä¸­çš„ OrderService çš„ queryOrderById æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span><br><span class="hljs-keyword">private</span> RestTemplate restTemplate;<br> <br><span class="hljs-keyword">public</span> Order <span class="hljs-title function_">queryOrderById</span><span class="hljs-params">(Long orderId)</span> &#123;<br>    <span class="hljs-comment">// 1.æŸ¥è¯¢è®¢å•</span><br>    <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderMapper.findById(orderId);<br>    <span class="hljs-comment">// 2.åˆ©ç”¨RestTemplateå‘èµ·httpè¯·æ±‚ï¼ŒæŸ¥è¯¢ç”¨æˆ·</span><br>    <span class="hljs-comment">// 2.1.urlè·¯å¾„</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;http://localhost:8081/user/&quot;</span> + order.getUserId();<br>    <span class="hljs-comment">// 2.2.å‘é€httpè¯·æ±‚ï¼Œå®ç°è¿œç¨‹è°ƒç”¨</span><br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> restTemplate.getForObject(url, User.class);        <span class="hljs-comment">//(url,è¿”å›å€¼ç±»å‹)</span><br>    <span class="hljs-comment">// 3.å°è£…useråˆ°Order</span><br>    order.setUser(user);<br>    <span class="hljs-comment">// 4.è¿”å›</span><br>    <span class="hljs-keyword">return</span> order;<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="æä¾›è€…ä¸æ¶ˆè´¹è€…ï¼š"><a href="#æä¾›è€…ä¸æ¶ˆè´¹è€…ï¼š" class="headerlink" title="æä¾›è€…ä¸æ¶ˆè´¹è€…ï¼š"></a>æä¾›è€…ä¸æ¶ˆè´¹è€…ï¼š</h5><ul>
<li><strong>æœåŠ¡æä¾›è€…</strong>ï¼šä¸€æ¬¡ä¸šåŠ¡ä¸­ï¼Œè¢«å…¶ä»–å¾®æœåŠ¡è°ƒç”¨çš„æœåŠ¡ (æä¾›æ¥å£ç»™å…¶ä»–å¾®æœåŠ¡)</li>
<li><strong>æœåŠ¡æ¶ˆè´¹è€…</strong>ï¼šä¸€æ¬¡ä¸šåŠ¡ä¸­ï¼Œè°ƒç”¨å…¶ä»–å¾®æœåŠ¡çš„æœåŠ¡ (è°ƒç”¨å…¶ä»–å¾®æœåŠ¡æä¾›çš„æ¥å£)</li>
<li>æä¾›è€…ä¸æ¶ˆè´¹è€…è§’è‰²å…¶å®æ˜¯ç›¸å¯¹çš„ï¼Œä¸€ä¸ªæœåŠ¡å¯ä»¥åŒæ—¶æ˜¯æœåŠ¡æä¾›è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…</li>
</ul>
<h5 id="eureka-çš„ä½œç”¨ï¼š"><a href="#eureka-çš„ä½œç”¨ï¼š" class="headerlink" title="eureka çš„ä½œç”¨ï¼š"></a>eureka çš„ä½œç”¨ï¼š</h5><ol>
<li>æœåŠ¡æ¶ˆè´¹è€…è¯¥å¦‚ä½•è·å–æœåŠ¡æä¾›è€…çš„åœ°å€ä¿¡æ¯ï¼Ÿ<ul>
<li>æœåŠ¡æä¾›è€…å¯åŠ¨æ—¶å‘ eureka æ³¨å†Œè‡ªå·±çš„ä¿¡æ¯</li>
<li>eureka ä¿å­˜è¿™äº›ä¿¡æ¯</li>
<li>æ¶ˆè´¹è€…æ ¹æ®æœåŠ¡åç§°å‘ eureka æ‹‰å–æä¾›è€…ä¿¡æ¯</li>
</ul>
</li>
<li>å¦‚æœæœ‰å¤šä¸ªæœåŠ¡æä¾›è€…ï¼Œæ¶ˆè´¹è€…è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ<ul>
<li>æœåŠ¡æ¶ˆè´¹è€…åˆ©ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œä»æœåŠ¡åˆ—è¡¨ä¸­æŒ‘é€‰ä¸€ä¸ª</li>
</ul>
</li>
<li>æ¶ˆè´¹è€…å¦‚ä½•å¾—çŸ¥æœåŠ¡æä¾›è€…çš„å¥åº·çŠ¶æ€ï¼Ÿ<ul>
<li>æœåŠ¡æä¾›è€…ä¼šæ¯éš” 30 ç§’å‘ EurekaServer å‘é€å¿ƒè·³è¯·æ±‚ï¼ŒæŠ¥å‘Šå¥åº·çŠ¶æ€</li>
<li>eureka ä¼šæ›´æ–°è®°å½•æœåŠ¡åˆ—è¡¨ä¿¡æ¯ï¼Œå¿ƒè·³ä¸æ­£å¸¸ä¼šè¢«å‰”é™¤</li>
<li>æ¶ˆè´¹è€…å°±å¯ä»¥æ‹‰æ¸ é“æœ€æ–°çš„ä¿¡æ¯</li>
</ul>
</li>
</ol>
<h5 id="åœ¨-eureka-æ¶æ„ä¸­ï¼Œå¾®æœåŠ¡è§’è‰²æœ‰ä¸¤ç±»ï¼š"><a href="#åœ¨-eureka-æ¶æ„ä¸­ï¼Œå¾®æœåŠ¡è§’è‰²æœ‰ä¸¤ç±»ï¼š" class="headerlink" title="åœ¨ eureka æ¶æ„ä¸­ï¼Œå¾®æœåŠ¡è§’è‰²æœ‰ä¸¤ç±»ï¼š"></a>åœ¨ eureka æ¶æ„ä¸­ï¼Œå¾®æœåŠ¡è§’è‰²æœ‰ä¸¤ç±»ï¼š</h5><ol>
<li>EurekaServerï¼šæœåŠ¡ç«¯ï¼Œæ³¨å†Œä¸­å¿ƒ<ul>
<li>è®°å½•æœåŠ¡ä¿¡æ¯</li>
<li>å¿ƒè·³ç›‘æ§</li>
</ul>
</li>
<li>EurekaClientï¼šå®¢æˆ·ç«¯<ul>
<li>providerï¼šæœåŠ¡æä¾›è€…ï¼Œä¾‹å¦‚æ¡ˆä¾‹ä¸­çš„ user-service<ul>
<li>æ³¨å†Œè‡ªå·±çš„ä¿¡æ¯åˆ° EurekaServer</li>
<li>æ¯éš” 30 ç§’å‘ EurekaServer å‘é€å¿ƒè·³</li>
</ul>
</li>
<li>consumerï¼šæœåŠ¡æ¶ˆè´¹è€…ï¼Œä¾‹å¦‚æ¡ˆä¾‹ä¸­çš„ order-service<ul>
<li>æ ¹æ®æœåŠ¡åç§°ä» EurekaServer æ‹‰å–æœåŠ¡åˆ—è¡¨</li>
<li>æ ¹æ®æœåŠ¡åˆ—è¡¨ä½œè´Ÿè½½å‡è¡¡ï¼Œé€‰ä¸€ä¸ªå¾®æœåŠ¡åå‘èµ·è¿œç¨‹è°ƒç”¨</li>
</ul>
</li>
</ul>
</li>
</ol>
<h5 id="æ­å»º-EuerkaServerï¼š"><a href="#æ­å»º-EuerkaServerï¼š" class="headerlink" title="æ­å»º EuerkaServerï¼š"></a>æ­å»º EuerkaServerï¼š</h5><ol>
<li>åˆ›å»ºé¡¹ç›®ï¼Œå¼•å…¥ spring-cloud-starter-netflix-eureka-server çš„ä¾èµ–</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™å¯åŠ¨ç±»ï¼Œæ·»åŠ  @EnableEurekaServer æ³¨è§£</li>
<li>æ·»åŠ  application.yml æ–‡ä»¶ï¼Œç¼–å†™ä¸‹é¢çš„é…ç½®ï¼š</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">10086</span> <span class="hljs-comment"># æœåŠ¡ç«¯å£</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">eurekaserver</span> <span class="hljs-comment"># eurekaçš„æœåŠ¡åç§°</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span>  <span class="hljs-comment"># eurekaçš„åœ°å€ä¿¡æ¯</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://127.0.0.1:10086/eureka</span><br></code></pre></td></tr></table></figure>

<h5 id="æ³¨å†Œ-user-serviceï¼š"><a href="#æ³¨å†Œ-user-serviceï¼š" class="headerlink" title="æ³¨å†Œ user-serviceï¼š"></a>æ³¨å†Œ user-serviceï¼š</h5><ol>
<li>åœ¨ user-service é¡¹ç›®å¼•å…¥ spring-cloud-starter-netflix-eureka-client çš„ä¾èµ–</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ol>
<li>åœ¨ application.yml æ–‡ä»¶ï¼Œç¼–å†™ä¸‹é¢çš„é…ç½®ï¼š</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">userserver</span> <span class="hljs-comment"># userçš„æœåŠ¡åç§°</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span>  <span class="hljs-comment"># userçš„åœ°å€ä¿¡æ¯</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://127.0.0.1:10086/eureka</span><br></code></pre></td></tr></table></figure>

<ol>
<li>å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥å°† user-service å¤šæ¬¡å¯åŠ¨ï¼Œæ¨¡æ‹Ÿå¤šå®ä¾‹éƒ¨ç½²ï¼Œä½†ä¸ºäº†é¿å…ç«¯å£å†²çªï¼Œéœ€è¦ä¿®æ”¹ç«¯å£è®¾ç½®ï¼š<br><code>Sericesçª—å£ä¸­ï¼Œé€‰ä¸­UserApplicationå³é”®ç‚¹å‡»Copy Configurationï¼›ä¿®æ”¹Environmentä¸­çš„VM optionsé¡¹ä¸ºï¼š-Dserver.port=8082</code></li>
</ol>
<h5 id="åœ¨-order-service-å®ŒæˆæœåŠ¡æ‹‰å–ï¼š"><a href="#åœ¨-order-service-å®ŒæˆæœåŠ¡æ‹‰å–ï¼š" class="headerlink" title="åœ¨ order-service å®ŒæˆæœåŠ¡æ‹‰å–ï¼š"></a>åœ¨ order-service å®ŒæˆæœåŠ¡æ‹‰å–ï¼š</h5><p>æœåŠ¡æ‹‰å–æ˜¯åŸºäºæœåŠ¡åç§°è·å–æœåŠ¡åˆ—è¡¨ï¼Œç„¶ååœ¨å¯¹æœåŠ¡åˆ—è¡¨åšè´Ÿè½½å‡è¡¡<br>\1. ä¿®æ”¹ OrderService çš„ä»£ç ï¼Œä¿®æ”¹è®¿é—®çš„ url è·¯å¾„ï¼Œç”¨æœåŠ¡åä»£æ›¿ ipã€ç«¯å£ï¼š<br><code>String url = &quot;http://userservice/user/&quot; + order.getUserId();</code></p>
<ol>
<li>åœ¨ order-service é¡¹ç›®çš„å¯åŠ¨ç±» OrderApplication ä¸­çš„ RestTemplate æ·»åŠ è´Ÿè½½å‡è¡¡æ³¨è§£ï¼š</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs Java"><span class="hljs-meta">@Bean</span><br><span class="hljs-meta">@LoadBalanced</span><br><span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title function_">restTemplate</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="Eureka-æ€»ç»“ï¼š"><a href="#Eureka-æ€»ç»“ï¼š" class="headerlink" title="Eureka æ€»ç»“ï¼š"></a>Eureka æ€»ç»“ï¼š</h5><ol>
<li>æ­å»º EurekaServer<ol>
<li>å¼•å…¥ eureka-server ä¾èµ–</li>
<li>æ·»åŠ  @EnableEurekaServer æ³¨è§£</li>
<li>åœ¨ application.yml ä¸­é…ç½® eureka åœ°å€</li>
</ol>
</li>
<li>æœåŠ¡æ³¨å†Œ<ol>
<li>å¼•å…¥ eureka-client ä¾èµ–</li>
<li>åœ¨ application.yml ä¸­é…ç½® eureka åœ°å€</li>
</ol>
</li>
<li>æœåŠ¡å‘ç°<ol>
<li>å¼•å…¥ eureka-client ä¾èµ–</li>
<li>åœ¨ application.yml ä¸­é…ç½® eureka åœ°å€</li>
<li>ç»™ RestTemplate æ·»åŠ  @LoadBelanced æ³¨è§£</li>
<li>ç”¨æœåŠ¡æä¾›è€…çš„æœåŠ¡åç§°è¿œç¨‹è°ƒç”¨</li>
</ol>
</li>
</ol>
<hr>
<h2 id="Ribbon-è´Ÿè½½å‡è¡¡ï¼š"><a href="#Ribbon-è´Ÿè½½å‡è¡¡ï¼š" class="headerlink" title="Ribbon è´Ÿè½½å‡è¡¡ï¼š"></a>Ribbon è´Ÿè½½å‡è¡¡ï¼š</h2><h5 id="è´Ÿè½½å‡è¡¡æµç¨‹ï¼š"><a href="#è´Ÿè½½å‡è¡¡æµç¨‹ï¼š" class="headerlink" title="è´Ÿè½½å‡è¡¡æµç¨‹ï¼š"></a>è´Ÿè½½å‡è¡¡æµç¨‹ï¼š</h5><figure class="highlight markdown"><table><tr><td class="code"><pre><code class="hljs markdown">oeder-service<br><span class="hljs-bullet">        1.</span> å‘èµ·è¯·æ±‚ï¼šhttp://userservice/user/1<br>åˆ°RibbonLoadBanlancerclient<br><span class="hljs-bullet">        2.</span> è·å–urlä¸­çš„æœåŠ¡idï¼šuserservicr<br>åˆ°DynamicServerListLoadBalancer<br><span class="hljs-bullet">        3.</span> æ‹‰å–userservice<br><span class="hljs-bullet">        4.</span> è¿”å›æœåŠ¡åˆ—è¡¨localhost:8081ã€localhost8082<br>åˆ°DynamicServerListLoadBalancer<br><span class="hljs-bullet">        5.</span> æœåŠ¡å™¨è´Ÿè½½å‡è¡¡localhost:8081ã€localhost8082<br>åˆ°IRule<br><span class="hljs-bullet">        6.</span> é€‰æ‹©æŸä¸ªæœåŠ¡localhost:8081<br>åˆ°RibbonLoadBanlancerclient<br><span class="hljs-bullet">        7.</span> ä¿®æ”¹urlï¼Œå‘èµ·è¯·æ±‚ï¼šhttp://localhost:8081/user/1<br><span class="hljs-bullet">        8.</span> è¯·æ±‚åˆ°8081æˆ–8082<br>åˆ°user-service8081æˆ–user-service8082<br></code></pre></td></tr></table></figure>

<h5 id="è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼š"><a href="#è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼š" class="headerlink" title="è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼š"></a>è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼š</h5><ol>
<li>RoundRobinRuleï¼š<br>ç®€å•è½®è¯¢æœåŠ¡åˆ—è¡¨æ¥é€‰æ‹©æœåŠ¡å™¨ã€‚å®ƒæ˜¯ Ribbon é»˜è®¤çš„è´Ÿè½½å‡è¡¡è§„åˆ™</li>
<li>AvailabilityFilteringRuleï¼š<ul>
<li>å¯¹ä»¥ä¸‹ä¸¤ç§æœåŠ¡å™¨è¿›è¡Œå¿½ç•¥ï¼š<ol>
<li>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™å°æœåŠ¡å™¨å¦‚æœ 3 æ¬¡è¿æ¥å¤±è´¥ï¼Œè¿™å°æœåŠ¡å™¨å°±ä¼šè¢«è®¾ç½®ä¸ºâ€ çŸ­è·¯â€ çŠ¶æ€ã€‚çŸ­è·¯çŠ¶æ€å°†æŒç»­ 30 ç§’ï¼Œå¦‚æœå†æ¬¡è¿æ¥å¤±è´¥ï¼ŒçŸ­è·¯çš„æŒç»­æ—¶é—´å°±ä¼šå‡ ä½•çº§åœ°å¢åŠ ã€‚</li>
<li>å¹¶å‘æ•°è¿‡é«˜çš„æœåŠ¡å™¨ã€‚å¦‚æœä¸€ä¸ªæœåŠ¡å™¨çš„å¹¶å‘è¿æ¥æ•°è¿‡é«˜ï¼Œé…ç½®äº† AvailabilityFilteringRule è§„åˆ™çš„å®¢æˆ·ç«¯ä¹Ÿä¼šå°†å…¶å¿½ç•¥ã€‚å¹¶å‘è¿æ¥æ•°çš„ä¸Šçº¿ï¼Œå¯ä»¥ç”±å®¢æˆ·ç«¯çš„ <code>&lt;clientName&gt;&lt;clientConfigNameSpace&gt;.ActiveConnectionsLimit</code> å±æ€§è¿›è¡Œé…ç½®ã€‚</li>
</ol>
</li>
</ul>
</li>
<li>WeightedResponseTimeRuleï¼š<ul>
<li>ä¸ºæ¯ä¸€ä¸ªæœåŠ¡å™¨èµ‹äºˆä¸€ä¸ªæƒé‡å€¼ã€‚æœåŠ¡å™¨å“åº”æ—¶é—´è¶Šé•¿ï¼Œè¿™ä¸ªæœåŠ¡å™¨çš„æƒé‡å€¼å°±è¶Šå°ã€‚è¿™ä¸ªè§„åˆ™ä¼šéšæœºé€‰æ‹©æœåŠ¡å™¨ï¼Œè¿™ä¸ªæƒé‡å€¼ä¼šå½±å“æœåŠ¡å™¨çš„é€‰æ‹©ã€‚</li>
</ul>
</li>
<li>ZoneAvoidanceRuleï¼š<ul>
<li>ä»¥åŒºåŸŸå¯ç”¨çš„æœåŠ¡å™¨ä¸ºåŸºç¡€è¿›è¡ŒæœåŠ¡å™¨çš„é€‰æ‹©ã€‚ä½¿ç”¨ Zone å¯¹æœåŠ¡å™¨è¿›è¡Œåˆ†ç±»ï¼Œè¿™ä¸ª Zone å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæœºæˆ¿ã€ä¸€ä¸ªæœºæ¶ç­‰ã€‚è€Œååœ¨å¯¹ Zone å†…çš„å¤šä¸ªæœåŠ¡åšè½®è¯¢ã€‚</li>
</ul>
</li>
<li>BestAvailableRuleï¼š<ul>
<li>å¿½ç•¥å“ªäº›çŸ­è·¯çš„æœåŠ¡å™¨ï¼Œå¹¶é€‰æ‹©å¹¶å‘æ•°è¾ƒä½çš„æœåŠ¡å™¨ã€‚</li>
</ul>
</li>
<li>RandomRuleï¼š<ul>
<li>éšæœºé€‰æ‹©ä¸€ä¸ªå¯ç”¨çš„æœåŠ¡å™¨ã€‚</li>
</ul>
</li>
<li>RetryRuleï¼š<ul>
<li>é‡è¯•æœºåˆ¶çš„é€‰æ‹©é€»è¾‘</li>
</ul>
</li>
</ol>
<h5 id="é€šè¿‡å®šä¹‰-IRule-å®ç°å¯ä»¥ä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š"><a href="#é€šè¿‡å®šä¹‰-IRule-å®ç°å¯ä»¥ä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š" class="headerlink" title="é€šè¿‡å®šä¹‰ IRule å®ç°å¯ä»¥ä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š"></a>é€šè¿‡å®šä¹‰ IRule å®ç°å¯ä»¥ä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</h5><ol>
<li>ä»£ç æ–¹å¼ï¼šåœ¨ order-service ä¸­çš„ OrderApplication ç±»ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªæ–°çš„ IRuleï¼š</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-keyword">public</span> IRule <span class="hljs-title function_">randomRule</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RandomRule</span>();<br>&#125;<br></code></pre></td></tr></table></figure>

<ol>
<li>é…ç½®æ–‡ä»¶æ–¹å¼ï¼šåœ¨ order-service çš„ application.yml æ–‡ä»¶ä¸­ï¼Œæ·»åŠ æ–°çš„é…ç½®ä¹Ÿå¯ä»¥ä¿®æ”¹è§„åˆ™ï¼š</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">userservice:</span><br>  <span class="hljs-attr">ribbon:</span> <br>    <span class="hljs-string">NFLoadBalancerRuleClassName:com.netflix.loadbalancer.RandomRule</span> <span class="hljs-comment">#è´Ÿè½½å‡è¡¡è§„åˆ™</span><br></code></pre></td></tr></table></figure>

<h5 id="é¥¥é¥¿åŠ è½½ï¼š"><a href="#é¥¥é¥¿åŠ è½½ï¼š" class="headerlink" title="é¥¥é¥¿åŠ è½½ï¼š"></a>é¥¥é¥¿åŠ è½½ï¼š</h5><p>Ribbon é»˜è®¤æ˜¯é‡‡ç”¨æ‡’åŠ è½½ï¼Œå³ç¬¬ä¸€æ¬¡è®¿é—®æ—¶æ‰ä¼šå»åˆ›å»º LoadBalanceClientï¼Œè¯·æ±‚æ—¶é—´ä¼šå¾ˆé•¿ã€‚<br>è€Œé¥¥é¥¿åŠ è½½åˆ™ä¼šåœ¨é¡¹ç›®å¯åŠ¨æ—¶åˆ›å»ºï¼Œé™ä½ç¬¬ä¸€æ¬¡è®¿é—®çš„è€—æ—¶ï¼Œé€šè¿‡ä¸‹é¢é…ç½®å¼€å¯é¥¥é¥¿åŠ è½½ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">ribbon:</span><br>  <span class="hljs-attr">eager-load:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-string">ture</span> <span class="hljs-comment"># å¼€å¯é¥¥é¥¿åŠ è½½</span><br>    <span class="hljs-attr">clients:</span> <span class="hljs-string">userservice</span> <span class="hljs-comment"># æŒ‡å®šå¯¹userserviceè¿™ä¸ªæœåŠ¡é¥¥é¥¿åŠ è½½</span><br></code></pre></td></tr></table></figure>

<h5 id="Ribbon-æ€»ç»“ï¼š"><a href="#Ribbon-æ€»ç»“ï¼š" class="headerlink" title="Ribbon æ€»ç»“ï¼š"></a>Ribbon æ€»ç»“ï¼š</h5><ol>
<li>Ribbon è´Ÿè½½å‡è¡¡è§„åˆ™ï¼š<ol>
<li>è§„åˆ™æ¥å£æ˜¯ IRule</li>
<li>é»˜è®¤å®ç°æ˜¯ ZoneAvoidanceRuleï¼Œæ ¹æ® zone é€‰æ‹©æœåŠ¡åˆ—è¡¨ï¼Œç„¶åè½®è¯¢</li>
</ol>
</li>
<li>è´Ÿè½½å‡è¡¡è‡ªå®šä¹‰æ–¹å¼ï¼š<ol>
<li>ä»£ç æ–¹å¼ï¼šé…ç½®çµæ´»ï¼Œä½†ä¿®æ”¹æ—¶éœ€è¦é‡æ–°æ‰“åŒ…å‘å¸ƒ</li>
<li>é…ç½®æ–¹å¼ï¼šåªç®¡ï¼Œæ–¹ä¾¿ï¼Œæ— éœ€é‡æ–°æ‰“åŒ…å‘å¸ƒï¼Œä½†æ˜¯æ— æ³•åšå…¨å±€é…ç½®</li>
</ol>
</li>
<li>é¥¥é¥¿åŠ è½½ï¼š<ol>
<li>å¼€å¯é¥¥é¥¿åŠ è½½</li>
<li>æŒ‡å®šé¥¥é¥¿åŠ è½½çš„å¾®æœåŠ¡åç§°</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>å¾®æœåŠ¡</category>
      </categories>
  </entry>
  <entry>
    <title>UMLè¯¾è®¾</title>
    <url>/2024/11/17/UML%E8%AF%BE%E8%AE%BE/</url>
    <content><![CDATA[<p>è¯¾é¢˜ï¼š</p>
<p>åˆ©ç”¨é¢å‘å¯¹è±¡æ€ç»´ä¸Pythonè¯­è¨€ï¼Œè®¾è®¡ä¸€ä¸ªä»¿çœŸç³»ç»Ÿ<br>1.è®¾è®¡æ€è·¯æ±‡æŠ¥<br>2.ç¼–ç¨‹å®ç°</p>
<p>ç³»ç»Ÿåç§°ï¼šæŠ•å¸å¼é¥®æ–™è‡ªåŠ©å”®å–æœºç³»ç»Ÿ</p>
<p><strong>Pythonä»£ç å®ç°</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> tkinter <span class="hljs-keyword">as</span> tk<br><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> messagebox, simpledialog<br><br><span class="hljs-comment"># ç”¨æˆ·åŸºç±»ï¼ŒåŒ…å«å…±æœ‰å±æ€§å’Œæ–¹æ³•</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>:<br>    total_time_spent = <span class="hljs-number">0</span>  <span class="hljs-comment"># è®°å½•æ‰€æœ‰ç”¨æˆ·çš„æ€»è€—æ—¶æ—¶é—´</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name</span>):<br>        <span class="hljs-comment"># åˆå§‹åŒ–ç”¨æˆ·çš„åå­—</span><br>        <span class="hljs-variable language_">self</span>.name = name<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_time_spent</span>(<span class="hljs-params">cls, time_spent</span>):<br>        <span class="hljs-comment"># ç±»æ–¹æ³•ï¼Œç”¨äºç´¯åŠ æ“ä½œçš„è€—æ—¶</span><br>        cls.total_time_spent += time_spent  <span class="hljs-comment"># å¢åŠ è€—æ—¶æ—¶é—´</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ“ä½œè€—æ—¶ï¼š<span class="hljs-subst">&#123;time_spent&#125;</span>ç§’ï¼Œç´¯è®¡è€—æ—¶ï¼š<span class="hljs-subst">&#123;cls.total_time_spent&#125;</span>ç§’ã€‚&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">browse_drinks</span>(<span class="hljs-params">self, vending_machine, time_spent=<span class="hljs-number">20</span></span>):<br>        <span class="hljs-comment"># ç”¨æˆ·æµè§ˆé¥®æ–™çš„æ–¹æ³•</span><br>        vending_machine.browse_drinks()  <span class="hljs-comment"># è°ƒç”¨å”®å–æœºçš„æµè§ˆé¥®æ–™æ–¹æ³•</span><br>        User.add_time_spent(time_spent)  <span class="hljs-comment"># ç´¯åŠ æµè§ˆé¥®æ–™çš„è€—æ—¶</span><br><br><span class="hljs-comment"># é¡¾å®¢ç±»ï¼Œç»§æ‰¿è‡ªç”¨æˆ·ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Customer</span>(<span class="hljs-title class_ inherited__">User</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, customer_id</span>):<br>        <span class="hljs-built_in">super</span>().__init__(name)  <span class="hljs-comment"># è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•åˆå§‹åŒ–åå­—</span><br>        <span class="hljs-variable language_">self</span>.customer_id = customer_id  <span class="hljs-comment"># åˆå§‹åŒ–é¡¾å®¢ID</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">browse_drinks</span>(<span class="hljs-params">self, vending_machine</span>):<br>        <span class="hljs-built_in">super</span>().browse_drinks(vending_machine)  <span class="hljs-comment"># è°ƒç”¨çˆ¶ç±»çš„æµè§ˆé¥®æ–™æ–¹æ³•</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">buy_drink</span>(<span class="hljs-params">self, drink_name, coin_value, vending_machine, time_spent=<span class="hljs-number">5</span></span>):<br>        <span class="hljs-comment">#é¡¾å®¢è´­ä¹°é¥®æ–™çš„æ–¹æ³•</span><br>        <span class="hljs-keyword">if</span> drink_name <span class="hljs-keyword">in</span> vending_machine.drinks:  <span class="hljs-comment"># æ£€æŸ¥é¥®æ–™æ˜¯å¦å­˜åœ¨</span><br>            drink = vending_machine.drinks[drink_name]<br>            <span class="hljs-keyword">if</span> drink.quantity &gt; <span class="hljs-number">0</span>:  <span class="hljs-comment"># æ£€æŸ¥åº“å­˜</span><br>                <span class="hljs-keyword">if</span> coin_value &gt;= drink.price:  <span class="hljs-comment"># æ£€æŸ¥æ”¯ä»˜æ˜¯å¦è¶³å¤Ÿ</span><br>                    change = coin_value - drink.price<br>                    <span class="hljs-keyword">if</span> change == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> vending_machine.calculate_change(change):  <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦å¯ä»¥æ‰¾é›¶</span><br>                        drink.quantity -= <span class="hljs-number">1</span>  <span class="hljs-comment"># å‡å°‘åº“å­˜</span><br>                        vending_machine.save_drinks()  <span class="hljs-comment"># ä¿å­˜é¥®æ–™ä¿¡æ¯</span><br>                        vending_machine.save_transaction(coin_value)  <span class="hljs-comment"># ä¿å­˜äº¤æ˜“ä¿¡æ¯</span><br>                        User.add_time_spent(time_spent)  <span class="hljs-comment"># è®°å½•è€—æ—¶</span><br>                        <span class="hljs-keyword">if</span> change &gt; <span class="hljs-number">0</span>:<br>                            vending_machine.distribute_change(change)  <span class="hljs-comment"># å‘æ”¾æ‰¾é›¶</span><br>                            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>, change  <span class="hljs-comment"># è¿”å›æˆåŠŸå’Œæ‰¾é›¶é‡‘é¢</span><br>                        <span class="hljs-keyword">else</span>:<br>                            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>, <span class="hljs-number">0</span>  <span class="hljs-comment"># è¿”å›æˆåŠŸå’Œ0æ‰¾é›¶</span><br>                    <span class="hljs-keyword">else</span>:<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ— æ³•æ‰¾é›¶ï¼Œè¯·å°è¯•å…¶ä»–é¢é¢çš„ç¡¬å¸ã€‚&quot;</span>)<br>                        User.add_time_spent(time_spent)<br>                        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-number">0</span><br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;èµ„é‡‘ä¸è¶³ï¼Œè¯·å¢åŠ ç¡¬å¸æ•°é‡ã€‚&quot;</span>)<br>                    User.add_time_spent(time_spent)<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-number">0</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;é¥®æ–™ç¼ºè´§ã€‚&quot;</span>)<br>                User.add_time_spent(time_spent)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-number">0</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æœªæ‰¾åˆ°é¥®æ–™ã€‚&quot;</span>)<br>            User.add_time_spent(time_spent)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-number">0</span><br><br><span class="hljs-comment"># ç®¡ç†å‘˜ç±»ï¼Œç»§æ‰¿è‡ªç”¨æˆ·ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Admin</span>(<span class="hljs-title class_ inherited__">User</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, admin_id, password</span>):<br>        <span class="hljs-built_in">super</span>().__init__(name)  <span class="hljs-comment"># è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•åˆå§‹åŒ–åå­—</span><br>        <span class="hljs-variable language_">self</span>.admin_id = admin_id  <span class="hljs-comment"># åˆå§‹åŒ–ç®¡ç†å‘˜ID</span><br>        <span class="hljs-variable language_">self</span>.password = password  <span class="hljs-comment"># åˆå§‹åŒ–ç®¡ç†å‘˜å¯†ç </span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">self, admin_id, password, time_spent=<span class="hljs-number">3</span></span>):<br>        <span class="hljs-comment"># ç®¡ç†å‘˜ç™»å½•</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.admin_id == <span class="hljs-string">&quot;admin&quot;</span> <span class="hljs-keyword">and</span> <span class="hljs-variable language_">self</span>.password == <span class="hljs-string">&quot;admin&quot;</span>:  <span class="hljs-comment"># éªŒè¯ç®¡ç†å‘˜å‡­è¯</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç®¡ç†å‘˜ç™»å½•æˆåŠŸã€‚&quot;</span>)<br>            User.add_time_spent(time_spent)  <span class="hljs-comment"># ç´¯åŠ ç™»å½•æ—¶é—´</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç®¡ç†å‘˜å‡­è¯æ— æ•ˆã€‚&quot;</span>)<br>            User.add_time_spent(time_spent)  <span class="hljs-comment"># ç´¯åŠ æ—¶é—´</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">replenish_drink</span>(<span class="hljs-params">self, drink_name, quantity, price, vending_machine, time_spent=<span class="hljs-number">3</span></span>):<br>        <span class="hljs-comment"># ç®¡ç†å‘˜è¡¥å……é¥®æ–™</span><br>        vending_machine.add_drink(Drink(drink_name, quantity, price))  <span class="hljs-comment"># å°†é¥®æ–™æ·»åŠ åˆ°å”®å–æœº</span><br>        vending_machine.save_drinks()  <span class="hljs-comment"># ä¿å­˜é¥®æ–™ä¿¡æ¯</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è¡¥å……é¥®æ–™åº“å­˜æˆåŠŸã€‚&quot;</span>)<br>        User.add_time_spent(time_spent)  <span class="hljs-comment"># ç´¯åŠ æ—¶é—´</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">replenish_change</span>(<span class="hljs-params">self, coin_denomination, quantity, vending_machine, time_spent=<span class="hljs-number">2</span></span>):<br>        <span class="hljs-comment"># ç®¡ç†å‘˜è¡¥å……æ‰¾é›¶ç¡¬å¸</span><br>        <span class="hljs-keyword">if</span> coin_denomination <span class="hljs-keyword">in</span> vending_machine.coins:<br>            vending_machine.coins[coin_denomination].set_total(<br>                vending_machine.coins[coin_denomination].total + quantity)  <span class="hljs-comment"># æ›´æ–°ç¡¬å¸æ•°é‡</span><br>        <span class="hljs-keyword">else</span>:<br>            vending_machine.add_coin(Coin(coin_denomination))  <span class="hljs-comment"># æ–°å¢ç¡¬å¸é¢é¢</span><br>            vending_machine.coins[coin_denomination].set_total(quantity)  <span class="hljs-comment"># è®¾ç½®æ•°é‡</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è¡¥å……æ‰¾é›¶ç¡¬å¸æˆåŠŸã€‚&quot;</span>)<br>        User.add_time_spent(time_spent)  <span class="hljs-comment"># ç´¯åŠ æ—¶é—´</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">collect_coins</span>(<span class="hljs-params">self, vending_machine, time_spent=<span class="hljs-number">10</span></span>):<br>        <span class="hljs-comment"># æå–ç¡¬å¸</span><br>        collected_coins = vending_machine.collect_income_from_file()  <span class="hljs-comment"># ä»æ–‡ä»¶æ”¶å–ç¡¬å¸</span><br>        vending_machine.delete_income_file()  <span class="hljs-comment"># åˆ é™¤æ”¶å…¥æ–‡ä»¶</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å·²æå–<span class="hljs-subst">&#123;collected_coins&#125;</span>å…ƒç¡¬å¸ã€‚&quot;</span>)<br>        User.add_time_spent(time_spent)  <span class="hljs-comment"># ç´¯åŠ æ—¶é—´</span><br>        <span class="hljs-keyword">return</span> collected_coins<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_drink_price</span>(<span class="hljs-params">self, drink_name, price, vending_machine, time_spent=<span class="hljs-number">2</span></span>):<br>        <span class="hljs-comment"># è®¾å®šé¥®æ–™ä»·æ ¼</span><br>        <span class="hljs-keyword">if</span> drink_name <span class="hljs-keyword">in</span> vending_machine.drinks:<br>            vending_machine.drinks[drink_name].set_price(price)  <span class="hljs-comment"># è®¾ç½®é¥®æ–™æ–°ä»·æ ¼</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;drink_name&#125;</span>çš„ä»·æ ¼å·²è®¾å®šä¸º<span class="hljs-subst">&#123;price&#125;</span>&quot;</span>)<br>            User.add_time_spent(time_spent)  <span class="hljs-comment"># ç´¯åŠ æ—¶é—´</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>  <span class="hljs-comment"># è¿”å›Trueè¡¨ç¤ºæˆåŠŸè®¾ç½®ä»·æ ¼</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æœªæ‰¾åˆ°é¥®æ–™ï¼Œæ— æ³•è®¾ç½®ä»·æ ¼ã€‚&quot;</span>)<br>            User.add_time_spent(time_spent)  <span class="hljs-comment"># ç´¯åŠ æ—¶é—´</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>  <span class="hljs-comment"># è¿”å›Falseè¡¨ç¤ºæœªæ‰¾åˆ°é¥®æ–™</span><br><br><span class="hljs-comment"># é¥®æ–™ç±»ï¼Œæè¿°é¥®æ–™çš„å±æ€§å’Œè¡Œä¸º</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Drink</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, quantity, price</span>):<br>        <span class="hljs-variable language_">self</span>.name = name  <span class="hljs-comment"># é¥®æ–™åç§°</span><br>        <span class="hljs-variable language_">self</span>.quantity = quantity  <span class="hljs-comment"># é¥®æ–™æ•°é‡</span><br>        <span class="hljs-variable language_">self</span>.price = price  <span class="hljs-comment"># é¥®æ–™ä»·æ ¼</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_price</span>(<span class="hljs-params">self, price</span>):<br>        <span class="hljs-comment"># è®¾å®šé¥®æ–™ä»·æ ¼</span><br>        <span class="hljs-variable language_">self</span>.price = price  <span class="hljs-comment"># æ›´æ–°ä»·æ ¼</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_name</span>(<span class="hljs-params">self, name</span>):<br>        <span class="hljs-comment"># è®¾å®šé¥®æ–™åç§°</span><br>        <span class="hljs-variable language_">self</span>.name = name<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_quantity</span>(<span class="hljs-params">self, quantity</span>):<br>        <span class="hljs-comment"># è®¾å®šé¥®æ–™æ•°é‡</span><br>        <span class="hljs-variable language_">self</span>.quantity = quantity<br><br><span class="hljs-comment"># ç¡¬å¸ç±»ï¼Œæè¿°ç¡¬å¸çš„å±æ€§å’Œè¡Œä¸º</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Coin</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, denomination</span>):<br>        <span class="hljs-variable language_">self</span>.denomination = denomination  <span class="hljs-comment"># ç¡¬å¸é¢é¢</span><br>        <span class="hljs-variable language_">self</span>.total = <span class="hljs-number">0</span>  <span class="hljs-comment"># ç¡¬å¸æ•°é‡</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_denomination</span>(<span class="hljs-params">self, denomination</span>):<br>        <span class="hljs-variable language_">self</span>.denomination = denomination  <span class="hljs-comment"># è®¾å®šç¡¬å¸é¢é¢</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_total</span>(<span class="hljs-params">self, total</span>):<br>        <span class="hljs-variable language_">self</span>.total = total  <span class="hljs-comment"># è®¾å®šç¡¬å¸æ•°é‡</span><br><br><span class="hljs-comment"># å”®å–æœºç±»ï¼Œç®¡ç†é¥®æ–™ã€ç¡¬å¸ä»¥åŠæ”¶å…¥</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">VendingMachine</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-variable language_">self</span>.drinks = &#123;&#125;  <span class="hljs-comment"># é¥®æ–™åº“å­˜</span><br>        <span class="hljs-variable language_">self</span>.coins = &#123;&#125;  <span class="hljs-comment"># æ‰¾é›¶ç¡¬å¸æ•°é‡</span><br>        <span class="hljs-variable language_">self</span>.total_income = <span class="hljs-number">0</span>  <span class="hljs-comment"># æ€»æ”¶å…¥</span><br>        <span class="hljs-variable language_">self</span>.load_drinks()  <span class="hljs-comment"># åŠ è½½é¥®æ–™ä¿¡æ¯ï¼Œè¯»å–æ–‡ä»¶ä¸­çš„é¥®æ–™ä¿¡æ¯</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_drink</span>(<span class="hljs-params">self, drink</span>):<br>        <span class="hljs-comment"># æ·»åŠ é¥®æ–™åˆ°åº“å­˜</span><br>        <span class="hljs-variable language_">self</span>.drinks[drink.name] = drink<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_coin</span>(<span class="hljs-params">self, coin</span>):<br>        <span class="hljs-comment"># æ·»åŠ æ‰¾é›¶ç¡¬å¸</span><br>        <span class="hljs-keyword">if</span> coin.denomination <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.coins:<br>            <span class="hljs-variable language_">self</span>.coins[coin.denomination].total += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-variable language_">self</span>.coins[coin.denomination] = coin<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">browse_drinks</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># æ˜¾ç¤ºå”®å–æœºé¥®æ–™ä¸­çš„é¥®æ–™åˆ—è¡¨</span><br>        drink_list = <span class="hljs-string">&quot;\n&quot;</span>.join([<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span>: åº“å­˜<span class="hljs-subst">&#123;drink.quantity&#125;</span>ï¼Œä»·æ ¼ï¼š<span class="hljs-subst">&#123;drink.price&#125;</span>&quot;</span><br>                                <span class="hljs-keyword">for</span> name, drink <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.drinks.items()])<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> drink_list:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç›®å‰å”®å–æœºæ²¡æœ‰é¥®æ–™ã€‚&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç›®å‰å¯è´­ä¹°çš„é¥®æ–™åˆ—è¡¨ï¼š&quot;</span>)<br>            <span class="hljs-built_in">print</span>(drink_list)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">save_drinks</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># å°†é¥®æ–™ä¿¡æ¯ä¿å­˜åˆ°æ–‡ä»¶</span><br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;drinks.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>            <span class="hljs-keyword">for</span> name, drink <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.drinks.items():<br>                f.write(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span>,<span class="hljs-subst">&#123;drink.quantity&#125;</span>,<span class="hljs-subst">&#123;drink.price&#125;</span>\n&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">load_drinks</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># ä»æ–‡ä»¶åŠ è½½é¥®æ–™ä¿¡æ¯</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;drinks.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>                <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f:<br>                    name, quantity, price = line.strip().split(<span class="hljs-string">&#x27;,&#x27;</span>)<br>                    <span class="hljs-variable language_">self</span>.add_drink(Drink(name, <span class="hljs-built_in">int</span>(quantity), <span class="hljs-built_in">float</span>(price)))<br>        <span class="hljs-keyword">except</span> FileNotFoundError:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç›®å‰å”®å–æœºæ²¡æœ‰é¥®æ–™ã€‚&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_change</span>(<span class="hljs-params">self, change</span>):<br>        <span class="hljs-comment"># è®¡ç®—æ‰¾é›¶</span><br>        sorted_denominations = <span class="hljs-built_in">sorted</span>(<span class="hljs-variable language_">self</span>.coins.keys(), reverse=<span class="hljs-literal">True</span>)  <span class="hljs-comment"># æŒ‰ç¡¬å¸é¢é¢é™åºæ’åˆ—</span><br>        <span class="hljs-keyword">for</span> denomination <span class="hljs-keyword">in</span> sorted_denominations:<br>            coins_to_give = <span class="hljs-built_in">min</span>(<span class="hljs-built_in">int</span>(change // denomination), <span class="hljs-variable language_">self</span>.coins[denomination].total)<br>            <span class="hljs-keyword">if</span> coins_to_give &gt; <span class="hljs-number">0</span>:<br>                <span class="hljs-variable language_">self</span>.coins[denomination].total -= coins_to_give<br>                change -= coins_to_give * denomination<br>            <span class="hljs-keyword">if</span> change == <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">distribute_change</span>(<span class="hljs-params">self, change</span>):<br>        <span class="hljs-comment"># åˆ†å‘æ‰¾é›¶ç¡¬å¸</span><br>        sorted_denominations = <span class="hljs-built_in">sorted</span>(<span class="hljs-variable language_">self</span>.coins.keys(), reverse=<span class="hljs-literal">True</span>)<br>        <span class="hljs-keyword">for</span> denomination <span class="hljs-keyword">in</span> sorted_denominations:<br>            coins_to_give = <span class="hljs-built_in">min</span>(<span class="hljs-built_in">int</span>(change // denomination), <span class="hljs-variable language_">self</span>.coins[denomination].total)<br>            <span class="hljs-keyword">if</span> coins_to_give &gt; <span class="hljs-number">0</span>:<br>                <span class="hljs-variable language_">self</span>.coins[denomination].total -= coins_to_give<br>                change -= coins_to_give * denomination<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å‘æ”¾é¢é¢ <span class="hljs-subst">&#123;denomination&#125;</span> å…ƒçš„ç¡¬å¸ <span class="hljs-subst">&#123;coins_to_give&#125;</span> æš&quot;</span>)<br>        <span class="hljs-keyword">return</span> change == <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">save_transaction</span>(<span class="hljs-params">self, coin_value</span>):<br>        <span class="hljs-comment"># ä¿å­˜äº¤æ˜“è®°å½•åˆ°æ–‡ä»¶</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;income.txt&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>                f.write(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;coin_value&#125;</span>\n&quot;</span>)<br>            <span class="hljs-variable language_">self</span>.total_income += coin_value<br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å†™å…¥æ–‡ä»¶æ—¶å‘ç”Ÿé”™è¯¯ï¼š<span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">collect_income_from_file</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># ä»æ–‡ä»¶è®¡ç®—æ”¶å…¥æ€»å’Œ</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;income.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>                income = <span class="hljs-built_in">sum</span>(<span class="hljs-built_in">float</span>(line.strip()) <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f)<br>            <span class="hljs-keyword">return</span> income<br>        <span class="hljs-keyword">except</span> FileNotFoundError:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æœªæŸ¥è¯¢åˆ°æ”¶å…¥ã€‚&quot;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">delete_income_file</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># åˆ é™¤æ”¶å…¥æ–‡ä»¶</span><br>        <span class="hljs-keyword">try</span>:<br>            os.remove(<span class="hljs-string">&#x27;income.txt&#x27;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å½“å‰å°†ç”¨æˆ·æŠ•å…¥çš„æ‰€æœ‰ç¡¬å¸å…¨éƒ¨æå–å‡ºæ¥ã€‚&quot;</span>)<br>        <span class="hljs-keyword">except</span> FileNotFoundError:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ²¡æœ‰ç¡¬å¸å¯æå–ã€‚&quot;</span>)<br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;åˆ é™¤æ–‡ä»¶æ—¶å‘ç”Ÿé”™è¯¯ï¼š<span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># å¯è§†åŒ–ç•Œé¢éƒ¨åˆ†</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GUI</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, master, vending_machine, customer, admin</span>):<br>        <span class="hljs-comment"># åˆå§‹åŒ–å›¾å½¢ç•Œé¢çš„æ„é€ æ–¹æ³•</span><br>        <span class="hljs-variable language_">self</span>.master = master<br>        <span class="hljs-variable language_">self</span>.master.title(<span class="hljs-string">&quot;æŠ•å¸å¼é¥®æ–™è‡ªåŠ©å”®å–æœºç³»ç»Ÿ&quot;</span>)<br>        <span class="hljs-variable language_">self</span>.vending_machine = vending_machine<br>        <span class="hljs-variable language_">self</span>.customer = customer<br>        <span class="hljs-variable language_">self</span>.admin = admin<br><br>        <span class="hljs-comment"># åˆ›å»ºçª—å£é¡¶éƒ¨çš„æ ‡é¢˜æ ‡ç­¾</span><br>        title_label = tk.Label(master, text=<span class="hljs-string">&quot;æŠ•å¸å¼é¥®æ–™è‡ªåŠ©å”®å–æœºç³»ç»Ÿ&quot;</span>, font=(<span class="hljs-string">&quot;Arial&quot;</span>, <span class="hljs-number">16</span>, <span class="hljs-string">&quot;bold&quot;</span>))<br>        title_label.pack(pady=<span class="hljs-number">10</span>)  <span class="hljs-comment"># æ”¾ç½®æ ‡é¢˜æ ‡ç­¾ï¼Œå¹¶åœ¨å‚ç›´æ–¹å‘ä¸Šæ·»åŠ å¤–è¾¹è·</span><br><br>        <span class="hljs-comment"># åˆ›å»ºæ“ä½œæŒ‰é’®</span><br>        <span class="hljs-variable language_">self</span>.browse_button = tk.Button(master, text=<span class="hljs-string">&quot;æµè§ˆé¥®æ–™&quot;</span>, command=<span class="hljs-variable language_">self</span>.browse_drinks)<br>        <span class="hljs-variable language_">self</span>.browse_button.pack(pady=<span class="hljs-number">10</span>)<br><br>        <span class="hljs-variable language_">self</span>.buy_button = tk.Button(master, text=<span class="hljs-string">&quot;è´­ä¹°é¥®æ–™&quot;</span>, command=<span class="hljs-variable language_">self</span>.buy_drink)<br>        <span class="hljs-variable language_">self</span>.buy_button.pack(pady=<span class="hljs-number">10</span>)<br><br>        <span class="hljs-variable language_">self</span>.admin_button = tk.Button(master, text=<span class="hljs-string">&quot;ç®¡ç†å‘˜ç™»å½•&quot;</span>, command=<span class="hljs-variable language_">self</span>.admin_login)<br>        <span class="hljs-variable language_">self</span>.admin_button.pack(pady=<span class="hljs-number">10</span>)<br><br>        <span class="hljs-variable language_">self</span>.quit_button = tk.Button(master, text=<span class="hljs-string">&quot;é€€å‡º&quot;</span>, command=master.quit)<br>        <span class="hljs-variable language_">self</span>.quit_button.pack(pady=<span class="hljs-number">10</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">browse_drinks</span>(<span class="hljs-params">self</span>):<br>        start_time = time.time()  <span class="hljs-comment"># è®°å½•å¼€å§‹æ—¶é—´</span><br>        drink_list = <span class="hljs-string">&quot;&quot;</span><br>        <span class="hljs-keyword">for</span> name, drink <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.vending_machine.drinks.items():<br>            drink_list += <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span>: åº“å­˜<span class="hljs-subst">&#123;drink.quantity&#125;</span>ï¼Œä»·æ ¼ï¼š<span class="hljs-subst">&#123;drink.price&#125;</span>\n&quot;</span><br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> drink_list:<br>            drink_list = <span class="hljs-string">&quot;ç›®å‰å”®å–æœºæ²¡æœ‰é¥®æ–™ã€‚&quot;</span><br><br>        messagebox.showinfo(<span class="hljs-string">&quot;æµè§ˆé¥®æ–™&quot;</span>, drink_list)<br>        end_time = time.time()  <span class="hljs-comment"># è®°å½•ç»“æŸæ—¶é—´</span><br>        elapsed_time = end_time - start_time<br>        elapsed_time = <span class="hljs-built_in">round</span>(elapsed_time)<br>        User.add_time_spent(elapsed_time)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">buy_drink</span>(<span class="hljs-params">self</span>):<br>        drink_name = simpledialog.askstring(<span class="hljs-string">&quot;è´­ä¹°é¥®æ–™&quot;</span>, <span class="hljs-string">&quot;è¯·è¾“å…¥é¥®æ–™åç§°ï¼š&quot;</span>)<br>        coin_value = simpledialog.askfloat(<span class="hljs-string">&quot;è´­ä¹°é¥®æ–™&quot;</span>, <span class="hljs-string">&quot;è¯·è¾“å…¥æŠ•å…¥ç¡¬å¸çš„é‡‘é¢ï¼š&quot;</span>)<br><br>        success, change = <span class="hljs-variable language_">self</span>.customer.buy_drink(drink_name, coin_value, <span class="hljs-variable language_">self</span>.vending_machine)<br>        <span class="hljs-keyword">if</span> success:<br>            <span class="hljs-keyword">if</span> change &gt; <span class="hljs-number">0</span>:<br>                messagebox.showinfo(<span class="hljs-string">&quot;è´­ä¹°æˆåŠŸ&quot;</span>, <span class="hljs-string">f&quot;è´­ä¹°æˆåŠŸï¼å‘æ”¾æ‰¾é›¶ï¼š<span class="hljs-subst">&#123;change&#125;</span>å…ƒã€‚&quot;</span>)<br>            <span class="hljs-keyword">else</span>:<br>                messagebox.showinfo(<span class="hljs-string">&quot;è´­ä¹°æˆåŠŸ&quot;</span>, <span class="hljs-string">&quot;è´­ä¹°æˆåŠŸï¼ä¸éœ€è¦æ‰¾é›¶ã€‚&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            messagebox.showerror(<span class="hljs-string">&quot;è´­ä¹°å¤±è´¥&quot;</span>, <span class="hljs-string">&quot;è´­ä¹°å¤±è´¥ï¼Œè¯·æ£€æŸ¥é¥®æ–™æ˜¯å¦æœ‰è´§æˆ–ç¡¬å¸é‡‘é¢æ˜¯å¦è¶³å¤Ÿã€‚&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">admin_login</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># ç®¡ç†å‘˜ç™»å½•å¤„ç†</span><br>        login_window = tk.Toplevel(<span class="hljs-variable language_">self</span>.master)<br>        login_window.title(<span class="hljs-string">&quot;ç®¡ç†å‘˜ç™»å½•&quot;</span>)<br><br>        tk.Label(login_window, text=<span class="hljs-string">&quot;ç®¡ç†å‘˜ID:&quot;</span>).pack(pady=<span class="hljs-number">5</span>)<br>        admin_id = tk.Entry(login_window)<br>        admin_id.pack(pady=<span class="hljs-number">5</span>)<br><br>        tk.Label(login_window, text=<span class="hljs-string">&quot;ç®¡ç†å‘˜å¯†ç :&quot;</span>).pack(pady=<span class="hljs-number">5</span>)<br>        password = tk.Entry(login_window, show=<span class="hljs-string">&quot;*&quot;</span>)<br>        password.pack(pady=<span class="hljs-number">5</span>)<br><br>        login_button = tk.Button(login_window, text=<span class="hljs-string">&quot;ç™»å½•&quot;</span>,<br>                                 command=<span class="hljs-keyword">lambda</span>: <span class="hljs-variable language_">self</span>.admin_actions(admin_id.get(), password.get()))<br>        login_button.pack(pady=<span class="hljs-number">10</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">admin_actions</span>(<span class="hljs-params">self, admin_id, password</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.admin.login(admin_id, password):<br>            <span class="hljs-variable language_">self</span>.admin_menu()<br>        <span class="hljs-keyword">else</span>:<br>            messagebox.showerror(<span class="hljs-string">&quot;ç™»å½•å¤±è´¥&quot;</span>, <span class="hljs-string">&quot;ç®¡ç†å‘˜å‡­è¯æ— æ•ˆï¼Œè¯·é‡è¯•ã€‚&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">admin_menu</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># ç®¡ç†å‘˜æ“ä½œèœå•</span><br>        menu_window = tk.Toplevel(<span class="hljs-variable language_">self</span>.master)<br>        menu_window.title(<span class="hljs-string">&quot;ç®¡ç†å‘˜æ“ä½œ&quot;</span>)<br><br>        replenish_drinks_button = tk.Button(menu_window, text=<span class="hljs-string">&quot;è¡¥å……é¥®æ–™&quot;</span>, command=<span class="hljs-variable language_">self</span>.replenish_drinks)<br>        replenish_drinks_button.pack(pady=<span class="hljs-number">10</span>)<br><br>        batch_import_button = tk.Button(menu_window, text=<span class="hljs-string">&quot;æ‰¹é‡è¡¥å……é¥®æ–™&quot;</span>, command=<span class="hljs-variable language_">self</span>.batch_import_drinks)<br>        batch_import_button.pack(pady=<span class="hljs-number">10</span>)<br><br>        replenish_change_button = tk.Button(menu_window, text=<span class="hljs-string">&quot;è¡¥å……æ‰¾é›¶ç¡¬å¸&quot;</span>, command=<span class="hljs-variable language_">self</span>.replenish_change)<br>        replenish_change_button.pack(pady=<span class="hljs-number">10</span>)<br><br>        collect_coins_button = tk.Button(menu_window, text=<span class="hljs-string">&quot;æå–ç¡¬å¸&quot;</span>, command=<span class="hljs-variable language_">self</span>.collect_coins)<br>        collect_coins_button.pack(pady=<span class="hljs-number">10</span>)<br><br>        set_price_button = tk.Button(menu_window, text=<span class="hljs-string">&quot;è®¾å®šé¥®æ–™ä»·æ ¼&quot;</span>, command=<span class="hljs-variable language_">self</span>.set_drink_price)<br>        set_price_button.pack(pady=<span class="hljs-number">10</span>)<br><br>        logout_button = tk.Button(menu_window, text=<span class="hljs-string">&quot;æ³¨é”€&quot;</span>, command=menu_window.destroy)<br>        logout_button.pack(pady=<span class="hljs-number">10</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">replenish_drinks</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># è¡¥å……é¥®æ–™çš„åŠŸèƒ½</span><br>        drink_name = simpledialog.askstring(<span class="hljs-string">&quot;è¡¥å……é¥®æ–™&quot;</span>, <span class="hljs-string">&quot;è¯·è¾“å…¥é¥®æ–™åç§°ï¼š&quot;</span>)<br>        <span class="hljs-keyword">if</span> drink_name:  <span class="hljs-comment"># æ£€æŸ¥ç”¨æˆ·æ˜¯å¦è¾“å…¥äº†é¥®æ–™åç§°</span><br>            quantity = simpledialog.askinteger(<span class="hljs-string">&quot;è¡¥å……é¥®æ–™&quot;</span>, <span class="hljs-string">&quot;è¯·è¾“å…¥è¡¥å……æ•°é‡ï¼š&quot;</span>)<br>            <span class="hljs-keyword">if</span> quantity <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:  <span class="hljs-comment"># æ£€æŸ¥ç”¨æˆ·æ˜¯å¦è¾“å…¥äº†æ•°é‡</span><br>                price = simpledialog.askfloat(<span class="hljs-string">&quot;è¡¥å……é¥®æ–™&quot;</span>, <span class="hljs-string">&quot;è¯·è¾“å…¥é¥®æ–™ä»·æ ¼ï¼š&quot;</span>)<br>                <span class="hljs-keyword">if</span> price <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:  <span class="hljs-comment"># æ£€æŸ¥ç”¨æˆ·æ˜¯å¦è¾“å…¥äº†ä»·æ ¼</span><br>                    <span class="hljs-variable language_">self</span>.admin.replenish_drink(drink_name, quantity, price, <span class="hljs-variable language_">self</span>.vending_machine)<br>                    messagebox.showinfo(<span class="hljs-string">&quot;è¡¥å……æˆåŠŸ&quot;</span>, <span class="hljs-string">&quot;é¥®æ–™åº“å­˜è¡¥å……æˆåŠŸï¼&quot;</span>)<br>                    <span class="hljs-variable language_">self</span>.vending_machine.save_drinks()  <span class="hljs-comment"># ä¿å­˜é¥®æ–™ä¿¡æ¯</span><br>                <span class="hljs-keyword">else</span>:<br>                    messagebox.showwarning(<span class="hljs-string">&quot;è¡¥å……å¤±è´¥&quot;</span>, <span class="hljs-string">&quot;è¯·è¾“å…¥æœ‰æ•ˆçš„é¥®æ–™ä»·æ ¼ã€‚&quot;</span>)<br>            <span class="hljs-keyword">else</span>:<br>                messagebox.showwarning(<span class="hljs-string">&quot;è¡¥å……å¤±è´¥&quot;</span>, <span class="hljs-string">&quot;è¯·è¾“å…¥æœ‰æ•ˆçš„è¡¥å……æ•°é‡ã€‚&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            messagebox.showwarning(<span class="hljs-string">&quot;è¡¥å……å¤±è´¥&quot;</span>, <span class="hljs-string">&quot;è¯·è¾“å…¥é¥®æ–™åç§°ã€‚&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">batch_import_drinks</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># æ‰¹é‡è¡¥å……é¥®æ–™çš„åŠŸèƒ½</span><br>        start_time = time.time()  <span class="hljs-comment"># è®°å½•å¼€å§‹æ—¶é—´</span><br>        import_window = tk.Toplevel(<span class="hljs-variable language_">self</span>.master)<br>        import_window.title(<span class="hljs-string">&quot;æ‰¹é‡è¡¥å……é¥®æ–™&quot;</span>)<br><br>        tk.Label(import_window, text=<span class="hljs-string">&quot;è¯·è¾“å…¥é¥®æ–™æ•°æ®ï¼ˆæ ¼å¼ï¼šåç§°,æ•°é‡,ä»·æ ¼ï¼‰ï¼š&quot;</span>).pack(pady=<span class="hljs-number">5</span>)<br>        text_area = tk.Text(import_window, height=<span class="hljs-number">10</span>, width=<span class="hljs-number">50</span>)<br>        text_area.pack(pady=<span class="hljs-number">5</span>)<br>        import_button = tk.Button(import_window, text=<span class="hljs-string">&quot;è¡¥å……&quot;</span>, command=<span class="hljs-keyword">lambda</span>: <span class="hljs-variable language_">self</span>.import_drinks(text_area.get(<span class="hljs-string">&quot;1.0&quot;</span>, tk.END), start_time))<br>        import_button.pack(pady=<span class="hljs-number">10</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">import_drinks</span>(<span class="hljs-params">self, data, start_time</span>):<br>        <span class="hljs-comment"># å¤„ç†æ‰¹é‡è¡¥å……é¥®æ–™æ•°æ®</span><br>        lines = data.strip().split(<span class="hljs-string">&quot;\n&quot;</span>)<br>        success_count = <span class="hljs-number">0</span><br>        fail_count = <span class="hljs-number">0</span><br><br>        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines:<br>            <span class="hljs-keyword">try</span>:<br>                name, quantity, price = line.split(<span class="hljs-string">&quot;,&quot;</span>)<br>                quantity = <span class="hljs-built_in">int</span>(quantity)<br>                price = <span class="hljs-built_in">float</span>(price)<br>                <span class="hljs-variable language_">self</span>.admin.replenish_drink(name, quantity, price, <span class="hljs-variable language_">self</span>.vending_machine)<br>                success_count += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">except</span> ValueError:<br>                fail_count += <span class="hljs-number">1</span><br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æ ¼å¼é”™è¯¯æˆ–æ•°æ®è½¬æ¢å¤±è´¥ï¼š<span class="hljs-subst">&#123;line&#125;</span>&quot;</span>)<br><br>        end_time = time.time()  <span class="hljs-comment"># è®°å½•ç»“æŸæ—¶é—´</span><br>        elapsed_time = end_time - start_time<br>        elapsed_time = <span class="hljs-built_in">round</span>(elapsed_time)<br>        User.add_time_spent(elapsed_time)<br><br>        <span class="hljs-keyword">if</span> success_count &gt; <span class="hljs-number">0</span>:<br>            <span class="hljs-variable language_">self</span>.vending_machine.save_drinks()<br>            messagebox.showinfo(<span class="hljs-string">&quot;æ‰¹é‡è¡¥å……æˆåŠŸ&quot;</span>, <span class="hljs-string">f&quot;æˆåŠŸå¯¼å…¥<span class="hljs-subst">&#123;success_count&#125;</span>æ¡æ•°æ®ã€‚&quot;</span>)<br>        <span class="hljs-keyword">if</span> fail_count &gt; <span class="hljs-number">0</span>:<br>            messagebox.showwarning(<span class="hljs-string">&quot;æ‰¹é‡è¡¥å……å¤±è´¥&quot;</span>, <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;fail_count&#125;</span>æ¡æ•°æ®æ ¼å¼é”™è¯¯æˆ–è½¬æ¢å¤±è´¥ã€‚è¯·æ£€æŸ¥è¾“å…¥æ ¼å¼ã€‚&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">replenish_change</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># è¡¥å……æ‰¾é›¶ç¡¬å¸çš„åŠŸèƒ½</span><br>        coin_denomination = simpledialog.askinteger(<span class="hljs-string">&quot;è¡¥å……ç¡¬å¸&quot;</span>, <span class="hljs-string">&quot;è¯·è¾“å…¥ç¡¬å¸é¢é¢ï¼š&quot;</span>)<br>        <span class="hljs-keyword">if</span> coin_denomination <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:  <span class="hljs-comment"># æ£€æŸ¥ç”¨æˆ·æ˜¯å¦è¾“å…¥äº†ç¡¬å¸é¢é¢</span><br>            quantity = simpledialog.askinteger(<span class="hljs-string">&quot;è¡¥å……ç¡¬å¸&quot;</span>, <span class="hljs-string">&quot;è¯·è¾“å…¥è¡¥å……æ•°é‡ï¼š&quot;</span>)<br>            <span class="hljs-keyword">if</span> quantity <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:  <span class="hljs-comment"># æ£€æŸ¥ç”¨æˆ·æ˜¯å¦è¾“å…¥äº†æ•°é‡</span><br>                <span class="hljs-variable language_">self</span>.admin.replenish_change(coin_denomination, quantity, <span class="hljs-variable language_">self</span>.vending_machine)<br>                messagebox.showinfo(<span class="hljs-string">&quot;è¡¥å……æˆåŠŸ&quot;</span>, <span class="hljs-string">&quot;æ‰¾é›¶ç¡¬å¸è¡¥å……æˆåŠŸï¼&quot;</span>)<br>                <span class="hljs-variable language_">self</span>.vending_machine.save_drinks()  <span class="hljs-comment"># ä¿å­˜æ‰¾é›¶ç¡¬å¸ä¿¡æ¯</span><br>            <span class="hljs-keyword">else</span>:<br>                messagebox.showwarning(<span class="hljs-string">&quot;å–æ¶ˆæ“ä½œ&quot;</span>, <span class="hljs-string">&quot;æœªè¾“å…¥æ•°é‡ï¼Œæ“ä½œå·²å–æ¶ˆã€‚&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            messagebox.showwarning(<span class="hljs-string">&quot;å–æ¶ˆæ“ä½œ&quot;</span>, <span class="hljs-string">&quot;æœªè¾“å…¥ç¡¬å¸é¢é¢ï¼Œæ“ä½œå·²å–æ¶ˆã€‚&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">collect_coins</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># æå–ç¡¬å¸çš„åŠŸèƒ½</span><br>        collected_coins = <span class="hljs-variable language_">self</span>.admin.collect_coins(<span class="hljs-variable language_">self</span>.vending_machine)<br>        <span class="hljs-keyword">if</span> collected_coins <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            message = <span class="hljs-string">f&quot;ç¡¬å¸æå–æˆåŠŸï¼å…±æå–<span class="hljs-subst">&#123;collected_coins&#125;</span>å…ƒç¡¬å¸ã€‚&quot;</span><br>            messagebox.showinfo(<span class="hljs-string">&quot;æå–æˆåŠŸ&quot;</span>, message)<br>        <span class="hljs-keyword">else</span>:<br>            messagebox.showinfo(<span class="hljs-string">&quot;æå–æˆåŠŸ&quot;</span>, <span class="hljs-string">&quot;æ²¡æœ‰ç¡¬å¸å¯æå–ã€‚&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_drink_price</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># è®¾ç½®é¥®æ–™ä»·æ ¼çš„åŠŸèƒ½</span><br>        drink_name = simpledialog.askstring(<span class="hljs-string">&quot;è®¾å®šä»·æ ¼&quot;</span>, <span class="hljs-string">&quot;è¯·è¾“å…¥é¥®æ–™åç§°ï¼š&quot;</span>)<br>        <span class="hljs-keyword">if</span> drink_name:  <span class="hljs-comment"># æ£€æŸ¥ç”¨æˆ·æ˜¯å¦è¾“å…¥äº†é¥®æ–™åç§°</span><br>            price = simpledialog.askfloat(<span class="hljs-string">&quot;è®¾å®šä»·æ ¼&quot;</span>, <span class="hljs-string">&quot;è¯·è¾“å…¥æ–°ä»·æ ¼ï¼š&quot;</span>)<br>            <span class="hljs-keyword">if</span> price <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:  <span class="hljs-comment"># æ£€æŸ¥ç”¨æˆ·æ˜¯å¦è¾“å…¥äº†ä»·æ ¼</span><br>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-variable language_">self</span>.admin.set_drink_price(drink_name, price, <span class="hljs-variable language_">self</span>.vending_machine):<br>                    messagebox.showwarning(<span class="hljs-string">&quot;è®¾ç½®å¤±è´¥&quot;</span>, <span class="hljs-string">&quot;æœªæ‰¾åˆ°é¥®æ–™ï¼Œæ— æ³•è®¾ç½®ä»·æ ¼ã€‚&quot;</span>)<br>            <span class="hljs-keyword">else</span>:<br>                messagebox.showwarning(<span class="hljs-string">&quot;è®¾ç½®å¤±è´¥&quot;</span>, <span class="hljs-string">&quot;è¯·è¾“å…¥æœ‰æ•ˆçš„ä»·æ ¼ã€‚&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            messagebox.showwarning(<span class="hljs-string">&quot;è®¾ç½®å¤±è´¥&quot;</span>, <span class="hljs-string">&quot;è¯·è¾“å…¥é¥®æ–™åç§°ã€‚&quot;</span>)<br><span class="hljs-comment"># ä¸»ç¨‹åºï¼Œåˆ›å»ºåº”ç”¨å¹¶å¯åŠ¨</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">run_vending_machine_gui</span>():<br>    <span class="hljs-comment"># åˆå§‹åŒ–å„ä¸ªå¯¹è±¡</span><br>    vending_machine = VendingMachine()<br>    customer = Customer(<span class="hljs-string">&quot;ç”¨æˆ·&quot;</span>, <span class="hljs-string">&quot;user&quot;</span>)<br>    admin = Admin(<span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;admin&quot;</span>)<br><br>    root = tk.Tk()<br>    root.geometry(<span class="hljs-string">&quot;600x400&quot;</span>)  <span class="hljs-comment"># è®¾ç½®çª—å£å¤§å°</span><br>    app = GUI(root, vending_machine, customer, admin)<br><br>    <span class="hljs-comment"># åˆå§‹åŒ–é¥®æ–™å’Œæ‰¾é›¶ç¡¬å¸</span><br>    admin.replenish_drink(<span class="hljs-string">&quot;å¯ä¹&quot;</span>, <span class="hljs-number">10</span>, <span class="hljs-number">3.0</span>, vending_machine, time_spent=<span class="hljs-number">3</span>)<br>    admin.replenish_drink(<span class="hljs-string">&quot;é›ªç¢§&quot;</span>, <span class="hljs-number">15</span>, <span class="hljs-number">3.0</span>, vending_machine, time_spent=<span class="hljs-number">3</span>)<br>    admin.replenish_drink(<span class="hljs-string">&quot;çŸ¿æ³‰æ°´&quot;</span>, <span class="hljs-number">20</span>, <span class="hljs-number">2.0</span>, vending_machine, time_spent=<span class="hljs-number">3</span>)<br>    admin.replenish_change(<span class="hljs-number">1.0</span>, <span class="hljs-number">1000</span>, vending_machine, time_spent=<span class="hljs-number">2</span>)<br><br>    root.mainloop()<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    run_vending_machine_gui()<br>       <span class="hljs-comment"># æŠ•å¸å¼é¥®æ–™è‡ªåŠ©å”®å–æœºç³»ç»Ÿç¨‹åºè¯´æ˜ï¼š</span><br><span class="hljs-comment"># 1.ç¨‹åºè¿è¡Œä¹‹åä¼šæœ‰ä¸€ä¸ªå¯è§†åŒ–çš„ç•Œé¢å¼¹çª—ç”¨æ¥è¿›è¡Œäº¤äº’</span><br><span class="hljs-comment"># 2.ç³»ç»Ÿæ˜¯åŸºäºæ—¶é—´çš„ï¼Œæ¯ä¸€ä¸ªæ“ä½œéƒ½è®¾ç½®äº†å…·ä½“æ—¶é—´æ¶ˆè€—ï¼Œä¼šåœ¨æ‰§è¡Œä¹‹ååœ¨æ§åˆ¶å°æ‰“å°å‡ºæ¥</span><br><span class="hljs-comment"># 3.ç¨‹åºå¼€å§‹è¿è¡Œåï¼Œä¼šå…ˆè¿›è¡Œè¡¥å……é¥®æ–™å’Œæ‰¾é›¶ç¡¬å¸çš„åˆå§‹åŒ–</span><br><span class="hljs-comment"># 4.ç®¡ç†å‘˜ç™»å½•æ“ä½œçš„è´¦å·æ˜¯adminï¼Œå¯†ç æ˜¯admin</span><br><span class="hljs-comment"># 5.é¡¾å®¢æŠ•å…¥çš„ç¡¬å¸æ•°æ®é€šè¿‡å†™å…¥æ–°å»ºçš„æ–‡æœ¬æ–‡ä»¶(.txt)æ¥å­˜å‚¨</span><br><span class="hljs-comment"># 6.ç®¡ç†å‘˜è¡¥å……çš„é¥®æ–™ç›¸å…³æ•°æ®é€šè¿‡å†™å…¥æ–°å»ºçš„æ–‡æœ¬æ–‡ä»¶(.txt)æ¥å­˜å‚¨</span><br><span class="hljs-comment"># 7.ç®¡ç†å‘˜æå–ç¡¬å¸æ“ä½œæå–çš„æ˜¯é¡¾å®¢æŠ•å…¥çš„ç¡¬å¸ï¼Œä¸æå–æ‰¾é›¶ç¡¬å¸</span><br><span class="hljs-comment"># 8.ç®¡ç†å‘˜èƒ½å¤Ÿå¯¹é¥®æ–™æ•°æ®è¿›è¡Œæ‰¹é‡è¡¥å……</span><br></code></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>é¢å‘å¯¹è±¡åˆ†æä¸è®¾è®¡</category>
      </categories>
  </entry>
  <entry>
    <title>è¿è¡Œå®‰å“é¡¹ç›®é€šç”¨é…ç½®ï¼ˆjavaï¼‰</title>
    <url>/2024/12/29/%E5%AE%89%E5%8D%93%E9%A1%B9%E7%9B%AE%E8%BF%90%E8%A1%8C%E9%80%9A%E7%94%A8%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<p> <img src="/img/articles/Android/1.jpg"> </p>
<p> <img src="/img/articles/Android/2.jpg"> </p>
<p> <img src="/img/articles/Android/3.jpg"> </p>
<p> <img src="/img/articles/Android/4.jpg"> </p>
<p> <img src="/img/articles/Android/5.jpg"> </p>
<p> <img src="/img/articles/Android/6.jpg"> </p>
]]></content>
      <categories>
        <category>é…ç½®å„ç±»ç¯å¢ƒæ‰€é‡é—®é¢˜</category>
      </categories>
  </entry>
  <entry>
    <title>å®æˆ˜åç«¯æ¥å…¥ç‰©è”ç½‘API</title>
    <url>/2024/11/16/%E7%89%A9%E8%81%94%E7%BD%91API%E6%8E%A5%E5%85%A5%E5%90%8E%E7%AB%AF/</url>
    <content><![CDATA[<p>å›¢é˜Ÿé¡¹ç›®æœ‰ä¸€ä¸ªä¸šåŠ¡è¦è·å–é˜¿é‡Œäº‘ç‰©è”ç½‘å¹³å°ä¸Šé¢çš„ä¼ æ„Ÿå™¨æ•°æ®ï¼Œä»£ç ä½¿ç”¨javaï¼Œé‡‡ç”¨springbootæ¡†æ¶ï¼Œé˜¿é‡Œäº‘ç‰©è”ç½‘å¹³å°ä¸Šä¸€ä¸ªäº§å“ä¸‹çš„ä¸€ä¸ªè®¾å¤‡åªèƒ½è¿æ¥çœŸå®è®¾å¤‡æˆ–è€…ä»£ç æœåŠ¡ç«¯ï¼Œäºæ˜¯æˆ‘é‡‡ç”¨æ•°æ®æµè½¬çš„æ–¹å¼å°†æ•°æ®æµè½¬åˆ°ä¸€ä¸ªè®¾å¤‡ä¸­ï¼ŒæœåŠ¡ç«¯è®¢é˜…è¯¥è®¾å¤‡çš„<strong>Topic</strong>ã€‚</p>
<p><strong>è¿™é‡Œå…ˆè®²è®²æˆ‘åœ¨æ¥å…¥çœŸå®è®¾å¤‡å¹¶å°†æ•°æ®ä¿¡æ¯ä¸Šä¼ åˆ°é˜¿é‡Œäº‘çš„äº‘ç«¯å¹³å°è®¾å¤‡ï¼Œä½†æ˜¯åç«¯ä¼šè¢«æŒ¤æ‰çº¿çš„é—®é¢˜çš„è§£å†³æ–¹å¼:</strong></p>
<p><em>ä»¥ä¸‹æ˜¯ç›¸å…³è®°å½•</em></p>
<ol>
<li><p>è§£å†³äº†åç«¯è¿æ¥é˜¿é‡Œäº‘ç‰©è”ç½‘å¹³å°æ‰çº¿é—®é¢˜ï¼Œèƒ½å¤Ÿæ”¶åˆ°çœŸå®è®¾å¤‡æ‰€å‘çš„ä¿¡æ¯</p>
<p><img src="/img/articles/9.png"></p>
</li>
</ol>
<p>è§£å†³æ–¹å¼ï¼š</p>
<p>a.åœ¨é˜¿é‡Œäº‘ç‰©è”ç½‘å¹³å°ä½¿ç”¨åŒä¸€ä¸ªäº§å“å¯†é’¥åˆå†å»ºç«‹äº†ä¸€å°æ–°è®¾å¤‡ï¼Œå°†çœŸå®è®¾å¤‡ä¼ åˆ°çš„é˜¿é‡Œäº‘ç«¯ï¼ˆä¹‹å‰å»ºå¥½è®¾å¤‡ï¼‰çš„æ¶ˆæ¯å†è¿›è¡Œä¸€æ¬¡è½¬å‘åˆ°æ–°è®¾å¤‡ï¼Œä½¿åç«¯è¿æ¥è¿™å°æ–°å¤‡è¿›è¡Œæ¶ˆæ¯æ¥æ”¶å¹¶ä¸”ä¸ä¼šæ‰çº¿ã€‚</p>
<p>  <img src="/img/articles/10.png"> </p>
<p>b.åç«¯æ¥æ”¶æ¶ˆæ¯æµç¨‹å¦‚ä¸‹ï¼ˆé‡‡ç”¨MQTTåè®®,åªå…è®¸ä¸€å¯¹ä¸€çš„è¿æ¥ï¼Œè‹¥æœ‰å¤šä¸ªè¿æ¥ï¼Œä¼šæŠŠå…ˆè¿æ¥çš„ä¸‹çº¿æ‰ï¼‰ï¼š</p>
<p>  <img src="/img/articles/11.png"> </p>
<h2 id="é˜¿é‡Œäº‘åˆ›å»º"><a href="#é˜¿é‡Œäº‘åˆ›å»º" class="headerlink" title="é˜¿é‡Œäº‘åˆ›å»º"></a>é˜¿é‡Œäº‘åˆ›å»º</h2><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªäº§å“ï¼Œç”¨äºæµ‹è¯•ä½¿ç”¨ï¼Œç›´æ¥é€‰æ‹©ä¸€ä¸ªæ ‡å‡†å“ç±»ï¼Œå“ç±»æœ‰æ¸©åº¦å’Œæ¹¿åº¦å±æ€§ï¼ˆå®é™…ä½¿ç”¨éœ€è¦æŒ‰éœ€æ±‚è‡ªå®šä¹‰äº§å“ï¼‰ï¼ŒèŠ‚ç‚¹ç±»å‹ä¸ºäº†æ–¹ä¾¿é€‰çš„ç›´è¿è®¾å¤‡ã€‚</p>
<p>äº§å“åˆ›å»ºå®Œæˆä¹‹åç‚¹å‡»<strong>æŸ¥çœ‹</strong>ï¼Œç‚¹å‡»<strong>åŠŸèƒ½å®šä¹‰</strong>æ¨¡å—ï¼Œç¼–è¾‘è‰ç¨¿ï¼Œæ·»åŠ åˆšæ‰é€‰æ‹©çš„æ ‡å‡†äº§å“çš„ä¸¤ä¸ªæ ‡å‡†åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥æ·»åŠ è‡ªå®šä¹‰åŠŸèƒ½çœ‹è‡ªå·±é€‰æ‹©ï¼Œè¿™è¾¹åªä½¿ç”¨æ¸©åº¦å’Œæ¹¿åº¦ã€‚</p>
<p>å‘å¸ƒå®Œæˆä¹‹åè¿›å…¥Topic ç±»åˆ—è¡¨çš„è‡ªå®šä¹‰Topic éƒ¨åˆ†</p>
<p>å®šä¹‰ä¸€ä¸ªTopicç±»ï¼Œä¾¿äºåé¢é€šè¿‡è¯¥Topicæµè½¬åˆ°æœåŠ¡å™¨ç«¯ï¼Œæ“ä½œæƒé™ä¸ºå‘å¸ƒå’Œè®¢é˜…ï¼Œå‘½åä¸ºtento(æŒ‰ç…§è‡ªå·±éœ€æ±‚å‘½å)ï¼Œç‚¹å‡»ç¡®è®¤å°±å®šä¹‰å®Œæˆäº†ã€‚</p>
<p>ä¹‹åä¸ºè¿™ä¸ªäº§å“æ·»åŠ ä¸¤ä¸ªè®¾å¤‡ï¼ˆä¸€ä¸ªçœŸå®è®¾å¤‡ï¼Œä¸€ä¸ªæœåŠ¡å™¨è®¾å¤‡ï¼ˆä¸€ä¸ªç”¨æ¥æ”¶çœŸå®è®¾å¤‡çš„ä¿¡æ¯ï¼Œä¸€ä¸ªç”¨æ¥å°†çœŸå®è®¾å¤‡çš„ä¿¡æ¯è½¬è¿‡æ¥èŠ‚æ¥æ”¶ï¼‰ï¼‰ï¼Œå®é™…ä½¿ç”¨å¯ä»¥åˆ›å»ºå¤šä¸ªçœŸå®è®¾å¤‡ï¼Œæ•°æ®æµè½¬åˆ°ä¸€ä¸ªæœåŠ¡å™¨è®¾å¤‡ä¸­å°±å¯ä»¥äº†ï¼Œä¸ºäº†æ–¹ä¾¿è¿™è¾¹åªåˆ›å»ºä¸¤ä¸ªè®¾å¤‡æµ‹è¯•ã€‚ç›´æ¥æ·»åŠ ï¼ŒDeviceNameè®©ä»–éšæœºç”Ÿæˆã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªè§£æå™¨ï¼ˆåœ¨äº‘äº§å“æµè½¬é‚£é‡Œï¼‰</p>
<p>ç‚¹å‡»æŸ¥çœ‹è¿™ä¸ªæ•°æ®æºï¼Œæ·»åŠ Topicï¼Œå› ä¸ºæˆ‘è¦è·å–çœŸå®è®¾å¤‡çš„æ•°æ®ï¼Œæ‰€ä»¥é€‰æ‹©ç‰©æ¨¡å‹æ•°æ®ä¸ŠæŠ¥çš„Topicï¼Œè®¾å¤‡DeviceNameé€‰æ‹©åˆšæ‰åˆ›å»ºçš„çœŸå®è®¾å¤‡ï¼Œæœ€åé€‰æ‹©postã€‚è¿™æ ·æ•°æ®æºå°±å®Œæˆäº†</p>
<p>ç„¶åè¿›å…¥æ•°æ®ç›®çš„ï¼Œç‚¹å‡»å…³è”æ•°æ®ç›®çš„</p>
<p>å’Œåˆšæ‰æ“ä½œç±»ä¼¼ç‚¹å‡»å…³è”æ•°æ®ç›®çš„â€”-&gt;åˆ›å»ºæ•°æ®ç›®çš„ï¼Œäº§å“é€‰æ‹©æˆ‘ä»¬ä¸€å¼€å§‹åˆ›å»ºçš„äº§å“ï¼Œæ“ä½œä¸ºå‘é€åˆ°å¦ä¸€ä¸ªTopicã€‚</p>
<p>æœ€åæ˜¯è§£æå™¨è„šæœ¬ï¼Œä¼šæœ‰ä¸€ä¸ªè‰ç¨¿ï¼Œè„šæœ¬ä¸­çš„writeIotTopic(1004ï¼‰ï¼Œ<strong>1004æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œè‡ªå·±çš„ä»£ç ä¸è¦æ”¹è¿™ä¸ª</strong></p>
<p>æ”¹ä¸º</p>
<p>åªæ›´æ”¹äº†&#x2F;k1a8gKQzYMD&#x2F;ejP0IrtXk49UIMz7Wsn1&#x2F;user&#x2F;tentoæ˜¯åˆšæ‰å’±ä»¬è‡ªå®šä¹‰çš„Topicï¼Œk1a8gKQzYMDä¸ºäº§å“çš„ProductKeyï¼ŒejP0IrtXk49UIMz7Wsn1ä¸ºæœåŠ¡ç«¯è®¾å¤‡çš„DeviceNameï¼Œç‚¹å‡»å‘å¸ƒå°±å®Œæˆäº†è¿™ä¸ªè§£æå™¨ï¼Œè§£æå™¨ä¸€å®šè¦ç‚¹å‡»å¯åŠ¨æ‰ä¼šç”Ÿæ•ˆã€‚</p>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>å¼€ä¸¤ä¸ªè®¾å¤‡æ¨¡æ‹Ÿå™¨</p>
<p>çœŸå®è®¾å¤‡ç«¯</p>
<p>æœåŠ¡å™¨ç«¯</p>
<p>æœåŠ¡å™¨ç«¯è®¢é˜…åˆšæ‰è‡ªå®šä¹‰çš„Topic</p>
<p>ç‚¹å‡»è®¢é˜…ä¹‹åï¼Œå³è¾¹æ—¥å¿—ä¼šæ˜¾ç¤ºè®¢é˜…çš„Topic <strong>(è®¢é˜…è¿™ä¸€æ­¥ä¸èƒ½çœ)</strong></p>
<p>å†å›åˆ°çœŸå®è®¾å¤‡çš„æ¨¡æ‹Ÿå™¨ï¼ˆ<strong>æœåŠ¡å™¨æ¨¡æ‹Ÿå™¨ä¸è¦å…³</strong>ï¼Œ<strong>å¼€ä¸¤ä¸ªç½‘é¡µ</strong>ï¼‰ï¼Œè¾“å…¥æ¸©åº¦æ¹¿åº¦æ•°æ®ä¹‹åï¼Œç‚¹å‡»æäº¤ï¼Œæ¨¡æ‹ŸçœŸå®è®¾å¤‡æäº¤æ•°æ®ã€‚</p>
<p>çœŸå®è®¾å¤‡æäº¤æ•°æ®ä¹‹åï¼Œåˆšæ‰æœåŠ¡å™¨è®¾å¤‡çš„æ¨¡æ‹Ÿå™¨è®¢é˜…äº†è¿™ä¸ªæ¶ˆæ¯ï¼Œå°±ä¼šæ”¶åˆ°æ¶ˆæ¯ã€‚</p>
<p>æ¶ˆæ¯ä¸­åŒ…æ‹¬åˆšæ‰çœŸå®è®¾å¤‡ä¸Šä¼ çš„æ¸©åº¦æ¹¿åº¦ï¼Œè¿˜åŒ…æ‹¬çœŸå®è®¾å¤‡çš„deviceNameï¼Œè¿™æ ·å¦‚æœå¤šä¸ªçœŸå®è®¾å¤‡ä¸Šä¼ æ•°æ®ï¼Œå…¨éƒ¨æµè½¬åˆ°æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨ç«¯å°±æ˜¯çŸ¥é“çœŸå®è®¾å¤‡æ˜¯å“ªä¸€ä¸ªï¼Œä¸Šä¼ çš„æ•°æ®æ˜¯å¤šå°‘ã€‚</p>
]]></content>
      <categories>
        <category>ç‰©è”ç½‘APIæ¥å…¥</category>
      </categories>
  </entry>
  <entry>
    <title>åšäº†ä¸€ä¸ªæ¥å…¥AIçš„AIé—®ç­”åŠ©æ‰‹APP</title>
    <url>/2025/01/10/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E6%8E%A5%E5%85%A5AI/</url>
    <content><![CDATA[<h2 id="å…·ä½“å®ç°ï¼š"><a href="#å…·ä½“å®ç°ï¼š" class="headerlink" title="å…·ä½“å®ç°ï¼š"></a><strong>å…·ä½“å®ç°ï¼š</strong></h2><p>1.åœ¨Androidåº”ç”¨çš„<code>AndroidManifest.xml</code>æ–‡ä»¶ä¸­æ·»åŠ ç½‘ç»œè®¿é—®æƒé™ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.permission.INTERNET&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure>

<p>åœ¨build.gradleä¸­æ·»åŠ å¿…è¦çš„ä¾èµ–ï¼ˆä½¿ç”¨httpè¯·æ±‚apiï¼‰ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">implementation</span> <span class="hljs-string">&#x27;com.squareup.okhttp3:okhttp:4.9.3&#x27;</span><br></code></pre></td></tr></table></figure>



<p>2.åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»ä»¥å¤„ç†æ–‡å¿ƒä¸€è¨€çš„APIä¿¡æ¯ï¼š<strong>WenXin.java</strong>ï¼Œåœ¨<strong>Activity</strong>é‡Œéœ€è¦å®ç°æ–‡å¿ƒä¸€è¨€çš„å¯¹è¯åŠŸèƒ½åªéœ€è°ƒç”¨è¿™ä¸ªç±»å°±å¥½äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.example.myapp.config;<br><br><span class="hljs-keyword">import</span> org.json.JSONArray;<br><span class="hljs-keyword">import</span> org.json.JSONException;<br><span class="hljs-keyword">import</span> org.json.JSONObject;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;<br><br><span class="hljs-keyword">import</span> okhttp3.*;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ä¸»è¦ç”¨äºå®ç°å¯¹æ¥åƒå¸†å¤§æ¨¡å‹APIçš„åŠŸèƒ½</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AiConfig</span> &#123;<br>    <span class="hljs-keyword">public</span> String API_KEY;<br><br>    <span class="hljs-keyword">public</span> String SECRET_KEY;<br><br>    <span class="hljs-keyword">public</span> String AI_Role;<br><br>    <span class="hljs-keyword">public</span> JSONArray Dialogue_Content;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * AiConfigç±»çš„åˆå§‹åŒ–è®¾ç½®ï¼Œè®¾ç½®å¥½apikeyç­‰å‚æ•°ï¼Œä»¥å‘æœåŠ¡å™¨å‘é€ä¿¡æ¯ï¼Œairoleå‚æ•°çš„ä½œç”¨æ˜¯è‡ªå®šä¹‰aiåŠ©æ‰‹çš„è§’è‰²åŠŸèƒ½ç±»å‹</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AiConfig</span><span class="hljs-params">(String apikey, String secrectkey, String airole)</span>&#123;<br>        Dialogue_Content=<span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONArray</span>();<br>        API_KEY=apikey;<br>        SECRET_KEY=secrectkey;<br>        AI_Role=airole;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">OkHttpClient</span> <span class="hljs-variable">HTTP_CLIENT</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OkHttpClient</span>.Builder().connectTimeout(<span class="hljs-number">10</span>, TimeUnit.SECONDS).writeTimeout(<span class="hljs-number">60</span>, TimeUnit.SECONDS).readTimeout(<span class="hljs-number">60</span>, TimeUnit.SECONDS).build();<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">GetAnswer</span><span class="hljs-params">(String user_msg,<span class="hljs-keyword">final</span> ResponseCallback callback)</span> <span class="hljs-keyword">throws</span> IOException, JSONException&#123;<br>        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">jsonObject</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>();<br>        jsonObject.put(<span class="hljs-string">&quot;role&quot;</span>, <span class="hljs-string">&quot;user&quot;</span>);<br>        jsonObject.put(<span class="hljs-string">&quot;content&quot;</span>, user_msg);<br><br>        Dialogue_Content.put(jsonObject);<br>        <span class="hljs-type">MediaType</span> <span class="hljs-variable">mediaType</span> <span class="hljs-operator">=</span> MediaType.parse(<span class="hljs-string">&quot;application/json&quot;</span>);<br>        <span class="hljs-type">RequestBody</span> <span class="hljs-variable">body</span> <span class="hljs-operator">=</span> RequestBody.create(mediaType, <span class="hljs-string">&quot;&#123;\&quot;messages\&quot;:&quot;</span> + Dialogue_Content.toString() + <span class="hljs-string">&quot;,\&quot;system\&quot;:\&quot;&quot;</span> + AI_Role + <span class="hljs-string">&quot;\&quot;,\&quot;disable_search\&quot;:false,\&quot;enable_citation\&quot;:false&#125;&quot;</span>);<br><br>        <span class="hljs-type">Request</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>.Builder().url(<span class="hljs-string">&quot;https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/ernie-speed-128k?access_token=&quot;</span> + getAccessToken()).method(<span class="hljs-string">&quot;POST&quot;</span>, body).addHeader(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;application/json&quot;</span>).build();<br><br>        HTTP_CLIENT.newCall(request).enqueue(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Callback</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onResponse</span><span class="hljs-params">(Call call, Response response)</span>&#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    <span class="hljs-keyword">if</span> (response.isSuccessful()) &#123;<br>                        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">json_feedback</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>(response.body().string());<br>                        <span class="hljs-type">String</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> json_feedback.getString(<span class="hljs-string">&quot;result&quot;</span>);<br>                        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">jsontmp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>();<br>                        jsontmp.put(<span class="hljs-string">&quot;assistant&quot;</span>, res);<br>                        Dialogue_Content.put(jsontmp);<br>                        callback.onSuccess(res);<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        callback.onError(<span class="hljs-string">&quot;æœåŠ¡å™¨è¿”å›é”™è¯¯ï¼š&quot;</span> + response.code());<br>                    &#125;<br>                &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>                    callback.onError(e.getMessage());<br>                &#125;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onFailure</span><span class="hljs-params">(Call call, IOException e)</span> &#123;<br>                callback.onError(e.getMessage());<br>            &#125;<br>        &#125;);<br><br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä»ç”¨æˆ·çš„AKï¼ŒSKç”Ÿæˆé‰´æƒç­¾åï¼ˆAccess Tokenï¼‰</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getAccessToken</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException, JSONException &#123;<br>        <span class="hljs-type">MediaType</span> <span class="hljs-variable">mediaType</span> <span class="hljs-operator">=</span> MediaType.parse(<span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span>);<br>        <span class="hljs-type">RequestBody</span> <span class="hljs-variable">body</span> <span class="hljs-operator">=</span> RequestBody.create(mediaType, <span class="hljs-string">&quot;grant_type=client_credentials&amp;client_id=&quot;</span> + API_KEY + <span class="hljs-string">&quot;&amp;client_secret=&quot;</span> + SECRET_KEY);<br>        <span class="hljs-type">Request</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>.Builder().url(<span class="hljs-string">&quot;https://aip.baidubce.com/oauth/2.0/token&quot;</span>).method(<span class="hljs-string">&quot;POST&quot;</span>, body).addHeader(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span>).build();<br>        <span class="hljs-type">Response</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> HTTP_CLIENT.newCall(request).execute();<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>(response.body().string()).getString(<span class="hljs-string">&quot;access_token&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">// å›è°ƒæ¥å£</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ResponseCallback</span> &#123;<br>        <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(String response)</span>;<br>        <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(String error)</span>;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<p>3.åœ¨Activityä¸­è¿™æ ·å†™</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.example.myapp.activity;<br><br><span class="hljs-keyword">import</span> android.app.Activity;<br><span class="hljs-keyword">import</span> android.content.Intent;<br><span class="hljs-keyword">import</span> android.content.SharedPreferences;<br><span class="hljs-keyword">import</span> android.os.Bundle;<br><span class="hljs-keyword">import</span> android.os.Handler;<br><span class="hljs-keyword">import</span> android.os.Looper;<br><span class="hljs-keyword">import</span> android.os.Message;<br><span class="hljs-keyword">import</span> android.view.View;<br><span class="hljs-keyword">import</span> android.widget.Button;<br><span class="hljs-keyword">import</span> android.widget.EditText;<br><span class="hljs-keyword">import</span> androidx.recyclerview.widget.LinearLayoutManager;<br><span class="hljs-keyword">import</span> androidx.recyclerview.widget.RecyclerView;<br><span class="hljs-keyword">import</span> com.airbnb.lottie.LottieAnimationView;<br><span class="hljs-keyword">import</span> com.example.myapp.config.AiConfig;<br><span class="hljs-keyword">import</span> com.example.myapp.model.Chatlist;<br><span class="hljs-keyword">import</span> com.example.myapp.R;<br><span class="hljs-keyword">import</span> com.example.myapp.adapter.ChatlistAdapter;<br><span class="hljs-keyword">import</span> org.json.JSONException;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> &#123;<br><br>    <span class="hljs-keyword">private</span> EditText et_chat;<br><br>    <span class="hljs-keyword">private</span> Button btn_send,btn_chat_return;<br><br>    <span class="hljs-keyword">private</span> ChatlistAdapter chatAdapter;<br><br>    <span class="hljs-keyword">private</span> List&lt;Chatlist&gt; mDatas;<br><br>    <span class="hljs-keyword">private</span> SharedPreferences preferences;<br><br>    <span class="hljs-keyword">private</span> RecyclerView rc_chatlist;<br><br>    <span class="hljs-keyword">private</span> LottieAnimationView lo_msgloading;<br><br>    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MESSAGE_UPDATE_VIEW</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> &#123;<br>        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);<br>        setContentView(R.layout.activity_chat);<br>        init();<br>        mDatas = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-comment">//è¯»å–ç”¨æˆ·è®¾ç½®é‡Œçš„åƒå¸†å¤§æ¨¡å‹çš„API_Keyç­‰ä¿¡æ¯,è¿™é‡Œè®¾ç½®äº†æˆ‘è‡ªå·±çš„å¯†é’¥</span><br>        preferences= <span class="hljs-built_in">this</span>.getSharedPreferences(<span class="hljs-string">&quot;usersetting&quot;</span>,MODE_PRIVATE);<br>        String apikey=preferences.getString(<span class="hljs-string">&quot;API_Key&quot;</span>,<span class="hljs-string">&quot;w******je**********lhG9W&quot;</span>);<br>        String secretkey=preferences.getString(<span class="hljs-string">&quot;Secret_Key&quot;</span>,<span class="hljs-string">&quot;wRU******HV6LSW************XX6h3&quot;</span>);<br>        String airole=preferences.getString(<span class="hljs-string">&quot;Role&quot;</span>,<span class="hljs-string">&quot;ä½ çš„åå­—æ˜¯AI Assistantï¼Œä½ æ˜¯è§£ç­”ç”¨æˆ·é—®é¢˜çš„å°åŠ©æ‰‹ï¼Œä½¿ç”¨ä¸­æ–‡è¿›è¡Œå›ç­”&quot;</span>);<br><br>        chatAdapter=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatlistAdapter</span>(<span class="hljs-built_in">this</span>,mDatas);<br><br>        <span class="hljs-type">LinearLayoutManager</span> <span class="hljs-variable">layoutManager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinearLayoutManager</span>(<span class="hljs-built_in">this</span> );<br>        rc_chatlist.setLayoutManager(layoutManager);<br>        rc_chatlist.setHasFixedSize(<span class="hljs-literal">true</span>);<br>        rc_chatlist.setAdapter(chatAdapter);<br>        btn_send.setOnClickListener(v -&gt; &#123;<br>            btn_send.setVisibility(View.GONE);<span class="hljs-comment">//ç‚¹å‡»å‘é€æŒ‰é’®ä¹‹åï¼ŒæŒ‰é’®ä¼šéšè—</span><br>            lo_msgloading.setVisibility(View.VISIBLE);<br>            <span class="hljs-comment">//ç”¨æˆ·çš„æé—®</span><br>            String user_ask=et_chat.getText().toString();<span class="hljs-comment">//è·å–è¾“å…¥æ¡†é‡Œçš„ä¿¡æ¯</span><br>            Chatlist CC;<br>            CC=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Chatlist</span>(<span class="hljs-string">&quot;USER&quot;</span>,user_ask);<br>            mDatas.add(CC);<br><br>            chatAdapter.ResetChatlistAdapter(mDatas);<br>            rc_chatlist.setAdapter(chatAdapter);<br>            AiConfig AI=<span class="hljs-keyword">new</span> <span class="hljs-title class_">AiConfig</span>(apikey,secretkey,airole);<br>            <span class="hljs-comment">//åƒå¸†å¤§æ¨¡å‹çš„å›ç­”</span><br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>                <span class="hljs-comment">//è¯·æ±‚è¯¦æƒ…</span><br>                <span class="hljs-keyword">try</span> &#123;<br>                    AI.GetAnswer(user_ask, <span class="hljs-keyword">new</span> <span class="hljs-title class_">AiConfig</span>.ResponseCallback() &#123;<br>                        <span class="hljs-meta">@Override</span><br>                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(String response)</span> &#123;<br>                            <span class="hljs-comment">// åœ¨è¿™é‡Œå¤„ç†è·å–åˆ°çš„ç»“æœ</span><br>                            Chatlist CD;<br>                            String AIresult=response.toString();<br>                            CD=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Chatlist</span>(<span class="hljs-string">&quot;AI Assistant&quot;</span>,AIresult);<br><br>                            mDatas.add(CD);<br>                            chatAdapter.ResetChatlistAdapter(mDatas);<br><br>                            <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>();<br>                            msg.what = MESSAGE_UPDATE_VIEW;<br>                            ChatActivity.<span class="hljs-built_in">this</span>.gHandler.sendMessage(msg);<br>                        &#125;<br><br>                        <span class="hljs-meta">@Override</span><br>                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(String error)</span> &#123;<br>                            <span class="hljs-comment">// åœ¨è¿™é‡Œå¤„ç†é”™è¯¯æƒ…å†µ</span><br>                            Chatlist CF;<br>                            String AIresult=<span class="hljs-string">&quot;è·å–ä¿¡æ¯å¤±è´¥&quot;</span>;<br>                            CF=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Chatlist</span>(<span class="hljs-string">&quot;AI Assistant&quot;</span>,AIresult);<br><br>                            mDatas.add(CF);<br>                            chatAdapter.ResetChatlistAdapter(mDatas);<br><br>                            <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>();<br>                            msg.what = MESSAGE_UPDATE_VIEW;<br>                            ChatActivity.<span class="hljs-built_in">this</span>.gHandler.sendMessage(msg);<br>                        &#125;<br>                    &#125;);<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>                &#125; <span class="hljs-keyword">catch</span> (JSONException e) &#123;<br>                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>                &#125;<br><br>            &#125;).start();<br><br>        &#125;);<br>        btn_chat_return.setOnClickListener(v -&gt; &#123;<br>            Intent intent=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(ChatActivity.<span class="hljs-built_in">this</span>, MainActivity.class);<br>            startActivity(intent);<br>            ChatActivity.<span class="hljs-built_in">this</span>.finish();<br>        &#125;);<br><br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span>&#123;<br>        btn_send=findViewById(R.id.btn_send);<br>        et_chat=findViewById(R.id.et_chat);<br>        btn_chat_return=findViewById(R.id.btn_chat_return);<br>        rc_chatlist=findViewById(R.id.rc_chatlist);<br>        lo_msgloading=findViewById(R.id.lo_msgloading);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">Handler</span> <span class="hljs-variable">gHandler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Handler</span>(Looper.getMainLooper()) &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message msg)</span> &#123;<br>            <span class="hljs-keyword">if</span> (msg.what == MESSAGE_UPDATE_VIEW) &#123;<br>                rc_chatlist.setAdapter(chatAdapter);<br>                btn_send.setVisibility(View.VISIBLE);<span class="hljs-comment">//æ¢å¤æŒ‰é’®</span><br>                lo_msgloading.setVisibility(View.INVISIBLE);<br>            &#125;<br>        &#125;<br>    &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>



<p>æ•ˆæœï¼š</p>
<p> <img src="/img/articles/20.png"> </p>
<p> <img src="/img/articles/21.png"> </p>
<p> <img src="/img/articles/22.png"> </p>
]]></content>
      <categories>
        <category>AIå¤§æ¨¡å‹æ¥å…¥</category>
      </categories>
  </entry>
  <entry>
    <title>LeetCode-11.ç››æœ€å¤šæ°´çš„å®¹å™¨</title>
    <url>/2024/12/22/%E7%AE%97%E6%B3%95%E9%A2%98-%E7%9B%9B%E6%9C%80%E5%A4%9A%E6%B0%B4%E7%9A%84%E5%AE%B9%E5%99%A8/</url>
    <content><![CDATA[<p><a href="https://leetcode.cn/problems/container-with-most-water/">11. ç››æœ€å¤šæ°´çš„å®¹å™¨</a></p>
<p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º <code>n</code> çš„æ•´æ•°æ•°ç»„ <code>height</code> ã€‚æœ‰ <code>n</code> æ¡å‚çº¿ï¼Œç¬¬ <code>i</code> æ¡çº¿çš„ä¸¤ä¸ªç«¯ç‚¹æ˜¯ <code>(i, 0)</code> å’Œ <code>(i, height[i])</code> ã€‚</p>
<p>æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ <code>x</code> è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚</p>
<p>è¿”å›å®¹å™¨å¯ä»¥å‚¨å­˜çš„æœ€å¤§æ°´é‡ã€‚</p>
<p><strong>è¯´æ˜ï¼š</strong>ä½ ä¸èƒ½å€¾æ–œå®¹å™¨ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<p><img src="/img/articles/28-1.png"> </p>
<figure class="highlight text"><table><tr><td class="code"><pre><code class="hljs text">è¾“å…¥ï¼š[1,8,6,2,5,4,8,3,7]<br>è¾“å‡ºï¼š49 <br>è§£é‡Šï¼šå›¾ä¸­å‚ç›´çº¿ä»£è¡¨è¾“å…¥æ•°ç»„ [1,8,6,2,5,4,8,3,7]ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå®¹å™¨èƒ½å¤Ÿå®¹çº³æ°´ï¼ˆè¡¨ç¤ºä¸ºè“è‰²éƒ¨åˆ†ï¼‰çš„æœ€å¤§å€¼ä¸º 49ã€‚<br></code></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight text"><table><tr><td class="code"><pre><code class="hljs text">è¾“å…¥ï¼šheight = [1,1]<br>è¾“å‡ºï¼š1<br></code></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>n == height.length</code></li>
<li><code>2 &lt;= n &lt;= 105</code></li>
<li><code>0 &lt;= height[i] &lt;= 104</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">maxArea</span><span class="hljs-params">(<span class="hljs-type">int</span>[] height)</span> &#123;<br>        <span class="hljs-type">int</span> left=<span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> right=height.length-<span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> res=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(left&lt;right)&#123;<br>            <span class="hljs-type">int</span> current=Math.min(height[left],height[right])*(right-left);<br>            res=Math.max(res,current);<br>            <span class="hljs-keyword">if</span>(height[left]&lt;height[right])&#123;<br>                left++;<br>            &#125;<br>            <span class="hljs-keyword">else</span>&#123;<br>                right--;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•é¢˜</category>
      </categories>
  </entry>
  <entry>
    <title>LeetCode-1.ä¸¤æ•°ä¹‹å’Œ</title>
    <url>/2024/12/20/%E7%AE%97%E6%B3%95%E9%A2%98-%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/</url>
    <content><![CDATA[<p><a href="https://leetcode.cn/problems/two-sum/">1. ä¸¤æ•°ä¹‹å’Œ</a></p>
<p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ <code>target</code>ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º <strong>å’Œä¸ºç›®æ ‡å€¼</strong> <em><code>target</code></em> çš„é‚£ <strong>ä¸¤ä¸ª</strong> æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p>
<p>ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆï¼Œå¹¶ä¸”ä½ ä¸èƒ½ä½¿ç”¨ä¸¤æ¬¡ç›¸åŒçš„å…ƒç´ ã€‚</p>
<p>ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight text"><table><tr><td class="code"><pre><code class="hljs text">è¾“å…¥ï¼šnums = [2,7,11,15], target = 9<br>è¾“å‡ºï¼š[0,1]<br>è§£é‡Šï¼šå› ä¸º nums[0] + nums[1] == 9 ï¼Œè¿”å› [0, 1] ã€‚<br></code></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight text"><table><tr><td class="code"><pre><code class="hljs text">è¾“å…¥ï¼šnums = [3,2,4], target = 6<br>è¾“å‡ºï¼š[1,2]<br></code></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight text"><table><tr><td class="code"><pre><code class="hljs text">è¾“å…¥ï¼šnums = [3,3], target = 6<br>è¾“å‡ºï¼š[0,1]<br></code></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>2 &lt;= nums.length &lt;= 104</code></li>
<li><code>-109 &lt;= nums[i] &lt;= 109</code></li>
<li><code>-109 &lt;= target &lt;= 109</code></li>
<li><strong>åªä¼šå­˜åœ¨ä¸€ä¸ªæœ‰æ•ˆç­”æ¡ˆ</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] twoSum(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> target) &#123;<br>    HashMap&lt;Integer,Integer&gt;valToIndex=<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;nums.length;i++)&#123;<br>        <span class="hljs-type">int</span> need=target-nums[i];<br>        <span class="hljs-keyword">if</span>(valToIndex.containsKey(need))&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]&#123;valToIndex.get(need),i&#125;;<br>    &#125;<br>    valToIndex.put(nums[i],i);<br>   &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•é¢˜</category>
      </categories>
  </entry>
  <entry>
    <title>LeetCode-283.ç§»åŠ¨é›¶</title>
    <url>/2024/12/21/%E7%AE%97%E6%B3%95%E9%A2%98-%E7%A7%BB%E5%8A%A8%E9%9B%B6/</url>
    <content><![CDATA[<p><a href="https://leetcode.cn/problems/move-zeroes/">283. ç§»åŠ¨é›¶</a></p>
<p>ç»™å®šä¸€ä¸ªæ•°ç»„ <code>nums</code>ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰ <code>0</code> ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚</p>
<p><strong>è¯·æ³¨æ„</strong> ï¼Œå¿…é¡»åœ¨ä¸å¤åˆ¶æ•°ç»„çš„æƒ…å†µä¸‹åŸåœ°å¯¹æ•°ç»„è¿›è¡Œæ“ä½œã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight text"><table><tr><td class="code"><pre><code class="hljs text">è¾“å…¥: nums = [0,1,0,3,12]<br>è¾“å‡º: [1,3,12,0,0]<br></code></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight text"><table><tr><td class="code"><pre><code class="hljs text">è¾“å…¥: nums = [0]<br>è¾“å‡º: [0]<br></code></pre></td></tr></table></figure>

<p><strong>æç¤º</strong>:</p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 104</code></li>
<li><code>-231 &lt;= nums[i] &lt;= 231 - 1</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">moveZeroes</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> &#123;<br>        <span class="hljs-type">int</span> slow=<span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> fast=<span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> res=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(fast&lt;nums.length)&#123;<br>            <span class="hljs-keyword">if</span>(nums[fast]!=<span class="hljs-number">0</span>)&#123;<br>                nums[slow]=nums[fast];<br>                  slow++;<br>            &#125;   <br>            fast++;<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=slow;i&lt;nums.length;i++)&#123;<br>            nums[i]=<span class="hljs-number">0</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•é¢˜</category>
      </categories>
  </entry>
  <entry>
    <title>Dockeréƒ¨ç½²MySQLå¹¶å®ç°è¿œç¨‹è¿æ¥</title>
    <url>/2025/01/20/%E7%BD%91%E7%AB%99%E9%83%A8%E7%BD%B2-Docker%E9%83%A8%E7%BD%B2MySQL/</url>
    <content><![CDATA[<p><strong>1.ç¼–å†™å¥½dockerfileæ–‡ä»¶</strong></p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment">#æŒ‡å®šåŸºç¡€é•œåƒ</span><br><span class="hljs-keyword">FROM</span> mysql:latest<br><br><span class="hljs-comment">#è®¾ç½®åˆå§‹ç¯å¢ƒå˜é‡</span><br><span class="hljs-keyword">ENV</span> MYSQL_ROOT_PASSWORD=<span class="hljs-number">123456</span><br><br><span class="hljs-keyword">ENV</span> MYSQL_DATABASE=database<br><br><span class="hljs-comment">#ç”¨äºå°†åˆå§‹åŒ–è„šæœ¬ init.sql å¤åˆ¶åˆ° MySQL å®¹å™¨çš„ /docker-entrypoint-initdb.d/ ç›®å½•ä¸­ã€‚å½“ #MySQL å®¹å™¨å¯åŠ¨æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨æ‰§è¡Œè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰ SQL è„šæœ¬æ–‡ä»¶ï¼Œä»è€Œå®Œæˆæ•°æ®åº“çš„åˆå§‹åŒ–ã€‚</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> init.sql /docker-entrypoint-initdb.d/</span><br><br><span class="hljs-comment">#EXPOSEæŒ‡ä»¤ç”¨äºåœ¨Dockerfileä¸­å£°æ˜å®¹å™¨åœ¨è¿è¡Œæ—¶ç›‘å¬çš„ç½‘ç»œç«¯å£ï¼Œä½†å®ƒå¹¶ä¸ä¼šè‡ªåŠ¨æš´éœ²ç«¯å£ï¼Œä¹Ÿä¸ä¼šå°†å®¹</span><br><span class="hljs-comment">#å™¨å†…éƒ¨çš„ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºä¸Šã€‚å…¶ä¸»è¦ä½œç”¨æ˜¯æä¾›ä¸€ç§æ–¹å¼ï¼Œè®©å¼€å‘è€…å’Œå…¶ä»–äººèƒ½å¤Ÿæ¸…æ¥šåœ°äº†è§£è¯¥å®¹å™¨éœ€è¦å¼€</span><br><span class="hljs-comment">#æ”¾å“ªäº›ç«¯å£</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">3306</span> <br></code></pre></td></tr></table></figure>

<p><strong>2.åˆ›å»ºå®¹å™¨å¹¶è¿è¡Œ</strong></p>
<p>è¿™é‡Œå…ˆåˆ‡æ¢åˆ°äº†æˆ‘è‡ªå·±çš„MySQLDockerç›®å½•</p>
<p> <img src="/img/articles/18.png"> </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> MySQLDocker<br></code></pre></td></tr></table></figure>

<p>ï¼ˆ1ï¼‰ä»¥ä¸‹å‘½ä»¤ç”¨äºä»å½“å‰ç›®å½•ä¸‹çš„ Dockerfile æ„å»ºä¸€ä¸ªæ–°çš„ Docker é•œåƒï¼Œå¹¶å°†å…¶å‘½åä¸º <code>mysql-image</code>ã€‚</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><code class="hljs arduino">docker build -t mysql-image .<br></code></pre></td></tr></table></figure>

<h6 id="è¯¦ç»†è§£é‡Šï¼š"><a href="#è¯¦ç»†è§£é‡Šï¼š" class="headerlink" title="è¯¦ç»†è§£é‡Šï¼š"></a><strong>è¯¦ç»†è§£é‡Š</strong>ï¼š</h6><ul>
<li>**<code>docker build</code>**ï¼š<ul>
<li>è¿™æ˜¯ Docker çš„ä¸€ä¸ªå‘½ä»¤ï¼Œç”¨äºæ ¹æ® Dockerfile æ„å»ºä¸€ä¸ªæ–°çš„é•œåƒã€‚</li>
</ul>
</li>
<li>**<code>-t mysql-image</code>**ï¼š<ul>
<li><code>-t</code> æ˜¯ <code>--tag</code> çš„ç®€å†™ï¼Œç”¨äºä¸ºæ„å»ºçš„é•œåƒæŒ‡å®šä¸€ä¸ªåç§°ï¼ˆå’Œå¯é€‰çš„æ ‡ç­¾ï¼‰ã€‚åœ¨è¿™é‡Œï¼Œé•œåƒçš„åç§°æ˜¯ <code>mysql-image</code>ã€‚å¦‚æœæƒ³æŒ‡å®šä¸€ä¸ªæ ‡ç­¾ï¼ˆä¾‹å¦‚ç‰ˆæœ¬å·ï¼‰ï¼Œå¯ä»¥å†™æˆ <code>-t mysql-image:1.0</code>ã€‚</li>
</ul>
</li>
<li>**<code>.</code>**ï¼š<ul>
<li>è¡¨ç¤ºå½“å‰ç›®å½•ã€‚Docker ä¼šåœ¨è¿™ä¸ªç›®å½•ä¸‹æŸ¥æ‰¾ <code>Dockerfile</code>ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥æ„å»ºé•œåƒã€‚è¿™ä¸ªç›®å½•ä¹Ÿè¢«ç§°ä¸ºæ„å»ºä¸Šä¸‹æ–‡ï¼ˆbuild contextï¼‰ã€‚Docker ä¼šå°†å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹å‘é€åˆ° Docker å®ˆæŠ¤è¿›ç¨‹ï¼Œå› æ­¤ç¡®ä¿å½“å‰ç›®å½•ä¸­åŒ…å«æ‰€æœ‰éœ€è¦çš„æ–‡ä»¶ï¼ˆå¦‚ <code>Dockerfile</code> å’Œåˆå§‹åŒ–è„šæœ¬ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p>ï¼ˆ2ï¼‰ä»¥ä¸‹å‘½ä»¤ç”¨äºä» <code>mysql-image</code> é•œåƒåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªæ–°çš„ Docker å®¹å™¨ï¼Œå¹¶å°†å…¶å‘½åä¸º <code>mysql-container</code>ã€‚</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> run --name mysql-container -p <span class="hljs-number">3306</span>:<span class="hljs-number">3306</span> -d mysql-image<br></code></pre></td></tr></table></figure>

<h6 id="è¯¦ç»†è§£é‡Šï¼š-1"><a href="#è¯¦ç»†è§£é‡Šï¼š-1" class="headerlink" title="è¯¦ç»†è§£é‡Šï¼š"></a><strong>è¯¦ç»†è§£é‡Š</strong>ï¼š</h6><ul>
<li>**<code>docker run</code>**ï¼š<ul>
<li>ç”¨äºåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªæ–°çš„ Docker å®¹å™¨ã€‚</li>
</ul>
</li>
<li>**<code>--name mysql-container</code>**ï¼š<ul>
<li>ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°ï¼ˆ<code>mysql-container</code>ï¼‰ï¼Œä¾¿äºåç»­æ“ä½œã€‚</li>
</ul>
</li>
<li>**<code>-p 3306:3306</code>**ï¼š<ul>
<li>å°†å®¹å™¨çš„ 3306 ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„ 3306 ç«¯å£ã€‚è¿™æ„å‘³ç€å¯ä»¥ä»å®¿ä¸»æœºæˆ–å…¶ä»–æœºå™¨é€šè¿‡ <code>å®¿ä¸»æœºIP:3306</code> è®¿é—®å®¹å™¨ä¸­çš„ MySQL æœåŠ¡ã€‚</li>
<li>æ ¼å¼ä¸º <code>-p å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</code>ã€‚</li>
</ul>
</li>
<li>**<code>-d mysql-image</code>**ï¼š<ul>
<li><code>-d</code> è¡¨ç¤ºä»¥ <strong>detached</strong> æ¨¡å¼è¿è¡Œå®¹å™¨ï¼ˆå³åœ¨åå°è¿è¡Œï¼‰ã€‚</li>
<li><code>mysql-image</code> æ˜¯åˆšåˆšæ„å»ºçš„é•œåƒåç§°ï¼ŒDocker å°†ä½¿ç”¨å®ƒæ¥åˆ›å»ºå®¹å™¨ã€‚</li>
</ul>
</li>
</ul>
<p><strong>3.è¿›å…¥æ­£åœ¨è¿è¡Œçš„ <code>mysql-container</code> å®¹å™¨å’Œè¿›å…¥ MySQL çš„äº¤äº’å¼å‘½ä»¤è¡Œç•Œé¢</strong></p>
<figure class="highlight mel"><table><tr><td class="code"><pre><code class="hljs mel">docker <span class="hljs-keyword">exec</span> -it mysql-<span class="hljs-keyword">container</span> mysql -uroot -p123456<br></code></pre></td></tr></table></figure>

<h6 id="è¯¦ç»†è§£é‡Šï¼š-2"><a href="#è¯¦ç»†è§£é‡Šï¼š-2" class="headerlink" title="è¯¦ç»†è§£é‡Šï¼š"></a><strong>è¯¦ç»†è§£é‡Š</strong>ï¼š</h6><ul>
<li>**<code>docker exec</code>**ï¼š<ul>
<li>ç”¨äºåœ¨æ­£åœ¨è¿è¡Œçš„å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤ã€‚</li>
</ul>
</li>
<li>**<code>-it</code>**ï¼š<ul>
<li><code>-i</code> è¡¨ç¤ºäº¤äº’å¼æ¨¡å¼ï¼Œå…è®¸ç”¨æˆ·ä¸å®¹å™¨å†…çš„å‘½ä»¤äº¤äº’ã€‚</li>
<li><code>-t</code> åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿåƒåœ¨æœ¬åœ°ç»ˆç«¯ä¸­ä¸€æ ·æ“ä½œã€‚</li>
</ul>
</li>
<li>**<code>mysql-container</code>**ï¼š<ul>
<li>æŒ‡å®šç›®æ ‡å®¹å™¨çš„åç§°ï¼ˆå³ä¹‹å‰åˆ›å»ºçš„ <code>mysql-container</code>ï¼‰ã€‚</li>
</ul>
</li>
<li>**<code>mysql -uroot -p123456</code>**ï¼š<ul>
<li>åœ¨å®¹å™¨å†…æ‰§è¡Œçš„å‘½ä»¤ï¼Œç”¨äºå¯åŠ¨ MySQL å®¢æˆ·ç«¯ã€‚</li>
<li><code>-u root</code> è¡¨ç¤ºä»¥ <code>root</code> ç”¨æˆ·ç™»å½• MySQLã€‚</li>
<li><code>-p123456</code> è¡¨ç¤º <code>root</code> ç”¨æˆ·çš„å¯†ç æ˜¯ <code>123456</code>ã€‚</li>
</ul>
</li>
</ul>
<p><strong>4.åˆ›å»ºæ•°æ®åº“ç”¨æˆ·å¹¶é…ç½®å®ç°è¿œç¨‹è¿æ¥</strong>(MySQL 8.0åŠä»¥ä¸Š)</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><code class="hljs pgsql">mysql&gt; <span class="hljs-keyword">create</span> <span class="hljs-keyword">user</span> hhh@<span class="hljs-string">&#x27;%&#x27;</span> identified <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;123456&#x27;</span>;<br>Query OK, <span class="hljs-number">0</span> <span class="hljs-keyword">rows</span> affected (<span class="hljs-number">0.02</span> sec)<br><br>mysql&gt; <span class="hljs-keyword">grant</span> <span class="hljs-keyword">all</span> <span class="hljs-keyword">privileges</span> <span class="hljs-keyword">on</span> *.* <span class="hljs-keyword">to</span> hhh@<span class="hljs-string">&#x27;%&#x27;</span> <span class="hljs-keyword">with</span> <span class="hljs-keyword">grant</span> <span class="hljs-keyword">option</span>;<br>Query OK, <span class="hljs-number">0</span> <span class="hljs-keyword">rows</span> affected (<span class="hljs-number">0.01</span> sec)<br><br>mysql&gt; flush <span class="hljs-keyword">privileges</span>;<br>Query OK, <span class="hljs-number">0</span> <span class="hljs-keyword">rows</span> affected (<span class="hljs-number">0.01</span> sec)<br><br>mysql&gt;<br></code></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç½‘ç«™éƒ¨ç½²</category>
      </categories>
  </entry>
  <entry>
    <title>LinuxæœåŠ¡å™¨JDKå®‰è£…å’Œç¯å¢ƒå˜é‡é…ç½®</title>
    <url>/2024/12/07/%E7%BD%91%E7%AB%99%E9%83%A8%E7%BD%B2-JDK%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<p><strong>1.å®‰è£…JDK</strong>ï¼š</p>
<ul>
<li><p>å¯¹äºCentOSï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight text"><table><tr><td class="code"><pre><code class="hljs text">sudo yum install java-1.8.0-openjdk-devel<br></code></pre></td></tr></table></figure>
</li>
<li><p>è¿™å°†å®‰è£…OpenJDK 8ï¼ŒåŒ…æ‹¬<code>javac</code>ç¼–è¯‘å™¨ã€‚</p>
</li>
</ul>
<p><strong>2.é…ç½®ç¯å¢ƒå˜é‡</strong>ï¼š</p>
<ul>
<li><p>å®‰è£…å®Œæˆåï¼Œéœ€è¦é…ç½®JAVA_HOMEç¯å¢ƒå˜é‡,å¯ä»¥é€šè¿‡æŸ¥æ‰¾javaå‘½ä»¤çš„è·¯å¾„æ¥ç¡®å®šJDKçš„å®‰è£…ä½ç½®ï¼š</p>
<figure class="highlight text"><table><tr><td class="code"><pre><code class="hljs text">sudo update-alternatives --config java<br></code></pre></td></tr></table></figure></li>
</ul>
<p>â€‹      å¦‚ä¸‹å›¾ç¤ºä¾‹ï¼š</p>
<p><img src="/img/articles/13.png"> </p>
<ul>
<li><p>ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€<code>.bashrc</code>æ–‡ä»¶ï¼Œä¾‹å¦‚ä½¿ç”¨<code>vi</code>ï¼ˆæŒ‰iå¼€å¯ç¼–è¾‘ï¼ŒEsc+:wqä¿å­˜+Enteré€€å‡ºï¼‰</p>
<figure class="highlight text"><table><tr><td class="code"><pre><code class="hljs text">vi ~/.bashrc<br></code></pre></td></tr></table></figure></li>
</ul>
<p>â€‹       æ·»åŠ ä»¥ä¸‹è¡Œåˆ°æ–‡ä»¶ä¸­ï¼š</p>
<figure class="highlight text"><table><tr><td class="code"><pre><code class="hljs text">export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.x86_64<br>export PATH=$PATH:$JAVA_HOME/bin<br></code></pre></td></tr></table></figure>

<p>â€‹      å¦‚ä¸‹å›¾ç¤ºä¾‹ï¼š</p>
<p><img src="/img/articles/14.png"> </p>
<p>â€‹     ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼Œè¿è¡Œï¼š</p>
<figure class="highlight text"><table><tr><td class="code"><pre><code class="hljs text">source ~/.bashrc<br></code></pre></td></tr></table></figure>

<p><strong>3.éªŒè¯ç¯å¢ƒå˜é‡</strong>ï¼š</p>
<figure class="highlight text"><table><tr><td class="code"><pre><code class="hljs text">echo $JAVA_HOME<br>echo $PATH<br></code></pre></td></tr></table></figure>

<p><strong>4.æµ‹è¯•<code>javac</code>å‘½ä»¤</strong></p>
<figure class="highlight text"><table><tr><td class="code"><pre><code class="hljs text">javac -version<br></code></pre></td></tr></table></figure>



<p><strong>é…ç½®æˆåŠŸå¦‚ä¸‹å›¾</strong>ï¼š</p>
<p><img src="/img/articles/15.png"> </p>
<p>å¦å¤–ï¼Œå†è¡¥å……ä¸€éƒ¨åˆ†ä»¥ä¸‹æ˜¯MySQL 8ç‰ˆæœ¬åˆ›å»ºç”¨æˆ·ï¼ˆèµ‹äºˆæ‰€æœ‰è®¿é—®æƒé™ï¼‰çš„æ–¹æ³•ï¼ˆåˆ·æ–°æƒé™æ˜¯flush privilegesï¼‰</p>
<p><img src="/img/articles/16.png"> </p>
<p>é¢æ¿ä¹Ÿå¯ç›¸åº”åˆ›å»º</p>
]]></content>
      <categories>
        <category>ç½‘ç«™éƒ¨ç½²</category>
      </categories>
  </entry>
  <entry>
    <title>å¤šç¯å¢ƒæ¦‚å¿µç†è§£</title>
    <url>/2024/11/16/%E7%BD%91%E7%AB%99%E9%83%A8%E7%BD%B2-%E5%A4%9A%E7%8E%AF%E5%A2%83/</url>
    <content><![CDATA[<h3 id="ä¸€ï¼šå¤šç¯å¢ƒæ¦‚å¿µï¼š"><a href="#ä¸€ï¼šå¤šç¯å¢ƒæ¦‚å¿µï¼š" class="headerlink" title="ä¸€ï¼šå¤šç¯å¢ƒæ¦‚å¿µï¼š"></a>ä¸€ï¼šå¤šç¯å¢ƒæ¦‚å¿µï¼š</h3><p>æ˜¯æŒ‡æ ¹æ®é¡¹ç›®çš„ä¸åŒé˜¶æ®µå’Œéœ€æ±‚ï¼Œå°†é¡¹ç›®éƒ¨ç½²åœ¨ä¸åŒçš„ç¯å¢ƒä¸­ï¼Œä»¥ç¡®ä¿å„ç¯å¢ƒä¹‹é—´ç›¸äº’ç‹¬ç«‹ä¸”äº’ä¸å½±å“ã€‚å¤šç¯å¢ƒè®¾è®¡çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†åœ¨ä¸åŒçš„å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²é˜¶æ®µä¸­ï¼Œç¡®ä¿é¡¹ç›®çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p>
<h4 id="çœæµï¼šæ ¹æ®å®é™…éœ€è¦ï¼Œå¯¹é¡¹ç›®é˜¶æ®µè¿›è¡Œéƒ¨ç½²ï¼Œç›¸äº’ç‹¬ç«‹ä¸”äº’ç›¸ä¸å½±å“ã€‚"><a href="#çœæµï¼šæ ¹æ®å®é™…éœ€è¦ï¼Œå¯¹é¡¹ç›®é˜¶æ®µè¿›è¡Œéƒ¨ç½²ï¼Œç›¸äº’ç‹¬ç«‹ä¸”äº’ç›¸ä¸å½±å“ã€‚" class="headerlink" title="çœæµï¼šæ ¹æ®å®é™…éœ€è¦ï¼Œå¯¹é¡¹ç›®é˜¶æ®µè¿›è¡Œéƒ¨ç½²ï¼Œç›¸äº’ç‹¬ç«‹ä¸”äº’ç›¸ä¸å½±å“ã€‚"></a>çœæµï¼š<strong>æ ¹æ®å®é™…éœ€è¦ï¼Œå¯¹é¡¹ç›®é˜¶æ®µè¿›è¡Œéƒ¨ç½²ï¼Œç›¸äº’ç‹¬ç«‹ä¸”äº’ç›¸ä¸å½±å“ã€‚</strong></h4><h5 id="å¤šç¯å¢ƒçš„åˆ†ç±»ï¼š"><a href="#å¤šç¯å¢ƒçš„åˆ†ç±»ï¼š" class="headerlink" title="å¤šç¯å¢ƒçš„åˆ†ç±»ï¼š"></a>å¤šç¯å¢ƒçš„åˆ†ç±»ï¼š</h5><ol>
<li>æœ¬åœ°ç¯å¢ƒ(è‡ªå·±çš„ç”µè„‘ï¼‰localhostï¼ˆç†Ÿæ‚‰çš„localhostï¼‰</li>
<li>å¼€å‘ç¯å¢ƒï¼šå…¬å¸è¿åŒä¸€å°æœºå™¨ï¼Œæ–¹ä¾¿å¼€å‘</li>
<li>æµ‹è¯•ç¯å¢ƒï¼šæ€§èƒ½æµ‹è¯•&#x2F;åŠŸèƒ½æµ‹è¯•&#x2F;ç³»ç»Ÿé›†æˆæµ‹è¯•</li>
<li>é¢„å‘å¸ƒç¯å¢ƒï¼ˆä½“éªŒæœï¼‰ï¼šç”¨æ­£å¼æœçš„æ•°æ®å†è¿›è¡Œæµ‹è¯•</li>
<li>æ­£å¼ç¯å¢ƒï¼ˆçº¿ä¸Šï¼Œå…¬å¼€è®¿é—®çš„é¡¹ç›®ï¼‰</li>
<li>æ²™ç®±ç¯å¢ƒï¼šç›®çš„å°±æ˜¯ä¸ºäº†åšå®éªŒï¼ˆåšå®Œå°±é”€æ¯ï¼‰</li>
</ol>
<h3 id="äºŒï¼šå‰ç«¯é…ç½®å¤šç¯å¢ƒï¼š"><a href="#äºŒï¼šå‰ç«¯é…ç½®å¤šç¯å¢ƒï¼š" class="headerlink" title="äºŒï¼šå‰ç«¯é…ç½®å¤šç¯å¢ƒï¼š"></a>äºŒï¼šå‰ç«¯é…ç½®å¤šç¯å¢ƒï¼š</h3><h5 id="1ï¼šè¯·æ±‚åœ°å€ï¼š"><a href="#1ï¼šè¯·æ±‚åœ°å€ï¼š" class="headerlink" title="1ï¼šè¯·æ±‚åœ°å€ï¼š"></a>1ï¼šè¯·æ±‚åœ°å€ï¼š</h5><ul>
<li>å¼€å‘ç¯å¢ƒï¼šlocalhost:8000</li>
<li>çº¿ä¸Šç¯å¢ƒï¼šåŸŸåæˆ–è€…å…¬ç½‘ip</li>
</ul>
<p><strong>2ï¼šå¯åŠ¨æ–¹å¼ï¼š</strong>ï¼ˆæœ¬äººä¹ æƒ¯ä½¿ç”¨npmï¼‰<br>npm run start </p>
<p>é€šå¸¸ç”¨äºå¯åŠ¨å¼€å‘æœåŠ¡å™¨æˆ–è€…åº”ç”¨ç¨‹åºçš„å¼€å‘æ¨¡å¼ã€‚è¿™ä¸ªå‘½ä»¤ä¸€èˆ¬ä¼šå¯åŠ¨ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨ï¼Œç›‘å¬æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨é‡æ–°åŠ è½½åº”ç”¨ï¼Œä»¥æ–¹ä¾¿å¼€å‘äººå‘˜åœ¨å¼€å‘è¿‡ç¨‹ä¸­è¿›è¡Œå®æ—¶è°ƒè¯•ã€‚è¿™ä¸ªå‘½ä»¤é€šå¸¸ç”¨äºå¼€å‘é˜¶æ®µï¼Œä¸ä¼šå¯¹ä»£ç è¿›è¡Œä¼˜åŒ–å’Œå‹ç¼©ï¼Œä»¥ä¾¿å¼€å‘äººå‘˜èƒ½å¤Ÿæ–¹ä¾¿åœ°è°ƒè¯•å’ŒæŸ¥çœ‹ä»£ç å˜åŒ–ã€‚</p>
<p>npm run build </p>
<p>é€šå¸¸ç”¨äºæ„å»ºç”Ÿäº§ç¯å¢ƒä¸‹çš„éƒ¨ç½²åŒ…ã€‚è¿™ä¸ªå‘½ä»¤ä¼šå¯¹é¡¹ç›®ä»£ç è¿›è¡Œä¼˜åŒ–ã€å‹ç¼©å’Œæ‰“åŒ…ï¼Œä»¥å‡å°æ–‡ä»¶å¤§å°å¹¶æé«˜è¿è¡Œæ•ˆç‡ã€‚é€šå¸¸ä¼šç”Ÿæˆç”¨äºéƒ¨ç½²çš„é™æ€æ–‡ä»¶ï¼Œå‡†å¤‡å¥½è¢«éƒ¨ç½²åˆ°ç”Ÿäº§æœåŠ¡å™¨ä¸Šã€‚è¿™ä¸ªå‘½ä»¤ä¸€èˆ¬åœ¨é¡¹ç›®å‡†å¤‡å‘å¸ƒæ—¶æ‰§è¡Œï¼Œä»¥ç¡®ä¿å‘å¸ƒçš„ä»£ç æ˜¯ç»è¿‡ä¼˜åŒ–å’Œå‹ç¼©çš„<br><strong>3ï¼šé¡¹ç›®çš„é…ç½®ï¼š</strong></p>
<p> ä¸åŒçš„é¡¹ç›®ï¼ˆæ¡†æ¶ï¼‰éƒ½æœ‰ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶åæ·»åŠ å¯¹åº”çš„ç¯å¢ƒåç§°åç¼€æ¥åŒºåˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚</p>
<p>ä»¥vueé¡¹ç›®ä¸¾ä¾‹ï¼Œ<code>NODE_ENV</code>ç¯å¢ƒå˜é‡é€šå¸¸ç”¨äºæŒ‡ç¤ºå½“å‰çš„ç¯å¢ƒï¼Œæ˜¯å¦ä¸ºå¼€å‘ç¯å¢ƒæˆ–ç”Ÿäº§ç¯å¢ƒã€‚åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œé€šå¸¸ä¼šè®¾ç½®<code>NODE_ENV</code>ä¸º<code>development</code>ï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è®¾ç½®ä¸º<code>production</code>ã€‚</p>
<p>build æ—¶ä¼šè‡ªåŠ¨ä¼ å…¥ NODE_ENV &#x3D;&#x3D; production å‚æ•°</p>
<p>æ‰€ä»¥æˆ‘ä»¬çš„æ€è·¯æ˜¯ä»€ä¹ˆå‘¢</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨å‰ç«¯çš„æ‹¦æˆªå™¨ä¸ŠåŠ ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶ï¼Œå¦‚æœNODE_ENVæ˜¯ç­‰äºè¿™ä¸ªproductionçš„ï¼Œæˆ‘ä»¬å°±è½¬åˆ°æˆ‘ä»¬æƒ³è¦è½¬çš„åœ°å€</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs vue">const isDev = process.env.NODE_ENV === &#x27;development&#x27;;<br>const Service = axios.create(&#123;<br>    baseURL: isDev ? &#x27;http://localhost:8089/&#x27; : &#x27;http://å…¬ç½‘ipæˆ–è€…åŸŸå&#x27;,<br>    withCredentials: true,<br>&#125;);<br>Service.defaults.withCredentials = true;<br></code></pre></td></tr></table></figure>

<p>ä¸€èˆ¬ä¸Šçº¿çš„è¯ï¼Œéœ€è¦è¿è¡Œ<strong>build è¿›è¡Œæ‰“åŒ…æ„å»ºï¼Œç„¶åç”Ÿæˆä¸€ä¸ªdistæ–‡ä»¶</strong></p>
<p>éšåï¼Œå¯ä»¥åœ¨é¡¹ç›®ç»ˆç«¯ä½¿ç”¨ serve å·¥å…·å¯åŠ¨ï¼ˆnpm i -g serveï¼Œå…ˆå®‰è£…ï¼‰ï¼Œæµè§ˆæ‰“åŒ…å¥½äº†çš„æ–‡ä»¶ </p>
<h3 id="ä¸‰ï¼šåç«¯é…ç½®å¤šç¯å¢ƒï¼š"><a href="#ä¸‰ï¼šåç«¯é…ç½®å¤šç¯å¢ƒï¼š" class="headerlink" title="ä¸‰ï¼šåç«¯é…ç½®å¤šç¯å¢ƒï¼š"></a>ä¸‰ï¼šåç«¯é…ç½®å¤šç¯å¢ƒï¼š</h3><h5 id="åç«¯å’Œå‰ç«¯ä¸€æ ·éƒ½éœ€è¦é…ç½®æ–‡ä»¶ï¼š"><a href="#åç«¯å’Œå‰ç«¯ä¸€æ ·éƒ½éœ€è¦é…ç½®æ–‡ä»¶ï¼š" class="headerlink" title="åç«¯å’Œå‰ç«¯ä¸€æ ·éƒ½éœ€è¦é…ç½®æ–‡ä»¶ï¼š"></a>åç«¯å’Œå‰ç«¯ä¸€æ ·éƒ½éœ€è¦é…ç½®æ–‡ä»¶ï¼š</h5><p>SpringBoot é¡¹ç›®ï¼Œé€šè¿‡ application.yml æ·»åŠ ä¸åŒçš„åç¼€æ¥åŒºåˆ†é…ç½®æ–‡ä»¶(å¦‚application-prod.ymlä½œä¸ºçº¿ä¸Šé…ç½® )</p>
<h5 id="ç„¶åæˆ‘ä»¬è¿è¡Œmavenä¸­çš„packageï¼Œå¯¹é¡¹ç›®è¿›è¡Œæ‰“åŒ…"><a href="#ç„¶åæˆ‘ä»¬è¿è¡Œmavenä¸­çš„packageï¼Œå¯¹é¡¹ç›®è¿›è¡Œæ‰“åŒ…" class="headerlink" title="ç„¶åæˆ‘ä»¬è¿è¡Œmavenä¸­çš„packageï¼Œå¯¹é¡¹ç›®è¿›è¡Œæ‰“åŒ…"></a>ç„¶åæˆ‘ä»¬è¿è¡Œmavenä¸­çš„packageï¼Œå¯¹é¡¹ç›®è¿›è¡Œæ‰“åŒ…</h5><p>å¦å¤–ï¼Œå¦‚æœå•å…ƒæµ‹è¯•ä¸é‡è¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç‚¹å‡»è·³è¿‡æµ‹è¯•æ¨¡å¼è¿™ä¸ªæŒ‰é’®ã€‚</p>
<p> æ‰“åŒ…å®Œä¹‹åï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªæ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å¤¹ï¼ˆtargetï¼‰çš„ç»ˆç«¯ä¸­è¾“å…¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java">java -jar .\backend-<span class="hljs-number">0.0</span><span class="hljs-number">.1</span>-SNAPSHOT.jar --spring.profiles.active=prod<br></code></pre></td></tr></table></figure>

<p>é‚£ä¸€è¡Œä»£ç çš„æ„æ€å°±æ˜¯å¾€é‡Œä¼ äº†ä¸€ä¸ªç¯å¢ƒå‚æ•°ï¼Œè¿è¡Œåå°±ä¼šåˆ‡æ¢åˆ°çº¿ä¸Šé…ç½®</p>
]]></content>
      <categories>
        <category>ç½‘ç«™éƒ¨ç½²</category>
      </categories>
  </entry>
  <entry>
    <title>HTTPä¸­HTTPSçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ?</title>
    <url>/2024/12/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-HTTP%E4%B8%ADHTTPS%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88/</url>
    <content><![CDATA[<p> <img src="/img/articles/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.png"> </p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
      </categories>
  </entry>
  <entry>
    <title>å…³äºIDEAçš„mysqlé©±åŠ¨æ–‡ä»¶ä¸‹è½½å¤±è´¥çš„è§£å†³åŠæ³•ï¼ˆæ¥è‡ªä»¥å‰çš„csdnï¼‰</title>
    <url>/2024/11/12/%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%981/</url>
    <content><![CDATA[<p>ç¬¬ä¸€æ­¥ï¼Œåœ¨å®˜ç½‘ä¸Šæ‰¾åˆ°å¦‚å›¾</p>
<p> <img src="/img/articles/1.png"> </p>
<p> ç¬¬äºŒæ­¥ </p>
<p><img src="/img/articles/2.png"></p>
<p> ç¬¬ä¸‰æ­¥</p>
<p>å°†ä¸‹è½½å¥½çš„é©±åŠ¨æ–‡ä»¶å…ˆè§£å‹ç„¶åå†å¤åˆ¶åˆ°å®‰è£…IDEAçš„æ–‡ä»¶ç›®å½•ä¸‹é¢</p>
<p><img src="/img/articles/3.png"></p>
<p>æœ€åï¼Œå†å›å»IDEAç‚¹å‡»é©±åŠ¨çš„ä¸‹è½½</p>
<p>æˆåŠŸå¦‚å›¾</p>
<p><img src="/img/articles/4.png"></p>
]]></content>
      <categories>
        <category>é…ç½®å„ç±»ç¯å¢ƒæ‰€é‡é—®é¢˜</category>
      </categories>
  </entry>
</search>
